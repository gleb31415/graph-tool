(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fd={exports:{}},_o={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function BT(){if(X_)return _o;X_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:u,ref:a!==void 0?a:null,props:l}}return _o.Fragment=e,_o.jsx=t,_o.jsxs=t,_o}var Q_;function FT(){return Q_||(Q_=1,Fd.exports=BT()),Fd.exports}var Se=FT(),Hd={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function HT(){if(J_)return je;J_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function _(U){return U===null||typeof U!="object"?null:(U=v&&U[v]||U["@@iterator"],typeof U=="function"?U:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(U,G,q){this.props=U,this.context=G,this.refs=E,this.updater=q||y}C.prototype.isReactComponent={},C.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},C.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function A(){}A.prototype=C.prototype;function k(U,G,q){this.props=U,this.context=G,this.refs=E,this.updater=q||y}var O=k.prototype=new A;O.constructor=k,S(O,C.prototype),O.isPureReactComponent=!0;var N=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function V(U,G,q,Z,ce,ue){return q=ue.ref,{$$typeof:r,type:U,key:G,ref:q!==void 0?q:null,props:ue}}function J(U,G){return V(U.type,G,void 0,void 0,void 0,U.props)}function Y(U){return typeof U=="object"&&U!==null&&U.$$typeof===r}function ie(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(q){return G[q]})}var ye=/\/+/g;function L(U,G){return typeof U=="object"&&U!==null&&U.key!=null?ie(""+U.key):G.toString(36)}function x(){}function T(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(x,x):(U.status="pending",U.then(function(G){U.status==="pending"&&(U.status="fulfilled",U.value=G)},function(G){U.status==="pending"&&(U.status="rejected",U.reason=G)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ae(U,G,q,Z,ce){var ue=typeof U;(ue==="undefined"||ue==="boolean")&&(U=null);var Ae=!1;if(U===null)Ae=!0;else switch(ue){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(U.$$typeof){case r:case e:Ae=!0;break;case m:return Ae=U._init,ae(Ae(U._payload),G,q,Z,ce)}}if(Ae)return ce=ce(U),Ae=Z===""?"."+L(U,0):Z,N(ce)?(q="",Ae!=null&&(q=Ae.replace(ye,"$&/")+"/"),ae(ce,G,q,"",function(Fe){return Fe})):ce!=null&&(Y(ce)&&(ce=J(ce,q+(ce.key==null||U&&U.key===ce.key?"":(""+ce.key).replace(ye,"$&/")+"/")+Ae)),G.push(ce)),1;Ae=0;var qe=Z===""?".":Z+":";if(N(U))for(var De=0;De<U.length;De++)Z=U[De],ue=qe+L(Z,De),Ae+=ae(Z,G,q,ue,ce);else if(De=_(U),typeof De=="function")for(U=De.call(U),De=0;!(Z=U.next()).done;)Z=Z.value,ue=qe+L(Z,De++),Ae+=ae(Z,G,q,ue,ce);else if(ue==="object"){if(typeof U.then=="function")return ae(T(U),G,q,Z,ce);throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function P(U,G,q){if(U==null)return U;var Z=[],ce=0;return ae(U,Z,"","",function(ue){return G.call(q,ue,ce++)}),Z}function I(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(q){(U._status===0||U._status===-1)&&(U._status=1,U._result=q)},function(q){(U._status===0||U._status===-1)&&(U._status=2,U._result=q)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var he=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function re(){}return je.Children={map:P,forEach:function(U,G,q){P(U,function(){G.apply(this,arguments)},q)},count:function(U){var G=0;return P(U,function(){G++}),G},toArray:function(U){return P(U,function(G){return G})||[]},only:function(U){if(!Y(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},je.Component=C,je.Fragment=t,je.Profiler=a,je.PureComponent=k,je.StrictMode=i,je.Suspense=d,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,je.__COMPILER_RUNTIME={__proto__:null,c:function(U){return D.H.useMemoCache(U)}},je.cache=function(U){return function(){return U.apply(null,arguments)}},je.cloneElement=function(U,G,q){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var Z=S({},U.props),ce=U.key,ue=void 0;if(G!=null)for(Ae in G.ref!==void 0&&(ue=void 0),G.key!==void 0&&(ce=""+G.key),G)!W.call(G,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&G.ref===void 0||(Z[Ae]=G[Ae]);var Ae=arguments.length-2;if(Ae===1)Z.children=q;else if(1<Ae){for(var qe=Array(Ae),De=0;De<Ae;De++)qe[De]=arguments[De+2];Z.children=qe}return V(U.type,ce,void 0,void 0,ue,Z)},je.createContext=function(U){return U={$$typeof:u,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},je.createElement=function(U,G,q){var Z,ce={},ue=null;if(G!=null)for(Z in G.key!==void 0&&(ue=""+G.key),G)W.call(G,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ce[Z]=G[Z]);var Ae=arguments.length-2;if(Ae===1)ce.children=q;else if(1<Ae){for(var qe=Array(Ae),De=0;De<Ae;De++)qe[De]=arguments[De+2];ce.children=qe}if(U&&U.defaultProps)for(Z in Ae=U.defaultProps,Ae)ce[Z]===void 0&&(ce[Z]=Ae[Z]);return V(U,ue,void 0,void 0,null,ce)},je.createRef=function(){return{current:null}},je.forwardRef=function(U){return{$$typeof:h,render:U}},je.isValidElement=Y,je.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:I}},je.memo=function(U,G){return{$$typeof:p,type:U,compare:G===void 0?null:G}},je.startTransition=function(U){var G=D.T,q={};D.T=q;try{var Z=U(),ce=D.S;ce!==null&&ce(q,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(re,he)}catch(ue){he(ue)}finally{D.T=G}},je.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},je.use=function(U){return D.H.use(U)},je.useActionState=function(U,G,q){return D.H.useActionState(U,G,q)},je.useCallback=function(U,G){return D.H.useCallback(U,G)},je.useContext=function(U){return D.H.useContext(U)},je.useDebugValue=function(){},je.useDeferredValue=function(U,G){return D.H.useDeferredValue(U,G)},je.useEffect=function(U,G,q){var Z=D.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(U,G)},je.useId=function(){return D.H.useId()},je.useImperativeHandle=function(U,G,q){return D.H.useImperativeHandle(U,G,q)},je.useInsertionEffect=function(U,G){return D.H.useInsertionEffect(U,G)},je.useLayoutEffect=function(U,G){return D.H.useLayoutEffect(U,G)},je.useMemo=function(U,G){return D.H.useMemo(U,G)},je.useOptimistic=function(U,G){return D.H.useOptimistic(U,G)},je.useReducer=function(U,G,q){return D.H.useReducer(U,G,q)},je.useRef=function(U){return D.H.useRef(U)},je.useState=function(U){return D.H.useState(U)},je.useSyncExternalStore=function(U,G,q){return D.H.useSyncExternalStore(U,G,q)},je.useTransition=function(){return D.H.useTransition()},je.version="19.1.0",je}var ey;function np(){return ey||(ey=1,Hd.exports=HT()),Hd.exports}var pt=np(),jd={exports:{}},yo={},qd={exports:{}},Vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function jT(){return ty||(ty=1,function(r){function e(P,I){var he=P.length;P.push(I);e:for(;0<he;){var re=he-1>>>1,U=P[re];if(0<a(U,I))P[re]=I,P[he]=U,he=re;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var I=P[0],he=P.pop();if(he!==I){P[0]=he;e:for(var re=0,U=P.length,G=U>>>1;re<G;){var q=2*(re+1)-1,Z=P[q],ce=q+1,ue=P[ce];if(0>a(Z,he))ce<U&&0>a(ue,Z)?(P[re]=ue,P[ce]=he,re=ce):(P[re]=Z,P[q]=he,re=q);else if(ce<U&&0>a(ue,he))P[re]=ue,P[ce]=he,re=ce;else break e}}return I}function a(P,I){var he=P.sortIndex-I.sortIndex;return he!==0?he:P.id-I.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],p=[],m=1,v=null,_=3,y=!1,S=!1,E=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var I=t(p);I!==null;){if(I.callback===null)i(p);else if(I.startTime<=P)i(p),I.sortIndex=I.expirationTime,e(d,I);else break;I=t(p)}}function D(P){if(E=!1,N(P),!S)if(t(d)!==null)S=!0,W||(W=!0,L());else{var I=t(p);I!==null&&ae(D,I.startTime-P)}}var W=!1,V=-1,J=5,Y=-1;function ie(){return C?!0:!(r.unstable_now()-Y<J)}function ye(){if(C=!1,W){var P=r.unstable_now();Y=P;var I=!0;try{e:{S=!1,E&&(E=!1,k(V),V=-1),y=!0;var he=_;try{t:{for(N(P),v=t(d);v!==null&&!(v.expirationTime>P&&ie());){var re=v.callback;if(typeof re=="function"){v.callback=null,_=v.priorityLevel;var U=re(v.expirationTime<=P);if(P=r.unstable_now(),typeof U=="function"){v.callback=U,N(P),I=!0;break t}v===t(d)&&i(d),N(P)}else i(d);v=t(d)}if(v!==null)I=!0;else{var G=t(p);G!==null&&ae(D,G.startTime-P),I=!1}}break e}finally{v=null,_=he,y=!1}I=void 0}}finally{I?L():W=!1}}}var L;if(typeof O=="function")L=function(){O(ye)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,T=x.port2;x.port1.onmessage=ye,L=function(){T.postMessage(null)}}else L=function(){A(ye,0)};function ae(P,I){V=A(function(){P(r.unstable_now())},I)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(P){switch(_){case 1:case 2:case 3:var I=3;break;default:I=_}var he=_;_=I;try{return P()}finally{_=he}},r.unstable_requestPaint=function(){C=!0},r.unstable_runWithPriority=function(P,I){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var he=_;_=P;try{return I()}finally{_=he}},r.unstable_scheduleCallback=function(P,I,he){var re=r.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?re+he:re):he=re,P){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=he+U,P={id:m++,callback:I,priorityLevel:P,startTime:he,expirationTime:U,sortIndex:-1},he>re?(P.sortIndex=he,e(p,P),t(d)===null&&P===t(p)&&(E?(k(V),V=-1):E=!0,ae(D,he-re))):(P.sortIndex=U,e(d,P),S||y||(S=!0,W||(W=!0,L()))),P},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(P){var I=_;return function(){var he=_;_=I;try{return P.apply(this,arguments)}finally{_=he}}}}(Vd)),Vd}var ny;function qT(){return ny||(ny=1,qd.exports=jT()),qd.exports}var Wd={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy;function VT(){if(iy)return Zt;iy=1;var r=np();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:p,implementation:m}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zt.createPortal=function(d,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,m)},Zt.flushSync=function(d){var p=u.T,m=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=p,i.p=m,i.d.f()}},Zt.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},Zt.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Zt.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var m=p.as,v=h(m,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,y=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:y}):m==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:y,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Zt.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},Zt.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,v=h(m,p.crossOrigin);i.d.L(d,m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Zt.preloadModule=function(d,p){if(typeof d=="string")if(p){var m=h(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},Zt.requestFormReset=function(d){i.d.r(d)},Zt.unstable_batchedUpdates=function(d,p){return d(p)},Zt.useFormState=function(d,p,m){return u.H.useFormState(d,p,m)},Zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zt.version="19.1.0",Zt}var ry;function WT(){if(ry)return Wd.exports;ry=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wd.exports=VT(),Wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function $T(){if(sy)return yo;sy=1;var r=qT(),e=np(),t=WT();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(i(188))}function d(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,c=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return h(f),n;if(g===c)return h(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=g;else{for(var w=!1,R=f.child;R;){if(R===o){w=!0,o=f,c=g;break}if(R===c){w=!0,c=f,o=g;break}R=R.sibling}if(!w){for(R=g.child;R;){if(R===o){w=!0,o=g,c=f;break}if(R===c){w=!0,c=g,o=f;break}R=R.sibling}if(!w)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),O=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=ye&&n[ye]||n["@@iterator"],typeof n=="function"?n:null)}var x=Symbol.for("react.client.reference");function T(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===x?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case W:return"SuspenseList";case Y:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case y:return"Portal";case O:return(n.displayName||"Context")+".Provider";case k:return(n._context.displayName||"Context")+".Consumer";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return s=n.displayName||null,s!==null?s:T(n.type)||"Memo";case J:s=n._payload,n=n._init;try{return T(n(s))}catch{}}return null}var ae=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},re=[],U=-1;function G(n){return{current:n}}function q(n){0>U||(n.current=re[U],re[U]=null,U--)}function Z(n,s){U++,re[U]=n.current,n.current=s}var ce=G(null),ue=G(null),Ae=G(null),qe=G(null);function De(n,s){switch(Z(Ae,s),Z(ue,n),Z(ce,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?C_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=C_(s),n=A_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}q(ce),Z(ce,n)}function Fe(){q(ce),q(ue),q(Ae)}function Pe(n){n.memoizedState!==null&&Z(qe,n);var s=ce.current,o=A_(s,n.type);s!==o&&(Z(ue,n),Z(ce,o))}function Ie(n){ue.current===n&&(q(ce),q(ue)),qe.current===n&&(q(qe),fo._currentValue=he)}var Be=Object.prototype.hasOwnProperty,dt=r.unstable_scheduleCallback,b=r.unstable_cancelCallback,Q=r.unstable_shouldYield,B=r.unstable_requestPaint,z=r.unstable_now,M=r.unstable_getCurrentPriorityLevel,K=r.unstable_ImmediatePriority,ge=r.unstable_UserBlockingPriority,F=r.unstable_NormalPriority,H=r.unstable_LowPriority,oe=r.unstable_IdlePriority,ve=r.log,de=r.unstable_setDisableYieldValue,le=null,be=null;function Te(n){if(typeof ve=="function"&&de(n),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(le,n)}catch{}}var Re=Math.clz32?Math.clz32:yt,He=Math.log,Je=Math.LN2;function yt(n){return n>>>=0,n===0?32:31-(He(n)/Je|0)|0}var Ve=256,at=4194304;function $t(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ht(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var R=c&134217727;return R!==0?(c=R&~g,c!==0?f=$t(c):(w&=R,w!==0?f=$t(w):o||(o=R&~n,o!==0&&(f=$t(o))))):(R=c&~g,R!==0?f=$t(R):w!==0?f=$t(w):o||(o=c&~n,o!==0&&(f=$t(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function Xn(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function ss(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function as(){var n=Ve;return Ve<<=1,(Ve&4194048)===0&&(Ve=256),n}function os(){var n=at;return at<<=1,(at&62914560)===0&&(at=4194304),n}function Fi(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function zn(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ls(n,s,o,c,f,g){var w=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var R=n.entanglements,j=n.expirationTimes,te=n.hiddenUpdates;for(o=w&~o;0<o;){var fe=31-Re(o),me=1<<fe;R[fe]=0,j[fe]=-1;var ne=te[fe];if(ne!==null)for(te[fe]=null,fe=0;fe<ne.length;fe++){var se=ne[fe];se!==null&&(se.lane&=-536870913)}o&=~me}c!==0&&cg(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(w&~s))}function cg(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Re(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&4194090}function hg(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-Re(o),f=1<<c;f&s|n[c]&s&&(n[c]|=s),o&=~f}}function Ic(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function xc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function dg(){var n=I.p;return n!==0?n:(n=window.event,n===void 0?32:V_(n.type))}function DS(n,s){var o=I.p;try{return I.p=n,s()}finally{I.p=o}}var Hi=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Hi,rn="__reactProps$"+Hi,us="__reactContainer$"+Hi,Oc="__reactEvents$"+Hi,NS="__reactListeners$"+Hi,IS="__reactHandles$"+Hi,fg="__reactResources$"+Hi,Sa="__reactMarker$"+Hi;function Lc(n){delete n[Yt],delete n[rn],delete n[Oc],delete n[NS],delete n[IS]}function cs(n){var s=n[Yt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[us]||o[Yt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=N_(n);n!==null;){if(o=n[Yt])return o;n=N_(n)}return s}n=o,o=n.parentNode}return null}function hs(n){if(n=n[Yt]||n[us]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ta(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function ds(n){var s=n[fg];return s||(s=n[fg]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Lt(n){n[Sa]=!0}var pg=new Set,gg={};function Tr(n,s){fs(n,s),fs(n+"Capture",s)}function fs(n,s){for(gg[n]=s,n=0;n<s.length;n++)pg.add(s[n])}var xS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mg={},vg={};function OS(n){return Be.call(vg,n)?!0:Be.call(mg,n)?!1:xS.test(n)?vg[n]=!0:(mg[n]=!0,!1)}function dl(n,s,o){if(OS(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function fl(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function oi(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}var Mc,_g;function ps(n){if(Mc===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Mc=s&&s[1]||"",_g=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mc+n+_g}var Uc=!1;function zc(n,s){if(!n||Uc)return"";Uc=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(se){var ne=se}Reflect.construct(n,[],me)}else{try{me.call()}catch(se){ne=se}n.call(me.prototype)}}else{try{throw Error()}catch(se){ne=se}(me=n())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(se){if(se&&ne&&typeof se.stack=="string")return[se.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),w=g[0],R=g[1];if(w&&R){var j=w.split(`
`),te=R.split(`
`);for(f=c=0;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(c===j.length||f===te.length)for(c=j.length-1,f=te.length-1;1<=c&&0<=f&&j[c]!==te[f];)f--;for(;1<=c&&0<=f;c--,f--)if(j[c]!==te[f]){if(c!==1||f!==1)do if(c--,f--,0>f||j[c]!==te[f]){var fe=`
`+j[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=f);break}}}finally{Uc=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?ps(o):""}function LS(n){switch(n.tag){case 26:case 27:case 5:return ps(n.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 15:return zc(n.type,!1);case 11:return zc(n.type.render,!1);case 1:return zc(n.type,!0);case 31:return ps("Activity");default:return""}}function yg(n){try{var s="";do s+=LS(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bg(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function MS(n){var s=bg(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function pl(n){n._valueTracker||(n._valueTracker=MS(n))}function Eg(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=bg(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function gl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var US=/[\n"\\]/g;function Sn(n){return n.replace(US,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pc(n,s,o,c,f,g,w,R){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),s!=null?w==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+wn(s)):n.value!==""+wn(s)&&(n.value=""+wn(s)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),s!=null?Gc(n,w,wn(s)):o!=null?Gc(n,w,wn(o)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+wn(R):n.removeAttribute("name")}function wg(n,s,o,c,f,g,w,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+wn(o):"",s=s!=null?""+wn(s):o,R||s===n.value||(n.value=s),n.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=R?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w)}function Gc(n,s,o){s==="number"&&gl(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function gs(n,s,o,c){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+wn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Sg(n,s,o){if(s!=null&&(s=""+wn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+wn(o):""}function Tg(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(ae(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=wn(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c)}function ms(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var zS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cg(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||zS.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Ag(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&o[f]!==c&&Cg(n,f,c)}else for(var g in s)s.hasOwnProperty(g)&&Cg(n,g,s[g])}function Bc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(n){return GS.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Fc=null;function Hc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vs=null,_s=null;function Rg(n){var s=hs(n);if(s&&(n=s.stateNode)){var o=n[rn]||null;e:switch(n=s.stateNode,s.type){case"input":if(Pc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Sn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var f=c[rn]||null;if(!f)throw Error(i(90));Pc(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Eg(c)}break e;case"textarea":Sg(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&gs(n,!!o.multiple,s,!1)}}}var jc=!1;function kg(n,s,o){if(jc)return n(s,o);jc=!0;try{var c=n(s);return c}finally{if(jc=!1,(vs!==null||_s!==null)&&(tu(),vs&&(s=vs,n=_s,_s=vs=null,Rg(s),n)))for(s=0;s<n.length;s++)Rg(n[s])}}function Ca(n,s){var o=n.stateNode;if(o===null)return null;var c=o[rn]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(li)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{qc=!1}var ji=null,Vc=null,vl=null;function Dg(){if(vl)return vl;var n,s=Vc,o=s.length,c,f="value"in ji?ji.value:ji.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var w=o-n;for(c=1;c<=w&&s[o-c]===f[g-c];c++);return vl=f.slice(n,1<c?1-c:void 0)}function _l(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function yl(){return!0}function Ng(){return!1}function sn(n){function s(o,c,f,g,w){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(o=n[R],this[R]=o?o(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yl:Ng,this.isPropagationStopped=Ng,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),s}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=sn(Cr),Ra=m({},Cr,{view:0,detail:0}),BS=sn(Ra),Wc,$c,ka,El=m({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ka&&(ka&&n.type==="mousemove"?(Wc=n.screenX-ka.screenX,$c=n.screenY-ka.screenY):$c=Wc=0,ka=n),Wc)},movementY:function(n){return"movementY"in n?n.movementY:$c}}),Ig=sn(El),FS=m({},El,{dataTransfer:0}),HS=sn(FS),jS=m({},Ra,{relatedTarget:0}),Yc=sn(jS),qS=m({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),VS=sn(qS),WS=m({},Cr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$S=sn(WS),YS=m({},Cr,{data:0}),xg=sn(YS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QS(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=XS[n])?!!s[n]:!1}function Kc(){return QS}var JS=m({},Ra,{key:function(n){if(n.key){var s=KS[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=_l(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ZS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kc,charCode:function(n){return n.type==="keypress"?_l(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_l(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),e1=sn(JS),t1=m({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=sn(t1),n1=m({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kc}),i1=sn(n1),r1=m({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1=sn(r1),a1=m({},El,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),o1=sn(a1),l1=m({},Cr,{newState:0,oldState:0}),u1=sn(l1),c1=[9,13,27,32],Zc=li&&"CompositionEvent"in window,Da=null;li&&"documentMode"in document&&(Da=document.documentMode);var h1=li&&"TextEvent"in window&&!Da,Lg=li&&(!Zc||Da&&8<Da&&11>=Da),Mg=" ",Ug=!1;function zg(n,s){switch(n){case"keyup":return c1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ys=!1;function d1(n,s){switch(n){case"compositionend":return Pg(s);case"keypress":return s.which!==32?null:(Ug=!0,Mg);case"textInput":return n=s.data,n===Mg&&Ug?null:n;default:return null}}function f1(n,s){if(ys)return n==="compositionend"||!Zc&&zg(n,s)?(n=Dg(),vl=Vc=ji=null,ys=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Lg&&s.locale!=="ko"?null:s.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!p1[n.type]:s==="textarea"}function Bg(n,s,o,c){vs?_s?_s.push(c):_s=[c]:vs=c,s=ou(s,"onChange"),0<s.length&&(o=new bl("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var Na=null,Ia=null;function g1(n){b_(n,0)}function wl(n){var s=Ta(n);if(Eg(s))return n}function Fg(n,s){if(n==="change")return s}var Hg=!1;if(li){var Xc;if(li){var Qc="oninput"in document;if(!Qc){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Qc=typeof jg.oninput=="function"}Xc=Qc}else Xc=!1;Hg=Xc&&(!document.documentMode||9<document.documentMode)}function qg(){Na&&(Na.detachEvent("onpropertychange",Vg),Ia=Na=null)}function Vg(n){if(n.propertyName==="value"&&wl(Ia)){var s=[];Bg(s,Ia,n,Hc(n)),kg(g1,s)}}function m1(n,s,o){n==="focusin"?(qg(),Na=s,Ia=o,Na.attachEvent("onpropertychange",Vg)):n==="focusout"&&qg()}function v1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return wl(Ia)}function _1(n,s){if(n==="click")return wl(s)}function y1(n,s){if(n==="input"||n==="change")return wl(s)}function b1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fn=typeof Object.is=="function"?Object.is:b1;function xa(n,s){if(fn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Be.call(s,f)||!fn(n[f],s[f]))return!1}return!0}function Wg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $g(n,s){var o=Wg(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Wg(o)}}function Yg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Yg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Kg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=gl(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=gl(n.document)}return s}function Jc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var E1=li&&"documentMode"in document&&11>=document.documentMode,bs=null,eh=null,Oa=null,th=!1;function Zg(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;th||bs==null||bs!==gl(c)||(c=bs,"selectionStart"in c&&Jc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Oa&&xa(Oa,c)||(Oa=c,c=ou(eh,"onSelect"),0<c.length&&(s=new bl("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=bs)))}function Ar(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Es={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionrun:Ar("Transition","TransitionRun"),transitionstart:Ar("Transition","TransitionStart"),transitioncancel:Ar("Transition","TransitionCancel"),transitionend:Ar("Transition","TransitionEnd")},nh={},Xg={};li&&(Xg=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Rr(n){if(nh[n])return nh[n];if(!Es[n])return n;var s=Es[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Xg)return nh[n]=s[o];return n}var Qg=Rr("animationend"),Jg=Rr("animationiteration"),em=Rr("animationstart"),w1=Rr("transitionrun"),S1=Rr("transitionstart"),T1=Rr("transitioncancel"),tm=Rr("transitionend"),nm=new Map,ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ih.push("scrollEnd");function Pn(n,s){nm.set(n,s),Tr(s,[n])}var im=new WeakMap;function Tn(n,s){if(typeof n=="object"&&n!==null){var o=im.get(n);return o!==void 0?o:(s={value:n,source:s,stack:yg(s)},im.set(n,s),s)}return{value:n,source:s,stack:yg(s)}}var Cn=[],ws=0,rh=0;function Sl(){for(var n=ws,s=rh=ws=0;s<n;){var o=Cn[s];Cn[s++]=null;var c=Cn[s];Cn[s++]=null;var f=Cn[s];Cn[s++]=null;var g=Cn[s];if(Cn[s++]=null,c!==null&&f!==null){var w=c.pending;w===null?f.next=f:(f.next=w.next,w.next=f),c.pending=f}g!==0&&rm(o,f,g)}}function Tl(n,s,o,c){Cn[ws++]=n,Cn[ws++]=s,Cn[ws++]=o,Cn[ws++]=c,rh|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function sh(n,s,o,c){return Tl(n,s,o,c),Cl(n)}function Ss(n,s){return Tl(n,null,null,s),Cl(n)}function rm(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-Re(o),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[s]:c.push(s),s.lane=o|536870912),g):null}function Cl(n){if(50<ro)throw ro=0,hd=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ts={};function C1(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,s,o,c){return new C1(n,s,o,c)}function ah(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ui(n,s){var o=n.alternate;return o===null?(o=pn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function sm(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Al(n,s,o,c,f,g){var w=0;if(c=n,typeof n=="function")ah(n)&&(w=1);else if(typeof n=="string")w=RT(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Y:return n=pn(31,o,s,f),n.elementType=Y,n.lanes=g,n;case S:return kr(o.children,f,g,s);case E:w=8,f|=24;break;case C:return n=pn(12,o,s,f|2),n.elementType=C,n.lanes=g,n;case D:return n=pn(13,o,s,f),n.elementType=D,n.lanes=g,n;case W:return n=pn(19,o,s,f),n.elementType=W,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case A:case O:w=10;break e;case k:w=9;break e;case N:w=11;break e;case V:w=14;break e;case J:w=16,c=null;break e}w=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=pn(w,o,s,f),s.elementType=n,s.type=c,s.lanes=g,s}function kr(n,s,o,c){return n=pn(7,n,c,s),n.lanes=o,n}function oh(n,s,o){return n=pn(6,n,null,s),n.lanes=o,n}function lh(n,s,o){return s=pn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Cs=[],As=0,Rl=null,kl=0,An=[],Rn=0,Dr=null,ci=1,hi="";function Nr(n,s){Cs[As++]=kl,Cs[As++]=Rl,Rl=n,kl=s}function am(n,s,o){An[Rn++]=ci,An[Rn++]=hi,An[Rn++]=Dr,Dr=n;var c=ci;n=hi;var f=32-Re(c)-1;c&=~(1<<f),o+=1;var g=32-Re(s)+f;if(30<g){var w=f-f%5;g=(c&(1<<w)-1).toString(32),c>>=w,f-=w,ci=1<<32-Re(s)+f|o<<f|c,hi=g+n}else ci=1<<g|o<<f|c,hi=n}function uh(n){n.return!==null&&(Nr(n,1),am(n,1,0))}function ch(n){for(;n===Rl;)Rl=Cs[--As],Cs[As]=null,kl=Cs[--As],Cs[As]=null;for(;n===Dr;)Dr=An[--Rn],An[Rn]=null,hi=An[--Rn],An[Rn]=null,ci=An[--Rn],An[Rn]=null}var en=null,wt=null,it=!1,Ir=null,Qn=!1,hh=Error(i(519));function xr(n){var s=Error(i(418,""));throw Ua(Tn(s,n)),hh}function om(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Yt]=n,s[rn]=c,o){case"dialog":Xe("cancel",s),Xe("close",s);break;case"iframe":case"object":case"embed":Xe("load",s);break;case"video":case"audio":for(o=0;o<ao.length;o++)Xe(ao[o],s);break;case"source":Xe("error",s);break;case"img":case"image":case"link":Xe("error",s),Xe("load",s);break;case"details":Xe("toggle",s);break;case"input":Xe("invalid",s),wg(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),pl(s);break;case"select":Xe("invalid",s);break;case"textarea":Xe("invalid",s),Tg(s,c.value,c.defaultValue,c.children),pl(s)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||T_(s.textContent,o)?(c.popover!=null&&(Xe("beforetoggle",s),Xe("toggle",s)),c.onScroll!=null&&Xe("scroll",s),c.onScrollEnd!=null&&Xe("scrollend",s),c.onClick!=null&&(s.onclick=lu),s=!0):s=!1,s||xr(n)}function lm(n){for(en=n.return;en;)switch(en.tag){case 5:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:en=en.return}}function La(n){if(n!==en)return!1;if(!it)return lm(n),it=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Rd(n.type,n.memoizedProps)),o=!o),o&&wt&&xr(n),lm(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){wt=Bn(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}wt=null}}else s===27?(s=wt,sr(n.type)?(n=Id,Id=null,wt=n):wt=s):wt=en?Bn(n.stateNode.nextSibling):null;return!0}function Ma(){wt=en=null,it=!1}function um(){var n=Ir;return n!==null&&(ln===null?ln=n:ln.push.apply(ln,n),Ir=null),n}function Ua(n){Ir===null?Ir=[n]:Ir.push(n)}var dh=G(null),Or=null,di=null;function qi(n,s,o){Z(dh,s._currentValue),s._currentValue=o}function fi(n){n._currentValue=dh.current,q(dh)}function fh(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function ph(n,s,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var w=f.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=f;for(var j=0;j<s.length;j++)if(R.context===s[j]){g.lanes|=o,R=g.alternate,R!==null&&(R.lanes|=o),fh(g.return,o,n),c||(w=null);break e}g=R.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(i(341));w.lanes|=o,g=w.alternate,g!==null&&(g.lanes|=o),fh(w,o,n),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===n){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function za(n,s,o,c){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var R=f.type;fn(f.pendingProps.value,w.value)||(n!==null?n.push(R):n=[R])}}else if(f===qe.current){if(w=f.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(fo):n=[fo])}f=f.return}n!==null&&ph(s,n,o,c),s.flags|=262144}function Dl(n){for(n=n.firstContext;n!==null;){if(!fn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Lr(n){Or=n,di=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Kt(n){return cm(Or,n)}function Nl(n,s){return Or===null&&Lr(n),cm(n,s)}function cm(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},di===null){if(n===null)throw Error(i(308));di=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else di=di.next=s;return o}var A1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},R1=r.unstable_scheduleCallback,k1=r.unstable_NormalPriority,Dt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gh(){return{controller:new A1,data:new Map,refCount:0}}function Pa(n){n.refCount--,n.refCount===0&&R1(k1,function(){n.controller.abort()})}var Ga=null,mh=0,Rs=0,ks=null;function D1(n,s){if(Ga===null){var o=Ga=[];mh=0,Rs=_d(),ks={status:"pending",value:void 0,then:function(c){o.push(c)}}}return mh++,s.then(hm,hm),s}function hm(){if(--mh===0&&Ga!==null){ks!==null&&(ks.status="fulfilled");var n=Ga;Ga=null,Rs=0,ks=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function N1(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var dm=P.S;P.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&D1(n,s),dm!==null&&dm(n,s)};var Mr=G(null);function vh(){var n=Mr.current;return n!==null?n:mt.pooledCache}function Il(n,s){s===null?Z(Mr,Mr.current):Z(Mr,s.pool)}function fm(){var n=vh();return n===null?null:{parent:Dt._currentValue,pool:n}}var Ba=Error(i(460)),pm=Error(i(474)),xl=Error(i(542)),_h={then:function(){}};function gm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ol(){}function mm(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Ol,Ol),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,_m(n),n;default:if(typeof s.status=="string")s.then(Ol,Ol);else{if(n=mt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,_m(n),n}throw Fa=s,Ba}}var Fa=null;function vm(){if(Fa===null)throw Error(i(459));var n=Fa;return Fa=null,n}function _m(n){if(n===Ba||n===xl)throw Error(i(483))}var Vi=!1;function yh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Wi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $i(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(rt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Cl(n),rm(n,null,o),s}return Tl(n,c,s,o),Cl(n)}function Ha(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,hg(n,o)}}function Eh(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=w:g=g.next=w,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var wh=!1;function ja(){if(wh){var n=ks;if(n!==null)throw n}}function qa(n,s,o,c){wh=!1;var f=n.updateQueue;Vi=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var j=R,te=j.next;j.next=null,w===null?g=te:w.next=te,w=j;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,R=fe.lastBaseUpdate,R!==w&&(R===null?fe.firstBaseUpdate=te:R.next=te,fe.lastBaseUpdate=j))}if(g!==null){var me=f.baseState;w=0,fe=te=j=null,R=g;do{var ne=R.lane&-536870913,se=ne!==R.lane;if(se?(et&ne)===ne:(c&ne)===ne){ne!==0&&ne===Rs&&(wh=!0),fe!==null&&(fe=fe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ge=n,Oe=R;ne=s;var ut=o;switch(Oe.tag){case 1:if(Ge=Oe.payload,typeof Ge=="function"){me=Ge.call(ut,me,ne);break e}me=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Oe.payload,ne=typeof Ge=="function"?Ge.call(ut,me,ne):Ge,ne==null)break e;me=m({},me,ne);break e;case 2:Vi=!0}}ne=R.callback,ne!==null&&(n.flags|=64,se&&(n.flags|=8192),se=f.callbacks,se===null?f.callbacks=[ne]:se.push(ne))}else se={lane:ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},fe===null?(te=fe=se,j=me):fe=fe.next=se,w|=ne;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;se=R,R=se.next,se.next=null,f.lastBaseUpdate=se,f.shared.pending=null}}while(!0);fe===null&&(j=me),f.baseState=j,f.firstBaseUpdate=te,f.lastBaseUpdate=fe,g===null&&(f.shared.lanes=0),tr|=w,n.lanes=w,n.memoizedState=me}}function ym(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function bm(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)ym(o[n],s)}var Ds=G(null),Ll=G(0);function Em(n,s){n=bi,Z(Ll,n),Z(Ds,s),bi=n|s.baseLanes}function Sh(){Z(Ll,bi),Z(Ds,Ds.current)}function Th(){bi=Ll.current,q(Ds),q(Ll)}var Yi=0,We=null,ot=null,Rt=null,Ml=!1,Ns=!1,Ur=!1,Ul=0,Va=0,Is=null,I1=0;function Ct(){throw Error(i(321))}function Ch(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!fn(n[o],s[o]))return!1;return!0}function Ah(n,s,o,c,f,g){return Yi=g,We=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=n===null||n.memoizedState===null?rv:sv,Ur=!1,g=o(c,f),Ur=!1,Ns&&(g=Sm(s,o,c,f)),wm(n),g}function wm(n){P.H=Hl;var s=ot!==null&&ot.next!==null;if(Yi=0,Rt=ot=We=null,Ml=!1,Va=0,Is=null,s)throw Error(i(300));n===null||Mt||(n=n.dependencies,n!==null&&Dl(n)&&(Mt=!0))}function Sm(n,s,o,c){We=n;var f=0;do{if(Ns&&(Is=null),Va=0,Ns=!1,25<=f)throw Error(i(301));if(f+=1,Rt=ot=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=P1,g=s(o,c)}while(Ns);return g}function x1(){var n=P.H,s=n.useState()[0];return s=typeof s.then=="function"?Wa(s):s,n=n.useState()[0],(ot!==null?ot.memoizedState:null)!==n&&(We.flags|=1024),s}function Rh(){var n=Ul!==0;return Ul=0,n}function kh(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Dh(n){if(Ml){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ml=!1}Yi=0,Rt=ot=We=null,Ns=!1,Va=Ul=0,Is=null}function an(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?We.memoizedState=Rt=n:Rt=Rt.next=n,Rt}function kt(){if(ot===null){var n=We.alternate;n=n!==null?n.memoizedState:null}else n=ot.next;var s=Rt===null?We.memoizedState:Rt.next;if(s!==null)Rt=s,ot=n;else{if(n===null)throw We.alternate===null?Error(i(467)):Error(i(310));ot=n,n={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Rt===null?We.memoizedState=Rt=n:Rt=Rt.next=n}return Rt}function Nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wa(n){var s=Va;return Va+=1,Is===null&&(Is=[]),n=mm(Is,n,s),s=We,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?rv:sv),n}function zl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wa(n);if(n.$$typeof===O)return Kt(n)}throw Error(i(438,String(n)))}function Ih(n){var s=null,o=We.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=We.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Nh(),We.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=ie;return s.index++,o}function pi(n,s){return typeof s=="function"?s(n):s}function Pl(n){var s=kt();return xh(s,ot,n)}function xh(n,s,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}s.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var R=w=null,j=null,te=s,fe=!1;do{var me=te.lane&-536870913;if(me!==te.lane?(et&me)===me:(Yi&me)===me){var ne=te.revertLane;if(ne===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),me===Rs&&(fe=!0);else if((Yi&ne)===ne){te=te.next,ne===Rs&&(fe=!0);continue}else me={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},j===null?(R=j=me,w=g):j=j.next=me,We.lanes|=ne,tr|=ne;me=te.action,Ur&&o(g,me),g=te.hasEagerState?te.eagerState:o(g,me)}else ne={lane:me,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},j===null?(R=j=ne,w=g):j=j.next=ne,We.lanes|=me,tr|=me;te=te.next}while(te!==null&&te!==s);if(j===null?w=g:j.next=R,!fn(g,n.memoizedState)&&(Mt=!0,fe&&(o=ks,o!==null)))throw o;n.memoizedState=g,n.baseState=w,n.baseQueue=j,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Oh(n){var s=kt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var w=f=f.next;do g=n(g,w.action),w=w.next;while(w!==f);fn(g,s.memoizedState)||(Mt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function Tm(n,s,o){var c=We,f=kt(),g=it;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var w=!fn((ot||f).memoizedState,o);w&&(f.memoizedState=o,Mt=!0),f=f.queue;var R=Rm.bind(null,c,f,n);if($a(2048,8,R,[n]),f.getSnapshot!==s||w||Rt!==null&&Rt.memoizedState.tag&1){if(c.flags|=2048,xs(9,Gl(),Am.bind(null,c,f,o,s),null),mt===null)throw Error(i(349));g||(Yi&124)!==0||Cm(c,s,o)}return o}function Cm(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=We.updateQueue,s===null?(s=Nh(),We.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Am(n,s,o,c){s.value=o,s.getSnapshot=c,km(s)&&Dm(n)}function Rm(n,s,o){return o(function(){km(s)&&Dm(n)})}function km(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!fn(n,o)}catch{return!0}}function Dm(n){var s=Ss(n,2);s!==null&&yn(s,n,2)}function Lh(n){var s=an();if(typeof n=="function"){var o=n;if(n=o(),Ur){Te(!0);try{o()}finally{Te(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:n},s}function Nm(n,s,o,c){return n.baseState=o,xh(n,ot,typeof c=="function"?c:pi)}function O1(n,s,o,c,f){if(Fl(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};P.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,Im(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Im(n,s){var o=s.action,c=s.payload,f=n.state;if(s.isTransition){var g=P.T,w={};P.T=w;try{var R=o(f,c),j=P.S;j!==null&&j(w,R),xm(n,s,R)}catch(te){Mh(n,s,te)}finally{P.T=g}}else try{g=o(f,c),xm(n,s,g)}catch(te){Mh(n,s,te)}}function xm(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Om(n,s,c)},function(c){return Mh(n,s,c)}):Om(n,s,o)}function Om(n,s,o){s.status="fulfilled",s.value=o,Lm(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Im(n,o)))}function Mh(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,Lm(s),s=s.next;while(s!==c)}n.action=null}function Lm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Mm(n,s){return s}function Um(n,s){if(it){var o=mt.formState;if(o!==null){e:{var c=We;if(it){if(wt){t:{for(var f=wt,g=Qn;f.nodeType!==8;){if(!g){f=null;break t}if(f=Bn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){wt=Bn(f.nextSibling),c=f.data==="F!";break e}}xr(c)}c=!1}c&&(s=o[0])}}return o=an(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mm,lastRenderedState:s},o.queue=c,o=tv.bind(null,We,c),c.dispatch=o,c=Lh(!1),g=Bh.bind(null,We,!1,c.queue),c=an(),f={state:s,dispatch:null,action:n,pending:null},c.queue=f,o=O1.bind(null,We,f,g,o),f.dispatch=o,c.memoizedState=n,[s,o,!1]}function zm(n){var s=kt();return Pm(s,ot,n)}function Pm(n,s,o){if(s=xh(n,s,Mm)[0],n=Pl(pi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Wa(s)}catch(w){throw w===Ba?xl:w}else c=s;s=kt();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(We.flags|=2048,xs(9,Gl(),L1.bind(null,f,o),null)),[c,g,n]}function L1(n,s){n.action=s}function Gm(n){var s=kt(),o=ot;if(o!==null)return Pm(s,o,n);kt(),s=s.memoizedState,o=kt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function xs(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=We.updateQueue,s===null&&(s=Nh(),We.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function Gl(){return{destroy:void 0,resource:void 0}}function Bm(){return kt().memoizedState}function Bl(n,s,o,c){var f=an();c=c===void 0?null:c,We.flags|=n,f.memoizedState=xs(1|s,Gl(),o,c)}function $a(n,s,o,c){var f=kt();c=c===void 0?null:c;var g=f.memoizedState.inst;ot!==null&&c!==null&&Ch(c,ot.memoizedState.deps)?f.memoizedState=xs(s,g,o,c):(We.flags|=n,f.memoizedState=xs(1|s,g,o,c))}function Fm(n,s){Bl(8390656,8,n,s)}function Hm(n,s){$a(2048,8,n,s)}function jm(n,s){return $a(4,2,n,s)}function qm(n,s){return $a(4,4,n,s)}function Vm(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Wm(n,s,o){o=o!=null?o.concat([n]):null,$a(4,4,Vm.bind(null,s,n),o)}function Uh(){}function $m(n,s){var o=kt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Ch(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function Ym(n,s){var o=kt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Ch(s,c[1]))return c[0];if(c=n(),Ur){Te(!0);try{n()}finally{Te(!1)}}return o.memoizedState=[c,s],c}function zh(n,s,o){return o===void 0||(Yi&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=Xv(),We.lanes|=n,tr|=n,o)}function Km(n,s,o,c){return fn(o,s)?o:Ds.current!==null?(n=zh(n,o,c),fn(n,s)||(Mt=!0),n):(Yi&42)===0?(Mt=!0,n.memoizedState=o):(n=Xv(),We.lanes|=n,tr|=n,s)}function Zm(n,s,o,c,f){var g=I.p;I.p=g!==0&&8>g?g:8;var w=P.T,R={};P.T=R,Bh(n,!1,s,o);try{var j=f(),te=P.S;if(te!==null&&te(R,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var fe=N1(j,c);Ya(n,s,fe,_n(n))}else Ya(n,s,c,_n(n))}catch(me){Ya(n,s,{then:function(){},status:"rejected",reason:me},_n())}finally{I.p=g,P.T=w}}function M1(){}function Ph(n,s,o,c){if(n.tag!==5)throw Error(i(476));var f=Xm(n).queue;Zm(n,f,s,he,o===null?M1:function(){return Qm(n),o(c)})}function Xm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:he},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Qm(n){var s=Xm(n).next.queue;Ya(n,s,{},_n())}function Gh(){return Kt(fo)}function Jm(){return kt().memoizedState}function ev(){return kt().memoizedState}function U1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=_n();n=Wi(o);var c=$i(s,n,o);c!==null&&(yn(c,s,o),Ha(c,s,o)),s={cache:gh()},n.payload=s;return}s=s.return}}function z1(n,s,o){var c=_n();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Fl(n)?nv(s,o):(o=sh(n,s,o,c),o!==null&&(yn(o,n,c),iv(o,s,c)))}function tv(n,s,o){var c=_n();Ya(n,s,o,c)}function Ya(n,s,o,c){var f={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fl(n))nv(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,R=g(w,o);if(f.hasEagerState=!0,f.eagerState=R,fn(R,w))return Tl(n,s,f,0),mt===null&&Sl(),!1}catch{}finally{}if(o=sh(n,s,f,c),o!==null)return yn(o,n,c),iv(o,s,c),!0}return!1}function Bh(n,s,o,c){if(c={lane:2,revertLane:_d(),action:c,hasEagerState:!1,eagerState:null,next:null},Fl(n)){if(s)throw Error(i(479))}else s=sh(n,o,c,2),s!==null&&yn(s,n,2)}function Fl(n){var s=n.alternate;return n===We||s!==null&&s===We}function nv(n,s){Ns=Ml=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function iv(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,hg(n,o)}}var Hl={readContext:Kt,use:zl,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},rv={readContext:Kt,use:zl,useCallback:function(n,s){return an().memoizedState=[n,s===void 0?null:s],n},useContext:Kt,useEffect:Fm,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Bl(4194308,4,Vm.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Bl(4194308,4,n,s)},useInsertionEffect:function(n,s){Bl(4,2,n,s)},useMemo:function(n,s){var o=an();s=s===void 0?null:s;var c=n();if(Ur){Te(!0);try{n()}finally{Te(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=an();if(o!==void 0){var f=o(s);if(Ur){Te(!0);try{o(s)}finally{Te(!1)}}}else f=s;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=z1.bind(null,We,n),[c.memoizedState,n]},useRef:function(n){var s=an();return n={current:n},s.memoizedState=n},useState:function(n){n=Lh(n);var s=n.queue,o=tv.bind(null,We,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Uh,useDeferredValue:function(n,s){var o=an();return zh(o,n,s)},useTransition:function(){var n=Lh(!1);return n=Zm.bind(null,We,n.queue,!0,!1),an().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=We,f=an();if(it){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),mt===null)throw Error(i(349));(et&124)!==0||Cm(c,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,Fm(Rm.bind(null,c,g,n),[n]),c.flags|=2048,xs(9,Gl(),Am.bind(null,c,g,o,s),null),o},useId:function(){var n=an(),s=mt.identifierPrefix;if(it){var o=hi,c=ci;o=(c&~(1<<32-Re(c)-1)).toString(32)+o,s="«"+s+"R"+o,o=Ul++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=I1++,s="«"+s+"r"+o.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:Gh,useFormState:Um,useActionState:Um,useOptimistic:function(n){var s=an();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Bh.bind(null,We,!0,o),o.dispatch=s,[n,s]},useMemoCache:Ih,useCacheRefresh:function(){return an().memoizedState=U1.bind(null,We)}},sv={readContext:Kt,use:zl,useCallback:$m,useContext:Kt,useEffect:Hm,useImperativeHandle:Wm,useInsertionEffect:jm,useLayoutEffect:qm,useMemo:Ym,useReducer:Pl,useRef:Bm,useState:function(){return Pl(pi)},useDebugValue:Uh,useDeferredValue:function(n,s){var o=kt();return Km(o,ot.memoizedState,n,s)},useTransition:function(){var n=Pl(pi)[0],s=kt().memoizedState;return[typeof n=="boolean"?n:Wa(n),s]},useSyncExternalStore:Tm,useId:Jm,useHostTransitionStatus:Gh,useFormState:zm,useActionState:zm,useOptimistic:function(n,s){var o=kt();return Nm(o,ot,n,s)},useMemoCache:Ih,useCacheRefresh:ev},P1={readContext:Kt,use:zl,useCallback:$m,useContext:Kt,useEffect:Hm,useImperativeHandle:Wm,useInsertionEffect:jm,useLayoutEffect:qm,useMemo:Ym,useReducer:Oh,useRef:Bm,useState:function(){return Oh(pi)},useDebugValue:Uh,useDeferredValue:function(n,s){var o=kt();return ot===null?zh(o,n,s):Km(o,ot.memoizedState,n,s)},useTransition:function(){var n=Oh(pi)[0],s=kt().memoizedState;return[typeof n=="boolean"?n:Wa(n),s]},useSyncExternalStore:Tm,useId:Jm,useHostTransitionStatus:Gh,useFormState:Gm,useActionState:Gm,useOptimistic:function(n,s){var o=kt();return ot!==null?Nm(o,ot,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Ih,useCacheRefresh:ev},Os=null,Ka=0;function jl(n){var s=Ka;return Ka+=1,Os===null&&(Os=[]),mm(Os,n,s)}function Za(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function ql(n,s){throw s.$$typeof===v?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function av(n){var s=n._init;return s(n._payload)}function ov(n){function s(X,$){if(n){var ee=X.deletions;ee===null?(X.deletions=[$],X.flags|=16):ee.push($)}}function o(X,$){if(!n)return null;for(;$!==null;)s(X,$),$=$.sibling;return null}function c(X){for(var $=new Map;X!==null;)X.key!==null?$.set(X.key,X):$.set(X.index,X),X=X.sibling;return $}function f(X,$){return X=ui(X,$),X.index=0,X.sibling=null,X}function g(X,$,ee){return X.index=ee,n?(ee=X.alternate,ee!==null?(ee=ee.index,ee<$?(X.flags|=67108866,$):ee):(X.flags|=67108866,$)):(X.flags|=1048576,$)}function w(X){return n&&X.alternate===null&&(X.flags|=67108866),X}function R(X,$,ee,pe){return $===null||$.tag!==6?($=oh(ee,X.mode,pe),$.return=X,$):($=f($,ee),$.return=X,$)}function j(X,$,ee,pe){var ke=ee.type;return ke===S?fe(X,$,ee.props.children,pe,ee.key):$!==null&&($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===J&&av(ke)===$.type)?($=f($,ee.props),Za($,ee),$.return=X,$):($=Al(ee.type,ee.key,ee.props,null,X.mode,pe),Za($,ee),$.return=X,$)}function te(X,$,ee,pe){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?($=lh(ee,X.mode,pe),$.return=X,$):($=f($,ee.children||[]),$.return=X,$)}function fe(X,$,ee,pe,ke){return $===null||$.tag!==7?($=kr(ee,X.mode,pe,ke),$.return=X,$):($=f($,ee),$.return=X,$)}function me(X,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=oh(""+$,X.mode,ee),$.return=X,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case _:return ee=Al($.type,$.key,$.props,null,X.mode,ee),Za(ee,$),ee.return=X,ee;case y:return $=lh($,X.mode,ee),$.return=X,$;case J:var pe=$._init;return $=pe($._payload),me(X,$,ee)}if(ae($)||L($))return $=kr($,X.mode,ee,null),$.return=X,$;if(typeof $.then=="function")return me(X,jl($),ee);if($.$$typeof===O)return me(X,Nl(X,$),ee);ql(X,$)}return null}function ne(X,$,ee,pe){var ke=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ke!==null?null:R(X,$,""+ee,pe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:return ee.key===ke?j(X,$,ee,pe):null;case y:return ee.key===ke?te(X,$,ee,pe):null;case J:return ke=ee._init,ee=ke(ee._payload),ne(X,$,ee,pe)}if(ae(ee)||L(ee))return ke!==null?null:fe(X,$,ee,pe,null);if(typeof ee.then=="function")return ne(X,$,jl(ee),pe);if(ee.$$typeof===O)return ne(X,$,Nl(X,ee),pe);ql(X,ee)}return null}function se(X,$,ee,pe,ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return X=X.get(ee)||null,R($,X,""+pe,ke);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case _:return X=X.get(pe.key===null?ee:pe.key)||null,j($,X,pe,ke);case y:return X=X.get(pe.key===null?ee:pe.key)||null,te($,X,pe,ke);case J:var $e=pe._init;return pe=$e(pe._payload),se(X,$,ee,pe,ke)}if(ae(pe)||L(pe))return X=X.get(ee)||null,fe($,X,pe,ke,null);if(typeof pe.then=="function")return se(X,$,ee,jl(pe),ke);if(pe.$$typeof===O)return se(X,$,ee,Nl($,pe),ke);ql($,pe)}return null}function Ge(X,$,ee,pe){for(var ke=null,$e=null,xe=$,Me=$=0,zt=null;xe!==null&&Me<ee.length;Me++){xe.index>Me?(zt=xe,xe=null):zt=xe.sibling;var tt=ne(X,xe,ee[Me],pe);if(tt===null){xe===null&&(xe=zt);break}n&&xe&&tt.alternate===null&&s(X,xe),$=g(tt,$,Me),$e===null?ke=tt:$e.sibling=tt,$e=tt,xe=zt}if(Me===ee.length)return o(X,xe),it&&Nr(X,Me),ke;if(xe===null){for(;Me<ee.length;Me++)xe=me(X,ee[Me],pe),xe!==null&&($=g(xe,$,Me),$e===null?ke=xe:$e.sibling=xe,$e=xe);return it&&Nr(X,Me),ke}for(xe=c(xe);Me<ee.length;Me++)zt=se(xe,X,Me,ee[Me],pe),zt!==null&&(n&&zt.alternate!==null&&xe.delete(zt.key===null?Me:zt.key),$=g(zt,$,Me),$e===null?ke=zt:$e.sibling=zt,$e=zt);return n&&xe.forEach(function(cr){return s(X,cr)}),it&&Nr(X,Me),ke}function Oe(X,$,ee,pe){if(ee==null)throw Error(i(151));for(var ke=null,$e=null,xe=$,Me=$=0,zt=null,tt=ee.next();xe!==null&&!tt.done;Me++,tt=ee.next()){xe.index>Me?(zt=xe,xe=null):zt=xe.sibling;var cr=ne(X,xe,tt.value,pe);if(cr===null){xe===null&&(xe=zt);break}n&&xe&&cr.alternate===null&&s(X,xe),$=g(cr,$,Me),$e===null?ke=cr:$e.sibling=cr,$e=cr,xe=zt}if(tt.done)return o(X,xe),it&&Nr(X,Me),ke;if(xe===null){for(;!tt.done;Me++,tt=ee.next())tt=me(X,tt.value,pe),tt!==null&&($=g(tt,$,Me),$e===null?ke=tt:$e.sibling=tt,$e=tt);return it&&Nr(X,Me),ke}for(xe=c(xe);!tt.done;Me++,tt=ee.next())tt=se(xe,X,Me,tt.value,pe),tt!==null&&(n&&tt.alternate!==null&&xe.delete(tt.key===null?Me:tt.key),$=g(tt,$,Me),$e===null?ke=tt:$e.sibling=tt,$e=tt);return n&&xe.forEach(function(GT){return s(X,GT)}),it&&Nr(X,Me),ke}function ut(X,$,ee,pe){if(typeof ee=="object"&&ee!==null&&ee.type===S&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case _:e:{for(var ke=ee.key;$!==null;){if($.key===ke){if(ke=ee.type,ke===S){if($.tag===7){o(X,$.sibling),pe=f($,ee.props.children),pe.return=X,X=pe;break e}}else if($.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===J&&av(ke)===$.type){o(X,$.sibling),pe=f($,ee.props),Za(pe,ee),pe.return=X,X=pe;break e}o(X,$);break}else s(X,$);$=$.sibling}ee.type===S?(pe=kr(ee.props.children,X.mode,pe,ee.key),pe.return=X,X=pe):(pe=Al(ee.type,ee.key,ee.props,null,X.mode,pe),Za(pe,ee),pe.return=X,X=pe)}return w(X);case y:e:{for(ke=ee.key;$!==null;){if($.key===ke)if($.tag===4&&$.stateNode.containerInfo===ee.containerInfo&&$.stateNode.implementation===ee.implementation){o(X,$.sibling),pe=f($,ee.children||[]),pe.return=X,X=pe;break e}else{o(X,$);break}else s(X,$);$=$.sibling}pe=lh(ee,X.mode,pe),pe.return=X,X=pe}return w(X);case J:return ke=ee._init,ee=ke(ee._payload),ut(X,$,ee,pe)}if(ae(ee))return Ge(X,$,ee,pe);if(L(ee)){if(ke=L(ee),typeof ke!="function")throw Error(i(150));return ee=ke.call(ee),Oe(X,$,ee,pe)}if(typeof ee.then=="function")return ut(X,$,jl(ee),pe);if(ee.$$typeof===O)return ut(X,$,Nl(X,ee),pe);ql(X,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,$!==null&&$.tag===6?(o(X,$.sibling),pe=f($,ee),pe.return=X,X=pe):(o(X,$),pe=oh(ee,X.mode,pe),pe.return=X,X=pe),w(X)):o(X,$)}return function(X,$,ee,pe){try{Ka=0;var ke=ut(X,$,ee,pe);return Os=null,ke}catch(xe){if(xe===Ba||xe===xl)throw xe;var $e=pn(29,xe,null,X.mode);return $e.lanes=pe,$e.return=X,$e}finally{}}}var Ls=ov(!0),lv=ov(!1),kn=G(null),Jn=null;function Ki(n){var s=n.alternate;Z(Nt,Nt.current&1),Z(kn,n),Jn===null&&(s===null||Ds.current!==null||s.memoizedState!==null)&&(Jn=n)}function uv(n){if(n.tag===22){if(Z(Nt,Nt.current),Z(kn,n),Jn===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Jn=n)}}else Zi()}function Zi(){Z(Nt,Nt.current),Z(kn,kn.current)}function gi(n){q(kn),Jn===n&&(Jn=null),q(Nt)}var Nt=G(0);function Vl(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Nd(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Fh(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:m({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Hh={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=_n(),f=Wi(c);f.payload=s,o!=null&&(f.callback=o),s=$i(n,f,c),s!==null&&(yn(s,n,c),Ha(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=_n(),f=Wi(c);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=$i(n,f,c),s!==null&&(yn(s,n,c),Ha(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=_n(),c=Wi(o);c.tag=2,s!=null&&(c.callback=s),s=$i(n,c,o),s!==null&&(yn(s,n,o),Ha(s,n,o))}};function cv(n,s,o,c,f,g,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!xa(o,c)||!xa(f,g):!0}function hv(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Hh.enqueueReplaceState(s,s.state,null)}function zr(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=m({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var Wl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function dv(n){Wl(n)}function fv(n){console.error(n)}function pv(n){Wl(n)}function $l(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function gv(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jh(n,s,o){return o=Wi(o),o.tag=3,o.payload={element:null},o.callback=function(){$l(n,s)},o}function mv(n){return n=Wi(n),n.tag=3,n}function vv(n,s,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){gv(s,o,c)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){gv(s,o,c),typeof f!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function G1(n,s,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&za(s,o,f,!0),o=kn.current,o!==null){switch(o.tag){case 13:return Jn===null?fd():o.alternate===null&&St===0&&(St=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===_h?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),gd(n,c,f)),!1;case 22:return o.flags|=65536,c===_h?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),gd(n,c,f)),!1}throw Error(i(435,o.tag))}return gd(n,c,f),fd(),!1}if(it)return s=kn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==hh&&(n=Error(i(422),{cause:c}),Ua(Tn(n,o)))):(c!==hh&&(s=Error(i(423),{cause:c}),Ua(Tn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Tn(c,o),f=jh(n.stateNode,c,f),Eh(n,f),St!==4&&(St=2)),!1;var g=Error(i(520),{cause:c});if(g=Tn(g,o),io===null?io=[g]:io.push(g),St!==4&&(St=2),s===null)return!0;c=Tn(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=jh(o.stateNode,c,n),Eh(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(nr===null||!nr.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=mv(f),vv(f,n,o,c),Eh(o,f),!1}o=o.return}while(o!==null);return!1}var _v=Error(i(461)),Mt=!1;function jt(n,s,o,c){s.child=n===null?lv(s,null,o,c):Ls(s,n.child,o,c)}function yv(n,s,o,c,f){o=o.render;var g=s.ref;if("ref"in c){var w={};for(var R in c)R!=="ref"&&(w[R]=c[R])}else w=c;return Lr(s),c=Ah(n,s,o,w,g,f),R=Rh(),n!==null&&!Mt?(kh(n,s,f),mi(n,s,f)):(it&&R&&uh(s),s.flags|=1,jt(n,s,c,f),s.child)}function bv(n,s,o,c,f){if(n===null){var g=o.type;return typeof g=="function"&&!ah(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Ev(n,s,g,c,f)):(n=Al(o.type,null,c,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!Xh(n,f)){var w=g.memoizedProps;if(o=o.compare,o=o!==null?o:xa,o(w,c)&&n.ref===s.ref)return mi(n,s,f)}return s.flags|=1,n=ui(g,c),n.ref=s.ref,n.return=s,s.child=n}function Ev(n,s,o,c,f){if(n!==null){var g=n.memoizedProps;if(xa(g,c)&&n.ref===s.ref)if(Mt=!1,s.pendingProps=c=g,Xh(n,f))(n.flags&131072)!==0&&(Mt=!0);else return s.lanes=n.lanes,mi(n,s,f)}return qh(n,s,o,c,f)}function wv(n,s,o){var c=s.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,n!==null){for(f=s.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return Sv(n,s,c,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Il(s,g!==null?g.cachePool:null),g!==null?Em(s,g):Sh(),uv(s);else return s.lanes=s.childLanes=536870912,Sv(n,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(Il(s,g.cachePool),Em(s,g),Zi(),s.memoizedState=null):(n!==null&&Il(s,null),Sh(),Zi());return jt(n,s,f,o),s.child}function Sv(n,s,o,c){var f=vh();return f=f===null?null:{parent:Dt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&Il(s,null),Sh(),uv(s),n!==null&&za(n,s,c,!0),null}function Yl(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function qh(n,s,o,c,f){return Lr(s),o=Ah(n,s,o,c,void 0,f),c=Rh(),n!==null&&!Mt?(kh(n,s,f),mi(n,s,f)):(it&&c&&uh(s),s.flags|=1,jt(n,s,o,f),s.child)}function Tv(n,s,o,c,f,g){return Lr(s),s.updateQueue=null,o=Sm(s,c,o,f),wm(n),c=Rh(),n!==null&&!Mt?(kh(n,s,g),mi(n,s,g)):(it&&c&&uh(s),s.flags|=1,jt(n,s,o,g),s.child)}function Cv(n,s,o,c,f){if(Lr(s),s.stateNode===null){var g=Ts,w=o.contextType;typeof w=="object"&&w!==null&&(g=Kt(w)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Hh,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},yh(s),w=o.contextType,g.context=typeof w=="object"&&w!==null?Kt(w):Ts,g.state=s.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(Fh(s,o,w,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Hh.enqueueReplaceState(g,g.state,null),qa(s,c,g,f),ja(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){g=s.stateNode;var R=s.memoizedProps,j=zr(o,R);g.props=j;var te=g.context,fe=o.contextType;w=Ts,typeof fe=="object"&&fe!==null&&(w=Kt(fe));var me=o.getDerivedStateFromProps;fe=typeof me=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,fe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||te!==w)&&hv(s,g,c,w),Vi=!1;var ne=s.memoizedState;g.state=ne,qa(s,c,g,f),ja(),te=s.memoizedState,R||ne!==te||Vi?(typeof me=="function"&&(Fh(s,o,me,c),te=s.memoizedState),(j=Vi||cv(s,o,j,c,ne,te,w))?(fe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=te),g.props=c,g.state=te,g.context=w,c=j):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,bh(n,s),w=s.memoizedProps,fe=zr(o,w),g.props=fe,me=s.pendingProps,ne=g.context,te=o.contextType,j=Ts,typeof te=="object"&&te!==null&&(j=Kt(te)),R=o.getDerivedStateFromProps,(te=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==me||ne!==j)&&hv(s,g,c,j),Vi=!1,ne=s.memoizedState,g.state=ne,qa(s,c,g,f),ja();var se=s.memoizedState;w!==me||ne!==se||Vi||n!==null&&n.dependencies!==null&&Dl(n.dependencies)?(typeof R=="function"&&(Fh(s,o,R,c),se=s.memoizedState),(fe=Vi||cv(s,o,fe,c,ne,se,j)||n!==null&&n.dependencies!==null&&Dl(n.dependencies))?(te||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,se,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,se,j)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=se),g.props=c,g.state=se,g.context=j,c=fe):(typeof g.componentDidUpdate!="function"||w===n.memoizedProps&&ne===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&ne===n.memoizedState||(s.flags|=1024),c=!1)}return g=c,Yl(n,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&c?(s.child=Ls(s,n.child,null,f),s.child=Ls(s,null,o,f)):jt(n,s,o,f),s.memoizedState=g.state,n=s.child):n=mi(n,s,f),n}function Av(n,s,o,c){return Ma(),s.flags|=256,jt(n,s,o,c),s.child}var Vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wh(n){return{baseLanes:n,cachePool:fm()}}function $h(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Dn),n}function Rv(n,s,o){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=n!==null&&n.memoizedState===null?!1:(Nt.current&2)!==0),w&&(f=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,n===null){if(it){if(f?Ki(s):Zi(),it){var R=wt,j;if(j=R){e:{for(j=R,R=Qn;j.nodeType!==8;){if(!R){R=null;break e}if(j=Bn(j.nextSibling),j===null){R=null;break e}}R=j}R!==null?(s.memoizedState={dehydrated:R,treeContext:Dr!==null?{id:ci,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},j=pn(18,null,null,0),j.stateNode=R,j.return=s,s.child=j,en=s,wt=null,j=!0):j=!1}j||xr(s)}if(R=s.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return Nd(R)?s.lanes=32:s.lanes=536870912,null;gi(s)}return R=c.children,c=c.fallback,f?(Zi(),f=s.mode,R=Kl({mode:"hidden",children:R},f),c=kr(c,f,o,null),R.return=s,c.return=s,R.sibling=c,s.child=R,f=s.child,f.memoizedState=Wh(o),f.childLanes=$h(n,w,o),s.memoizedState=Vh,c):(Ki(s),Yh(s,R))}if(j=n.memoizedState,j!==null&&(R=j.dehydrated,R!==null)){if(g)s.flags&256?(Ki(s),s.flags&=-257,s=Kh(n,s,o)):s.memoizedState!==null?(Zi(),s.child=n.child,s.flags|=128,s=null):(Zi(),f=c.fallback,R=s.mode,c=Kl({mode:"visible",children:c.children},R),f=kr(f,R,o,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,Ls(s,n.child,null,o),c=s.child,c.memoizedState=Wh(o),c.childLanes=$h(n,w,o),s.memoizedState=Vh,s=f);else if(Ki(s),Nd(R)){if(w=R.nextSibling&&R.nextSibling.dataset,w)var te=w.dgst;w=te,c=Error(i(419)),c.stack="",c.digest=w,Ua({value:c,source:null,stack:null}),s=Kh(n,s,o)}else if(Mt||za(n,s,o,!1),w=(o&n.childLanes)!==0,Mt||w){if(w=mt,w!==null&&(c=o&-o,c=(c&42)!==0?1:Ic(c),c=(c&(w.suspendedLanes|o))!==0?0:c,c!==0&&c!==j.retryLane))throw j.retryLane=c,Ss(n,c),yn(w,n,c),_v;R.data==="$?"||fd(),s=Kh(n,s,o)}else R.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=j.treeContext,wt=Bn(R.nextSibling),en=s,it=!0,Ir=null,Qn=!1,n!==null&&(An[Rn++]=ci,An[Rn++]=hi,An[Rn++]=Dr,ci=n.id,hi=n.overflow,Dr=s),s=Yh(s,c.children),s.flags|=4096);return s}return f?(Zi(),f=c.fallback,R=s.mode,j=n.child,te=j.sibling,c=ui(j,{mode:"hidden",children:c.children}),c.subtreeFlags=j.subtreeFlags&65011712,te!==null?f=ui(te,f):(f=kr(f,R,o,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,R=n.child.memoizedState,R===null?R=Wh(o):(j=R.cachePool,j!==null?(te=Dt._currentValue,j=j.parent!==te?{parent:te,pool:te}:j):j=fm(),R={baseLanes:R.baseLanes|o,cachePool:j}),f.memoizedState=R,f.childLanes=$h(n,w,o),s.memoizedState=Vh,c):(Ki(s),o=n.child,n=o.sibling,o=ui(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(w=s.deletions,w===null?(s.deletions=[n],s.flags|=16):w.push(n)),s.child=o,s.memoizedState=null,o)}function Yh(n,s){return s=Kl({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Kl(n,s){return n=pn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Kh(n,s,o){return Ls(s,n.child,null,o),n=Yh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function kv(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),fh(n.return,s,o)}function Zh(n,s,o,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=f)}function Dv(n,s,o){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(jt(n,s,c.children,o),c=Nt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&kv(n,o,s);else if(n.tag===19)kv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(Z(Nt,c),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&Vl(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Zh(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Vl(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Zh(s,!0,o,null,g);break;case"together":Zh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function mi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),tr|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(za(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=ui(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=ui(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Xh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Dl(n)))}function B1(n,s,o){switch(s.tag){case 3:De(s,s.stateNode.containerInfo),qi(s,Dt,n.memoizedState.cache),Ma();break;case 27:case 5:Pe(s);break;case 4:De(s,s.stateNode.containerInfo);break;case 10:qi(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ki(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Rv(n,s,o):(Ki(s),n=mi(n,s,o),n!==null?n.sibling:null);Ki(s);break;case 19:var f=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(za(n,s,o,!1),c=(o&s.childLanes)!==0),f){if(c)return Dv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Z(Nt,Nt.current),c)break;return null;case 22:case 23:return s.lanes=0,wv(n,s,o);case 24:qi(s,Dt,n.memoizedState.cache)}return mi(n,s,o)}function Nv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Mt=!0;else{if(!Xh(n,o)&&(s.flags&128)===0)return Mt=!1,B1(n,s,o);Mt=(n.flags&131072)!==0}else Mt=!1,it&&(s.flags&1048576)!==0&&am(s,kl,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")ah(c)?(n=zr(c,n),s.tag=1,s=Cv(null,s,c,n,o)):(s.tag=0,s=qh(null,s,c,n,o));else{if(c!=null){if(f=c.$$typeof,f===N){s.tag=11,s=yv(null,s,c,n,o);break e}else if(f===V){s.tag=14,s=bv(null,s,c,n,o);break e}}throw s=T(c)||c,Error(i(306,s,""))}}return s;case 0:return qh(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,f=zr(c,s.pendingProps),Cv(n,s,c,f,o);case 3:e:{if(De(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;f=g.element,bh(n,s),qa(s,c,null,o);var w=s.memoizedState;if(c=w.cache,qi(s,Dt,c),c!==g.cache&&ph(s,[Dt],o,!0),ja(),c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Av(n,s,c,o);break e}else if(c!==f){f=Tn(Error(i(424)),s),Ua(f),s=Av(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(wt=Bn(n.firstChild),en=s,it=!0,Ir=null,Qn=!0,o=lv(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ma(),c===f){s=mi(n,s,o);break e}jt(n,s,c,o)}s=s.child}return s;case 26:return Yl(n,s),n===null?(o=L_(s.type,null,s.pendingProps,null))?s.memoizedState=o:it||(o=s.type,n=s.pendingProps,c=uu(Ae.current).createElement(o),c[Yt]=s,c[rn]=n,Vt(c,o,n),Lt(c),s.stateNode=c):s.memoizedState=L_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Pe(s),n===null&&it&&(c=s.stateNode=I_(s.type,s.pendingProps,Ae.current),en=s,Qn=!0,f=wt,sr(s.type)?(Id=f,wt=Bn(c.firstChild)):wt=f),jt(n,s,s.pendingProps.children,o),Yl(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&it&&((f=c=wt)&&(c=pT(c,s.type,s.pendingProps,Qn),c!==null?(s.stateNode=c,en=s,wt=Bn(c.firstChild),Qn=!1,f=!0):f=!1),f||xr(s)),Pe(s),f=s.type,g=s.pendingProps,w=n!==null?n.memoizedProps:null,c=g.children,Rd(f,g)?c=null:w!==null&&Rd(f,w)&&(s.flags|=32),s.memoizedState!==null&&(f=Ah(n,s,x1,null,null,o),fo._currentValue=f),Yl(n,s),jt(n,s,c,o),s.child;case 6:return n===null&&it&&((n=o=wt)&&(o=gT(o,s.pendingProps,Qn),o!==null?(s.stateNode=o,en=s,wt=null,n=!0):n=!1),n||xr(s)),null;case 13:return Rv(n,s,o);case 4:return De(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ls(s,null,c,o):jt(n,s,c,o),s.child;case 11:return yv(n,s,s.type,s.pendingProps,o);case 7:return jt(n,s,s.pendingProps,o),s.child;case 8:return jt(n,s,s.pendingProps.children,o),s.child;case 12:return jt(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,qi(s,s.type,c.value),jt(n,s,c.children,o),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,Lr(s),f=Kt(f),c=c(f),s.flags|=1,jt(n,s,c,o),s.child;case 14:return bv(n,s,s.type,s.pendingProps,o);case 15:return Ev(n,s,s.type,s.pendingProps,o);case 19:return Dv(n,s,o);case 31:return c=s.pendingProps,o=s.mode,c={mode:c.mode,children:c.children},n===null?(o=Kl(c,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ui(n.child,c),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return wv(n,s,o);case 24:return Lr(s),c=Kt(Dt),n===null?(f=vh(),f===null&&(f=mt,g=gh(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:c,cache:f},yh(s),qi(s,Dt,f)):((n.lanes&o)!==0&&(bh(n,s),qa(s,null,null,o),ja()),f=n.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),qi(s,Dt,c)):(c=g.cache,qi(s,Dt,c),c!==f.cache&&ph(s,[Dt],o,!0))),jt(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function vi(n){n.flags|=4}function Iv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!G_(s)){if(s=kn.current,s!==null&&((et&4194048)===et?Jn!==null:(et&62914560)!==et&&(et&536870912)===0||s!==Jn))throw Fa=_h,pm;n.flags|=8192}}function Zl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?os():536870912,n.lanes|=s,Ps|=s)}function Xa(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Et(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function F1(n,s,o){var c=s.pendingProps;switch(ch(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(s),null;case 1:return Et(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),fi(Dt),Fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(La(s)?vi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,um())),Et(s),null;case 26:return o=s.memoizedState,n===null?(vi(s),o!==null?(Et(s),Iv(s,o)):(Et(s),s.flags&=-16777217)):o?o!==n.memoizedState?(vi(s),Et(s),Iv(s,o)):(Et(s),s.flags&=-16777217):(n.memoizedProps!==c&&vi(s),Et(s),s.flags&=-16777217),null;case 27:Ie(s),o=Ae.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&vi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Et(s),null}n=ce.current,La(s)?om(s):(n=I_(f,c,o),s.stateNode=n,vi(s))}return Et(s),null;case 5:if(Ie(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&vi(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Et(s),null}if(n=ce.current,La(s))om(s);else{switch(f=uu(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(o,{is:c.is}):f.createElement(o)}}n[Yt]=s,n[rn]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(Vt(n,o,c),o){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&vi(s)}}return Et(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&vi(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ae.current,La(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,f=en,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Yt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||T_(n.nodeValue,o)),n||xr(s)}else n=uu(n).createTextNode(c),n[Yt]=s,s.stateNode=n}return Et(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=La(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Yt]=s}else Ma(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Et(s),f=!1}else f=um(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(gi(s),s):(gi(s),null)}if(gi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=c!==null,n=n!==null&&n.memoizedState!==null,o){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Zl(s,s.updateQueue),Et(s),null;case 4:return Fe(),n===null&&wd(s.stateNode.containerInfo),Et(s),null;case 10:return fi(s.type),Et(s),null;case 19:if(q(Nt),f=s.memoizedState,f===null)return Et(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)Xa(f,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=Vl(n),g!==null){for(s.flags|=128,Xa(f,!1),n=g.updateQueue,s.updateQueue=n,Zl(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)sm(o,n),o=o.sibling;return Z(Nt,Nt.current&1|2),s.child}n=n.sibling}f.tail!==null&&z()>Jl&&(s.flags|=128,c=!0,Xa(f,!1),s.lanes=4194304)}else{if(!c)if(n=Vl(g),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,Zl(s,n),Xa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!it)return Et(s),null}else 2*z()-f.renderingStartTime>Jl&&o!==536870912&&(s.flags|=128,c=!0,Xa(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(n=f.last,n!==null?n.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=z(),s.sibling=null,n=Nt.current,Z(Nt,c?n&1|2:n&1),s):(Et(s),null);case 22:case 23:return gi(s),Th(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Et(s),s.subtreeFlags&6&&(s.flags|=8192)):Et(s),o=s.updateQueue,o!==null&&Zl(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&q(Mr),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),fi(Dt),Et(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function H1(n,s){switch(ch(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return fi(Dt),Fe(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ie(s),null;case 13:if(gi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ma()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return q(Nt),null;case 4:return Fe(),null;case 10:return fi(s.type),null;case 22:case 23:return gi(s),Th(),n!==null&&q(Mr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return fi(Dt),null;case 25:return null;default:return null}}function xv(n,s){switch(ch(s),s.tag){case 3:fi(Dt),Fe();break;case 26:case 27:case 5:Ie(s);break;case 4:Fe();break;case 13:gi(s);break;case 19:q(Nt);break;case 10:fi(s.type);break;case 22:case 23:gi(s),Th(),n!==null&&q(Mr);break;case 24:fi(Dt)}}function Qa(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var g=o.create,w=o.inst;c=g(),w.destroy=c}o=o.next}while(o!==f)}}catch(R){ft(s,s.return,R)}}function Xi(n,s,o){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var w=c.inst,R=w.destroy;if(R!==void 0){w.destroy=void 0,f=s;var j=o,te=R;try{te()}catch(fe){ft(f,j,fe)}}}c=c.next}while(c!==g)}}catch(fe){ft(s,s.return,fe)}}function Ov(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{bm(s,o)}catch(c){ft(n,n.return,c)}}}function Lv(n,s,o){o.props=zr(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){ft(n,s,c)}}function Ja(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){ft(n,s,f)}}function ei(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){ft(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ft(n,s,f)}else o.current=null}function Mv(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){ft(n,n.return,f)}}function Qh(n,s,o){try{var c=n.stateNode;uT(c,n.type,o,s),c[rn]=s}catch(f){ft(n,n.return,f)}}function Uv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&sr(n.type)||n.tag===4}function Jh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Uv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&sr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ed(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=lu));else if(c!==4&&(c===27&&sr(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(ed(n,s,o),n=n.sibling;n!==null;)ed(n,s,o),n=n.sibling}function Xl(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&sr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Xl(n,s,o),n=n.sibling;n!==null;)Xl(n,s,o),n=n.sibling}function zv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Vt(s,c,o),s[Yt]=n,s[rn]=o}catch(g){ft(n,n.return,g)}}var _i=!1,At=!1,td=!1,Pv=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function j1(n,s){if(n=n.containerInfo,Cd=gu,n=Kg(n),Jc(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var w=0,R=-1,j=-1,te=0,fe=0,me=n,ne=null;t:for(;;){for(var se;me!==o||f!==0&&me.nodeType!==3||(R=w+f),me!==g||c!==0&&me.nodeType!==3||(j=w+c),me.nodeType===3&&(w+=me.nodeValue.length),(se=me.firstChild)!==null;)ne=me,me=se;for(;;){if(me===n)break t;if(ne===o&&++te===f&&(R=w),ne===g&&++fe===c&&(j=w),(se=me.nextSibling)!==null)break;me=ne,ne=me.parentNode}me=se}o=R===-1||j===-1?null:{start:R,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ad={focusedElem:n,selectionRange:o},gu=!1,Ut=s;Ut!==null;)if(s=Ut,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Ut=n;else for(;Ut!==null;){switch(s=Ut,g=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ge=zr(o.type,f,o.elementType===o.type);n=c.getSnapshotBeforeUpdate(Ge,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Oe){ft(o,o.return,Oe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Dd(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ut=n;break}Ut=s.return}}function Gv(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Qi(n,o),c&4&&Qa(5,o);break;case 1:if(Qi(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(w){ft(o,o.return,w)}else{var f=zr(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(w){ft(o,o.return,w)}}c&64&&Ov(o),c&512&&Ja(o,o.return);break;case 3:if(Qi(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{bm(n,s)}catch(w){ft(o,o.return,w)}}break;case 27:s===null&&c&4&&zv(o);case 26:case 5:Qi(n,o),s===null&&c&4&&Mv(o),c&512&&Ja(o,o.return);break;case 12:Qi(n,o);break;case 13:Qi(n,o),c&4&&Hv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Q1.bind(null,o),mT(n,o))));break;case 22:if(c=o.memoizedState!==null||_i,!c){s=s!==null&&s.memoizedState!==null||At,f=_i;var g=At;_i=c,(At=s)&&!g?Ji(n,o,(o.subtreeFlags&8772)!==0):Qi(n,o),_i=f,At=g}break;case 30:break;default:Qi(n,o)}}function Bv(n){var s=n.alternate;s!==null&&(n.alternate=null,Bv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Lc(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var bt=null,on=!1;function yi(n,s,o){for(o=o.child;o!==null;)Fv(n,s,o),o=o.sibling}function Fv(n,s,o){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(le,o)}catch{}switch(o.tag){case 26:At||ei(o,s),yi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||ei(o,s);var c=bt,f=on;sr(o.type)&&(bt=o.stateNode,on=!1),yi(n,s,o),lo(o.stateNode),bt=c,on=f;break;case 5:At||ei(o,s);case 6:if(c=bt,f=on,bt=null,yi(n,s,o),bt=c,on=f,bt!==null)if(on)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(g){ft(o,s,g)}else try{bt.removeChild(o.stateNode)}catch(g){ft(o,s,g)}break;case 18:bt!==null&&(on?(n=bt,D_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),vo(n)):D_(bt,o.stateNode));break;case 4:c=bt,f=on,bt=o.stateNode.containerInfo,on=!0,yi(n,s,o),bt=c,on=f;break;case 0:case 11:case 14:case 15:At||Xi(2,o,s),At||Xi(4,o,s),yi(n,s,o);break;case 1:At||(ei(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Lv(o,s,c)),yi(n,s,o);break;case 21:yi(n,s,o);break;case 22:At=(c=At)||o.memoizedState!==null,yi(n,s,o),At=c;break;default:yi(n,s,o)}}function Hv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{vo(n)}catch(o){ft(s,s.return,o)}}function q1(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Pv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Pv),s;default:throw Error(i(435,n.tag))}}function nd(n,s){var o=q1(n);s.forEach(function(c){var f=J1.bind(null,n,c);o.has(c)||(o.add(c),c.then(f,f))})}function gn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],g=n,w=s,R=w;e:for(;R!==null;){switch(R.tag){case 27:if(sr(R.type)){bt=R.stateNode,on=!1;break e}break;case 5:bt=R.stateNode,on=!1;break e;case 3:case 4:bt=R.stateNode.containerInfo,on=!0;break e}R=R.return}if(bt===null)throw Error(i(160));Fv(g,w,f),bt=null,on=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)jv(s,n),s=s.sibling}var Gn=null;function jv(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gn(s,n),mn(n),c&4&&(Xi(3,n,n.return),Qa(3,n),Xi(5,n,n.return));break;case 1:gn(s,n),mn(n),c&512&&(At||o===null||ei(o,o.return)),c&64&&_i&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Gn;if(gn(s,n),mn(n),c&512&&(At||o===null||ei(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Sa]||g[Yt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),Vt(g,c,o),g[Yt]=n,Lt(g),c=g;break e;case"link":var w=z_("link","href",f).get(c+(o.href||""));if(w){for(var R=0;R<w.length;R++)if(g=w[R],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(R,1);break t}}g=f.createElement(c),Vt(g,c,o),f.head.appendChild(g);break;case"meta":if(w=z_("meta","content",f).get(c+(o.content||""))){for(R=0;R<w.length;R++)if(g=w[R],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(R,1);break t}}g=f.createElement(c),Vt(g,c,o),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[Yt]=n,Lt(g),c=g}n.stateNode=c}else P_(f,n.type,n.stateNode);else n.stateNode=U_(f,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?P_(f,n.type,n.stateNode):U_(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Qh(n,n.memoizedProps,o.memoizedProps)}break;case 27:gn(s,n),mn(n),c&512&&(At||o===null||ei(o,o.return)),o!==null&&c&4&&Qh(n,n.memoizedProps,o.memoizedProps);break;case 5:if(gn(s,n),mn(n),c&512&&(At||o===null||ei(o,o.return)),n.flags&32){f=n.stateNode;try{ms(f,"")}catch(se){ft(n,n.return,se)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Qh(n,f,o!==null?o.memoizedProps:f)),c&1024&&(td=!0);break;case 6:if(gn(s,n),mn(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(se){ft(n,n.return,se)}}break;case 3:if(du=null,f=Gn,Gn=cu(s.containerInfo),gn(s,n),Gn=f,mn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{vo(s.containerInfo)}catch(se){ft(n,n.return,se)}td&&(td=!1,qv(n));break;case 4:c=Gn,Gn=cu(n.stateNode.containerInfo),gn(s,n),mn(n),Gn=c;break;case 12:gn(s,n),mn(n);break;case 13:gn(s,n),mn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ld=z()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,nd(n,c)));break;case 22:f=n.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,te=_i,fe=At;if(_i=te||f,At=fe||j,gn(s,n),At=fe,_i=te,mn(n),c&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||j||_i||At||Pr(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){j=o=s;try{if(g=j.stateNode,f)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{R=j.stateNode;var me=j.memoizedProps.style,ne=me!=null&&me.hasOwnProperty("display")?me.display:null;R.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(se){ft(j,j.return,se)}}}else if(s.tag===6){if(o===null){j=s;try{j.stateNode.nodeValue=f?"":j.memoizedProps}catch(se){ft(j,j.return,se)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,nd(n,o))));break;case 19:gn(s,n),mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,nd(n,c)));break;case 30:break;case 21:break;default:gn(s,n),mn(n)}}function mn(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(Uv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=Jh(n);Xl(n,g,f);break;case 5:var w=o.stateNode;o.flags&32&&(ms(w,""),o.flags&=-33);var R=Jh(n);Xl(n,R,w);break;case 3:case 4:var j=o.stateNode.containerInfo,te=Jh(n);ed(n,te,j);break;default:throw Error(i(161))}}catch(fe){ft(n,n.return,fe)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function qv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;qv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Qi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Gv(n,s.alternate,s),s=s.sibling}function Pr(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Xi(4,s,s.return),Pr(s);break;case 1:ei(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Lv(s,s.return,o),Pr(s);break;case 27:lo(s.stateNode);case 26:case 5:ei(s,s.return),Pr(s);break;case 22:s.memoizedState===null&&Pr(s);break;case 30:Pr(s);break;default:Pr(s)}n=n.sibling}}function Ji(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=n,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:Ji(f,g,o),Qa(4,g);break;case 1:if(Ji(f,g,o),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){ft(c,c.return,te)}if(c=g,f=c.updateQueue,f!==null){var R=c.stateNode;try{var j=f.shared.hiddenCallbacks;if(j!==null)for(f.shared.hiddenCallbacks=null,f=0;f<j.length;f++)ym(j[f],R)}catch(te){ft(c,c.return,te)}}o&&w&64&&Ov(g),Ja(g,g.return);break;case 27:zv(g);case 26:case 5:Ji(f,g,o),o&&c===null&&w&4&&Mv(g),Ja(g,g.return);break;case 12:Ji(f,g,o);break;case 13:Ji(f,g,o),o&&w&4&&Hv(f,g);break;case 22:g.memoizedState===null&&Ji(f,g,o),Ja(g,g.return);break;case 30:break;default:Ji(f,g,o)}s=s.sibling}}function id(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Pa(o))}function rd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pa(n))}function ti(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Vv(n,s,o,c),s=s.sibling}function Vv(n,s,o,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:ti(n,s,o,c),f&2048&&Qa(9,s);break;case 1:ti(n,s,o,c);break;case 3:ti(n,s,o,c),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pa(n)));break;case 12:if(f&2048){ti(n,s,o,c),n=s.stateNode;try{var g=s.memoizedProps,w=g.id,R=g.onPostCommit;typeof R=="function"&&R(w,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(j){ft(s,s.return,j)}}else ti(n,s,o,c);break;case 13:ti(n,s,o,c);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?ti(n,s,o,c):eo(n,s):g._visibility&2?ti(n,s,o,c):(g._visibility|=2,Ms(n,s,o,c,(s.subtreeFlags&10256)!==0)),f&2048&&id(w,s);break;case 24:ti(n,s,o,c),f&2048&&rd(s.alternate,s);break;default:ti(n,s,o,c)}}function Ms(n,s,o,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=n,w=s,R=o,j=c,te=w.flags;switch(w.tag){case 0:case 11:case 15:Ms(g,w,R,j,f),Qa(8,w);break;case 23:break;case 22:var fe=w.stateNode;w.memoizedState!==null?fe._visibility&2?Ms(g,w,R,j,f):eo(g,w):(fe._visibility|=2,Ms(g,w,R,j,f)),f&&te&2048&&id(w.alternate,w);break;case 24:Ms(g,w,R,j,f),f&&te&2048&&rd(w.alternate,w);break;default:Ms(g,w,R,j,f)}s=s.sibling}}function eo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,f=c.flags;switch(c.tag){case 22:eo(o,c),f&2048&&id(c.alternate,c);break;case 24:eo(o,c),f&2048&&rd(c.alternate,c);break;default:eo(o,c)}s=s.sibling}}var to=8192;function Us(n){if(n.subtreeFlags&to)for(n=n.child;n!==null;)Wv(n),n=n.sibling}function Wv(n){switch(n.tag){case 26:Us(n),n.flags&to&&n.memoizedState!==null&&DT(Gn,n.memoizedState,n.memoizedProps);break;case 5:Us(n);break;case 3:case 4:var s=Gn;Gn=cu(n.stateNode.containerInfo),Us(n),Gn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=to,to=16777216,Us(n),to=s):Us(n));break;default:Us(n)}}function $v(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function no(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Ut=c,Kv(c,n)}$v(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Yv(n),n=n.sibling}function Yv(n){switch(n.tag){case 0:case 11:case 15:no(n),n.flags&2048&&Xi(9,n,n.return);break;case 3:no(n);break;case 12:no(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Ql(n)):no(n);break;default:no(n)}}function Ql(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Ut=c,Kv(c,n)}$v(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Xi(8,s,s.return),Ql(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Ql(s));break;default:Ql(s)}n=n.sibling}}function Kv(n,s){for(;Ut!==null;){var o=Ut;switch(o.tag){case 0:case 11:case 15:Xi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pa(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Ut=c;else e:for(o=n;Ut!==null;){c=Ut;var f=c.sibling,g=c.return;if(Bv(c),c===o){Ut=null;break e}if(f!==null){f.return=g,Ut=f;break e}Ut=g}}}var V1={getCacheForType:function(n){var s=Kt(Dt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},W1=typeof WeakMap=="function"?WeakMap:Map,rt=0,mt=null,Ze=null,et=0,st=0,vn=null,er=!1,zs=!1,sd=!1,bi=0,St=0,tr=0,Gr=0,ad=0,Dn=0,Ps=0,io=null,ln=null,od=!1,ld=0,Jl=1/0,eu=null,nr=null,qt=0,ir=null,Gs=null,Bs=0,ud=0,cd=null,Zv=null,ro=0,hd=null;function _n(){if((rt&2)!==0&&et!==0)return et&-et;if(P.T!==null){var n=Rs;return n!==0?n:_d()}return dg()}function Xv(){Dn===0&&(Dn=(et&536870912)===0||it?as():536870912);var n=kn.current;return n!==null&&(n.flags|=32),Dn}function yn(n,s,o){(n===mt&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(Fs(n,0),rr(n,et,Dn,!1)),zn(n,o),((rt&2)===0||n!==mt)&&(n===mt&&((rt&2)===0&&(Gr|=o),St===4&&rr(n,et,Dn,!1)),ni(n))}function Qv(n,s,o){if((rt&6)!==0)throw Error(i(327));var c=!o&&(s&124)===0&&(s&n.expiredLanes)===0||Xn(n,s),f=c?K1(n,s):pd(n,s,!0),g=c;do{if(f===0){zs&&!c&&rr(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!$1(o)){f=pd(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var R=n;f=io;var j=R.current.memoizedState.isDehydrated;if(j&&(Fs(R,w).flags|=256),w=pd(R,w,!1),w!==2){if(sd&&!j){R.errorRecoveryDisabledLanes|=g,Gr|=g,f=4;break e}g=ln,ln=f,g!==null&&(ln===null?ln=g:ln.push.apply(ln,g))}f=w}if(g=!1,f!==2)continue}}if(f===1){Fs(n,0),rr(n,s,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rr(c,s,Dn,!er);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=ld+300-z(),10<f)){if(rr(c,s,Dn,!er),Ht(c,0,!0)!==0)break e;c.timeoutHandle=R_(Jv.bind(null,c,o,ln,eu,od,s,Dn,Gr,Ps,er,g,2,-0,0),f);break e}Jv(c,o,ln,eu,od,s,Dn,Gr,Ps,er,g,0,-0,0)}}break}while(!0);ni(n)}function Jv(n,s,o,c,f,g,w,R,j,te,fe,me,ne,se){if(n.timeoutHandle=-1,me=s.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(ho={stylesheets:null,count:0,unsuspend:kT},Wv(s),me=NT(),me!==null)){n.cancelPendingCommit=me(a_.bind(null,n,s,g,o,c,f,w,R,j,fe,1,ne,se)),rr(n,g,w,!te);return}a_(n,s,g,o,c,f,w,R,j)}function $1(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],g=f.getSnapshot;f=f.value;try{if(!fn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rr(n,s,o,c){s&=~ad,s&=~Gr,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var f=s;0<f;){var g=31-Re(f),w=1<<g;c[g]=-1,f&=~w}o!==0&&cg(n,o,s)}function tu(){return(rt&6)===0?(so(0),!1):!0}function dd(){if(Ze!==null){if(st===0)var n=Ze.return;else n=Ze,di=Or=null,Dh(n),Os=null,Ka=0,n=Ze;for(;n!==null;)xv(n.alternate,n),n=n.return;Ze=null}}function Fs(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,hT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),dd(),mt=n,Ze=o=ui(n.current,null),et=s,st=0,vn=null,er=!1,zs=Xn(n,s),sd=!1,Ps=Dn=ad=Gr=tr=St=0,ln=io=null,od=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var f=31-Re(c),g=1<<f;s|=n[f],c&=~g}return bi=s,Sl(),o}function e_(n,s){We=null,P.H=Hl,s===Ba||s===xl?(s=vm(),st=3):s===pm?(s=vm(),st=4):st=s===_v?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,vn=s,Ze===null&&(St=1,$l(n,Tn(s,n.current)))}function t_(){var n=P.H;return P.H=Hl,n===null?Hl:n}function n_(){var n=P.A;return P.A=V1,n}function fd(){St=4,er||(et&4194048)!==et&&kn.current!==null||(zs=!0),(tr&134217727)===0&&(Gr&134217727)===0||mt===null||rr(mt,et,Dn,!1)}function pd(n,s,o){var c=rt;rt|=2;var f=t_(),g=n_();(mt!==n||et!==s)&&(eu=null,Fs(n,s)),s=!1;var w=St;e:do try{if(st!==0&&Ze!==null){var R=Ze,j=vn;switch(st){case 8:dd(),w=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(s=!0);var te=st;if(st=0,vn=null,Hs(n,R,j,te),o&&zs){w=0;break e}break;default:te=st,st=0,vn=null,Hs(n,R,j,te)}}Y1(),w=St;break}catch(fe){e_(n,fe)}while(!0);return s&&n.shellSuspendCounter++,di=Or=null,rt=c,P.H=f,P.A=g,Ze===null&&(mt=null,et=0,Sl()),w}function Y1(){for(;Ze!==null;)i_(Ze)}function K1(n,s){var o=rt;rt|=2;var c=t_(),f=n_();mt!==n||et!==s?(eu=null,Jl=z()+500,Fs(n,s)):zs=Xn(n,s);e:do try{if(st!==0&&Ze!==null){s=Ze;var g=vn;t:switch(st){case 1:st=0,vn=null,Hs(n,s,g,1);break;case 2:case 9:if(gm(g)){st=0,vn=null,r_(s);break}s=function(){st!==2&&st!==9||mt!==n||(st=7),ni(n)},g.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:gm(g)?(st=0,vn=null,r_(s)):(st=0,vn=null,Hs(n,s,g,7));break;case 5:var w=null;switch(Ze.tag){case 26:w=Ze.memoizedState;case 5:case 27:var R=Ze;if(!w||G_(w)){st=0,vn=null;var j=R.sibling;if(j!==null)Ze=j;else{var te=R.return;te!==null?(Ze=te,nu(te)):Ze=null}break t}}st=0,vn=null,Hs(n,s,g,5);break;case 6:st=0,vn=null,Hs(n,s,g,6);break;case 8:dd(),St=6;break e;default:throw Error(i(462))}}Z1();break}catch(fe){e_(n,fe)}while(!0);return di=Or=null,P.H=c,P.A=f,rt=o,Ze!==null?0:(mt=null,et=0,Sl(),St)}function Z1(){for(;Ze!==null&&!Q();)i_(Ze)}function i_(n){var s=Nv(n.alternate,n,bi);n.memoizedProps=n.pendingProps,s===null?nu(n):Ze=s}function r_(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Tv(o,s,s.pendingProps,s.type,void 0,et);break;case 11:s=Tv(o,s,s.pendingProps,s.type.render,s.ref,et);break;case 5:Dh(s);default:xv(o,s),s=Ze=sm(s,bi),s=Nv(o,s,bi)}n.memoizedProps=n.pendingProps,s===null?nu(n):Ze=s}function Hs(n,s,o,c){di=Or=null,Dh(s),Os=null,Ka=0;var f=s.return;try{if(G1(n,f,s,o,et)){St=1,$l(n,Tn(o,n.current)),Ze=null;return}}catch(g){if(f!==null)throw Ze=f,g;St=1,$l(n,Tn(o,n.current)),Ze=null;return}s.flags&32768?(it||c===1?n=!0:zs||(et&536870912)!==0?n=!1:(er=n=!0,(c===2||c===9||c===3||c===6)&&(c=kn.current,c!==null&&c.tag===13&&(c.flags|=16384))),s_(s,n)):nu(s)}function nu(n){var s=n;do{if((s.flags&32768)!==0){s_(s,er);return}n=s.return;var o=F1(s.alternate,s,bi);if(o!==null){Ze=o;return}if(s=s.sibling,s!==null){Ze=s;return}Ze=s=n}while(s!==null);St===0&&(St=5)}function s_(n,s){do{var o=H1(n.alternate,n);if(o!==null){o.flags&=32767,Ze=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ze=n;return}Ze=n=o}while(n!==null);St=6,Ze=null}function a_(n,s,o,c,f,g,w,R,j){n.cancelPendingCommit=null;do iu();while(qt!==0);if((rt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=rh,ls(n,o,g,w,R,j),n===mt&&(Ze=mt=null,et=0),Gs=s,ir=n,Bs=o,ud=g,cd=f,Zv=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,eT(F,function(){return h_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=P.T,P.T=null,f=I.p,I.p=2,w=rt,rt|=4;try{j1(n,s,o)}finally{rt=w,I.p=f,P.T=c}}qt=1,o_(),l_(),u_()}}function o_(){if(qt===1){qt=0;var n=ir,s=Gs,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=P.T,P.T=null;var c=I.p;I.p=2;var f=rt;rt|=4;try{jv(s,n);var g=Ad,w=Kg(n.containerInfo),R=g.focusedElem,j=g.selectionRange;if(w!==R&&R&&R.ownerDocument&&Yg(R.ownerDocument.documentElement,R)){if(j!==null&&Jc(R)){var te=j.start,fe=j.end;if(fe===void 0&&(fe=te),"selectionStart"in R)R.selectionStart=te,R.selectionEnd=Math.min(fe,R.value.length);else{var me=R.ownerDocument||document,ne=me&&me.defaultView||window;if(ne.getSelection){var se=ne.getSelection(),Ge=R.textContent.length,Oe=Math.min(j.start,Ge),ut=j.end===void 0?Oe:Math.min(j.end,Ge);!se.extend&&Oe>ut&&(w=ut,ut=Oe,Oe=w);var X=$g(R,Oe),$=$g(R,ut);if(X&&$&&(se.rangeCount!==1||se.anchorNode!==X.node||se.anchorOffset!==X.offset||se.focusNode!==$.node||se.focusOffset!==$.offset)){var ee=me.createRange();ee.setStart(X.node,X.offset),se.removeAllRanges(),Oe>ut?(se.addRange(ee),se.extend($.node,$.offset)):(ee.setEnd($.node,$.offset),se.addRange(ee))}}}}for(me=[],se=R;se=se.parentNode;)se.nodeType===1&&me.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<me.length;R++){var pe=me[R];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}gu=!!Cd,Ad=Cd=null}finally{rt=f,I.p=c,P.T=o}}n.current=s,qt=2}}function l_(){if(qt===2){qt=0;var n=ir,s=Gs,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=P.T,P.T=null;var c=I.p;I.p=2;var f=rt;rt|=4;try{Gv(n,s.alternate,s)}finally{rt=f,I.p=c,P.T=o}}qt=3}}function u_(){if(qt===4||qt===3){qt=0,B();var n=ir,s=Gs,o=Bs,c=Zv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?qt=5:(qt=0,Gs=ir=null,c_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(nr=null),xc(o),s=s.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(le,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=P.T,f=I.p,I.p=2,P.T=null;try{for(var g=n.onRecoverableError,w=0;w<c.length;w++){var R=c[w];g(R.value,{componentStack:R.stack})}}finally{P.T=s,I.p=f}}(Bs&3)!==0&&iu(),ni(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===hd?ro++:(ro=0,hd=n):ro=0,so(0)}}function c_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Pa(s)))}function iu(n){return o_(),l_(),u_(),h_()}function h_(){if(qt!==5)return!1;var n=ir,s=ud;ud=0;var o=xc(Bs),c=P.T,f=I.p;try{I.p=32>o?32:o,P.T=null,o=cd,cd=null;var g=ir,w=Bs;if(qt=0,Gs=ir=null,Bs=0,(rt&6)!==0)throw Error(i(331));var R=rt;if(rt|=4,Yv(g.current),Vv(g,g.current,w,o),rt=R,so(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(le,g)}catch{}return!0}finally{I.p=f,P.T=c,c_(n,s)}}function d_(n,s,o){s=Tn(o,s),s=jh(n.stateNode,s,2),n=$i(n,s,2),n!==null&&(zn(n,2),ni(n))}function ft(n,s,o){if(n.tag===3)d_(n,n,o);else for(;s!==null;){if(s.tag===3){d_(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(nr===null||!nr.has(c))){n=Tn(o,n),o=mv(2),c=$i(s,o,2),c!==null&&(vv(o,c,s,n),zn(c,2),ni(c));break}}s=s.return}}function gd(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new W1;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(o)||(sd=!0,f.add(o),n=X1.bind(null,n,s,o),s.then(n,n))}function X1(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,mt===n&&(et&o)===o&&(St===4||St===3&&(et&62914560)===et&&300>z()-ld?(rt&2)===0&&Fs(n,0):ad|=o,Ps===et&&(Ps=0)),ni(n)}function f_(n,s){s===0&&(s=os()),n=Ss(n,s),n!==null&&(zn(n,s),ni(n))}function Q1(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),f_(n,o)}function J1(n,s){var o=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),f_(n,o)}function eT(n,s){return dt(n,s)}var ru=null,js=null,md=!1,su=!1,vd=!1,Br=0;function ni(n){n!==js&&n.next===null&&(js===null?ru=js=n:js=js.next=n),su=!0,md||(md=!0,nT())}function so(n,s){if(!vd&&su){vd=!0;do for(var o=!1,c=ru;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var w=c.suspendedLanes,R=c.pingedLanes;g=(1<<31-Re(42|n)+1)-1,g&=f&~(w&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,v_(c,g))}else g=et,g=Ht(c,c===mt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Xn(c,g)||(o=!0,v_(c,g));c=c.next}while(o);vd=!1}}function tT(){p_()}function p_(){su=md=!1;var n=0;Br!==0&&(cT()&&(n=Br),Br=0);for(var s=z(),o=null,c=ru;c!==null;){var f=c.next,g=g_(c,s);g===0?(c.next=null,o===null?ru=f:o.next=f,f===null&&(js=o)):(o=c,(n!==0||(g&3)!==0)&&(su=!0)),c=f}so(n)}function g_(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var w=31-Re(g),R=1<<w,j=f[w];j===-1?((R&o)===0||(R&c)!==0)&&(f[w]=ss(R,s)):j<=s&&(n.expiredLanes|=R),g&=~R}if(s=mt,o=et,o=Ht(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(st===2||st===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&b(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Xn(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&b(c),xc(o)){case 2:case 8:o=ge;break;case 32:o=F;break;case 268435456:o=oe;break;default:o=F}return c=m_.bind(null,n),o=dt(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&b(c),n.callbackPriority=2,n.callbackNode=null,2}function m_(n,s){if(qt!==0&&qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(iu()&&n.callbackNode!==o)return null;var c=et;return c=Ht(n,n===mt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Qv(n,c,s),g_(n,z()),n.callbackNode!=null&&n.callbackNode===o?m_.bind(null,n):null)}function v_(n,s){if(iu())return null;Qv(n,s,!0)}function nT(){dT(function(){(rt&6)!==0?dt(K,tT):p_()})}function _d(){return Br===0&&(Br=as()),Br}function __(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ml(""+n)}function y_(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function iT(n,s,o,c,f){if(s==="submit"&&o&&o.stateNode===f){var g=__((f[rn]||null).action),w=c.submitter;w&&(s=(s=w[rn]||null)?__(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var R=new bl("action","action",null,c,f);n.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Br!==0){var j=w?y_(f,w):new FormData(f);Ph(o,{pending:!0,data:j,method:f.method,action:g},null,j)}}else typeof g=="function"&&(R.preventDefault(),j=w?y_(f,w):new FormData(f),Ph(o,{pending:!0,data:j,method:f.method,action:g},g,j))},currentTarget:f}]})}}for(var yd=0;yd<ih.length;yd++){var bd=ih[yd],rT=bd.toLowerCase(),sT=bd[0].toUpperCase()+bd.slice(1);Pn(rT,"on"+sT)}Pn(Qg,"onAnimationEnd"),Pn(Jg,"onAnimationIteration"),Pn(em,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(w1,"onTransitionRun"),Pn(S1,"onTransitionStart"),Pn(T1,"onTransitionCancel"),Pn(tm,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ao));function b_(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var R=c[w],j=R.instance,te=R.currentTarget;if(R=R.listener,j!==g&&f.isPropagationStopped())break e;g=R,f.currentTarget=te;try{g(f)}catch(fe){Wl(fe)}f.currentTarget=null,g=j}else for(w=0;w<c.length;w++){if(R=c[w],j=R.instance,te=R.currentTarget,R=R.listener,j!==g&&f.isPropagationStopped())break e;g=R,f.currentTarget=te;try{g(f)}catch(fe){Wl(fe)}f.currentTarget=null,g=j}}}}function Xe(n,s){var o=s[Oc];o===void 0&&(o=s[Oc]=new Set);var c=n+"__bubble";o.has(c)||(E_(s,n,2,!1),o.add(c))}function Ed(n,s,o){var c=0;s&&(c|=4),E_(o,n,c,s)}var au="_reactListening"+Math.random().toString(36).slice(2);function wd(n){if(!n[au]){n[au]=!0,pg.forEach(function(o){o!=="selectionchange"&&(aT.has(o)||Ed(o,!1,n),Ed(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[au]||(s[au]=!0,Ed("selectionchange",!1,s))}}function E_(n,s,o,c){switch(V_(s)){case 2:var f=OT;break;case 8:f=LT;break;default:f=Ud}o=f.bind(null,s,o,n),f=void 0,!qc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Sd(n,s,o,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var R=c.stateNode.containerInfo;if(R===f)break;if(w===4)for(w=c.return;w!==null;){var j=w.tag;if((j===3||j===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;R!==null;){if(w=cs(R),w===null)return;if(j=w.tag,j===5||j===6||j===26||j===27){c=g=w;continue e}R=R.parentNode}}c=c.return}kg(function(){var te=g,fe=Hc(o),me=[];e:{var ne=nm.get(n);if(ne!==void 0){var se=bl,Ge=n;switch(n){case"keypress":if(_l(o)===0)break e;case"keydown":case"keyup":se=e1;break;case"focusin":Ge="focus",se=Yc;break;case"focusout":Ge="blur",se=Yc;break;case"beforeblur":case"afterblur":se=Yc;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=HS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=i1;break;case Qg:case Jg:case em:se=VS;break;case tm:se=s1;break;case"scroll":case"scrollend":se=BS;break;case"wheel":se=o1;break;case"copy":case"cut":case"paste":se=$S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=Og;break;case"toggle":case"beforetoggle":se=u1}var Oe=(s&4)!==0,ut=!Oe&&(n==="scroll"||n==="scrollend"),X=Oe?ne!==null?ne+"Capture":null:ne;Oe=[];for(var $=te,ee;$!==null;){var pe=$;if(ee=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ee===null||X===null||(pe=Ca($,X),pe!=null&&Oe.push(oo($,pe,ee))),ut)break;$=$.return}0<Oe.length&&(ne=new se(ne,Ge,null,o,fe),me.push({event:ne,listeners:Oe}))}}if((s&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",ne&&o!==Fc&&(Ge=o.relatedTarget||o.fromElement)&&(cs(Ge)||Ge[us]))break e;if((se||ne)&&(ne=fe.window===fe?fe:(ne=fe.ownerDocument)?ne.defaultView||ne.parentWindow:window,se?(Ge=o.relatedTarget||o.toElement,se=te,Ge=Ge?cs(Ge):null,Ge!==null&&(ut=l(Ge),Oe=Ge.tag,Ge!==ut||Oe!==5&&Oe!==27&&Oe!==6)&&(Ge=null)):(se=null,Ge=te),se!==Ge)){if(Oe=Ig,pe="onMouseLeave",X="onMouseEnter",$="mouse",(n==="pointerout"||n==="pointerover")&&(Oe=Og,pe="onPointerLeave",X="onPointerEnter",$="pointer"),ut=se==null?ne:Ta(se),ee=Ge==null?ne:Ta(Ge),ne=new Oe(pe,$+"leave",se,o,fe),ne.target=ut,ne.relatedTarget=ee,pe=null,cs(fe)===te&&(Oe=new Oe(X,$+"enter",Ge,o,fe),Oe.target=ee,Oe.relatedTarget=ut,pe=Oe),ut=pe,se&&Ge)t:{for(Oe=se,X=Ge,$=0,ee=Oe;ee;ee=qs(ee))$++;for(ee=0,pe=X;pe;pe=qs(pe))ee++;for(;0<$-ee;)Oe=qs(Oe),$--;for(;0<ee-$;)X=qs(X),ee--;for(;$--;){if(Oe===X||X!==null&&Oe===X.alternate)break t;Oe=qs(Oe),X=qs(X)}Oe=null}else Oe=null;se!==null&&w_(me,ne,se,Oe,!1),Ge!==null&&ut!==null&&w_(me,ut,Ge,Oe,!0)}}e:{if(ne=te?Ta(te):window,se=ne.nodeName&&ne.nodeName.toLowerCase(),se==="select"||se==="input"&&ne.type==="file")var ke=Fg;else if(Gg(ne))if(Hg)ke=y1;else{ke=v1;var $e=m1}else se=ne.nodeName,!se||se.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&Bc(te.elementType)&&(ke=Fg):ke=_1;if(ke&&(ke=ke(n,te))){Bg(me,ke,o,fe);break e}$e&&$e(n,ne,te),n==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&Gc(ne,"number",ne.value)}switch($e=te?Ta(te):window,n){case"focusin":(Gg($e)||$e.contentEditable==="true")&&(bs=$e,eh=te,Oa=null);break;case"focusout":Oa=eh=bs=null;break;case"mousedown":th=!0;break;case"contextmenu":case"mouseup":case"dragend":th=!1,Zg(me,o,fe);break;case"selectionchange":if(E1)break;case"keydown":case"keyup":Zg(me,o,fe)}var xe;if(Zc)e:{switch(n){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else ys?zg(n,o)&&(Me="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Me="onCompositionStart");Me&&(Lg&&o.locale!=="ko"&&(ys||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&ys&&(xe=Dg()):(ji=fe,Vc="value"in ji?ji.value:ji.textContent,ys=!0)),$e=ou(te,Me),0<$e.length&&(Me=new xg(Me,n,null,o,fe),me.push({event:Me,listeners:$e}),xe?Me.data=xe:(xe=Pg(o),xe!==null&&(Me.data=xe)))),(xe=h1?d1(n,o):f1(n,o))&&(Me=ou(te,"onBeforeInput"),0<Me.length&&($e=new xg("onBeforeInput","beforeinput",null,o,fe),me.push({event:$e,listeners:Me}),$e.data=xe)),iT(me,n,te,o,fe)}b_(me,s)})}function oo(n,s,o){return{instance:n,listener:s,currentTarget:o}}function ou(n,s){for(var o=s+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Ca(n,o),f!=null&&c.unshift(oo(n,f,g)),f=Ca(n,s),f!=null&&c.push(oo(n,f,g))),n.tag===3)return c;n=n.return}return[]}function qs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function w_(n,s,o,c,f){for(var g=s._reactName,w=[];o!==null&&o!==c;){var R=o,j=R.alternate,te=R.stateNode;if(R=R.tag,j!==null&&j===c)break;R!==5&&R!==26&&R!==27||te===null||(j=te,f?(te=Ca(o,g),te!=null&&w.unshift(oo(o,te,j))):f||(te=Ca(o,g),te!=null&&w.push(oo(o,te,j)))),o=o.return}w.length!==0&&n.push({event:s,listeners:w})}var oT=/\r\n?/g,lT=/\u0000|\uFFFD/g;function S_(n){return(typeof n=="string"?n:""+n).replace(oT,`
`).replace(lT,"")}function T_(n,s){return s=S_(s),S_(n)===s}function lu(){}function lt(n,s,o,c,f,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||ms(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&ms(n,""+c);break;case"className":fl(n,"class",c);break;case"tabIndex":fl(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(n,o,c);break;case"style":Ag(n,c,g);break;case"data":if(s!=="object"){fl(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ml(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&lt(n,s,"name",f.name,f,null),lt(n,s,"formEncType",f.formEncType,f,null),lt(n,s,"formMethod",f.formMethod,f,null),lt(n,s,"formTarget",f.formTarget,f,null)):(lt(n,s,"encType",f.encType,f,null),lt(n,s,"method",f.method,f,null),lt(n,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ml(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=lu);break;case"onScroll":c!=null&&Xe("scroll",n);break;case"onScrollEnd":c!=null&&Xe("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=ml(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Xe("beforetoggle",n),Xe("toggle",n),dl(n,"popover",c);break;case"xlinkActuate":oi(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":oi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":oi(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":oi(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":oi(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":oi(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":oi(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":oi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":oi(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":dl(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=PS.get(o)||o,dl(n,o,c))}}function Td(n,s,o,c,f,g){switch(o){case"style":Ag(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?ms(n,c):(typeof c=="number"||typeof c=="bigint")&&ms(n,""+c);break;case"onScroll":c!=null&&Xe("scroll",n);break;case"onScrollEnd":c!=null&&Xe("scrollend",n);break;case"onClick":c!=null&&(n.onclick=lu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gg.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[rn]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):dl(n,o,c)}}}function Vt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",n),Xe("load",n);var c=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var w=o[g];if(w!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(n,s,g,w,o,null)}}f&&lt(n,s,"srcSet",o.srcSet,o,null),c&&lt(n,s,"src",o.src,o,null);return;case"input":Xe("invalid",n);var R=g=w=f=null,j=null,te=null;for(c in o)if(o.hasOwnProperty(c)){var fe=o[c];if(fe!=null)switch(c){case"name":f=fe;break;case"type":w=fe;break;case"checked":j=fe;break;case"defaultChecked":te=fe;break;case"value":g=fe;break;case"defaultValue":R=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,s));break;default:lt(n,s,c,fe,o,null)}}wg(n,g,R,j,te,w,f,!1),pl(n);return;case"select":Xe("invalid",n),c=w=g=null;for(f in o)if(o.hasOwnProperty(f)&&(R=o[f],R!=null))switch(f){case"value":g=R;break;case"defaultValue":w=R;break;case"multiple":c=R;default:lt(n,s,f,R,o,null)}s=g,o=w,n.multiple=!!c,s!=null?gs(n,!!c,s,!1):o!=null&&gs(n,!!c,o,!0);return;case"textarea":Xe("invalid",n),g=f=c=null;for(w in o)if(o.hasOwnProperty(w)&&(R=o[w],R!=null))switch(w){case"value":c=R;break;case"defaultValue":f=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:lt(n,s,w,R,o,null)}Tg(n,c,f,g),pl(n);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(c=o[j],c!=null))switch(j){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(n,s,j,c,o,null)}return;case"dialog":Xe("beforetoggle",n),Xe("toggle",n),Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":Xe("load",n);break;case"video":case"audio":for(c=0;c<ao.length;c++)Xe(ao[c],n);break;case"image":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"embed":case"source":case"link":Xe("error",n),Xe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in o)if(o.hasOwnProperty(te)&&(c=o[te],c!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(n,s,te,c,o,null)}return;default:if(Bc(s)){for(fe in o)o.hasOwnProperty(fe)&&(c=o[fe],c!==void 0&&Td(n,s,fe,c,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(c=o[R],c!=null&&lt(n,s,R,c,o,null))}function uT(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,w=null,R=null,j=null,te=null,fe=null;for(se in o){var me=o[se];if(o.hasOwnProperty(se)&&me!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":j=me;default:c.hasOwnProperty(se)||lt(n,s,se,null,c,me)}}for(var ne in c){var se=c[ne];if(me=o[ne],c.hasOwnProperty(ne)&&(se!=null||me!=null))switch(ne){case"type":g=se;break;case"name":f=se;break;case"checked":te=se;break;case"defaultChecked":fe=se;break;case"value":w=se;break;case"defaultValue":R=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:se!==me&&lt(n,s,ne,se,c,me)}}Pc(n,w,R,j,te,fe,g,f);return;case"select":se=w=R=ne=null;for(g in o)if(j=o[g],o.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":se=j;default:c.hasOwnProperty(g)||lt(n,s,g,null,c,j)}for(f in c)if(g=c[f],j=o[f],c.hasOwnProperty(f)&&(g!=null||j!=null))switch(f){case"value":ne=g;break;case"defaultValue":R=g;break;case"multiple":w=g;default:g!==j&&lt(n,s,f,g,c,j)}s=R,o=w,c=se,ne!=null?gs(n,!!o,ne,!1):!!c!=!!o&&(s!=null?gs(n,!!o,s,!0):gs(n,!!o,o?[]:"",!1));return;case"textarea":se=ne=null;for(R in o)if(f=o[R],o.hasOwnProperty(R)&&f!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:lt(n,s,R,null,c,f)}for(w in c)if(f=c[w],g=o[w],c.hasOwnProperty(w)&&(f!=null||g!=null))switch(w){case"value":ne=f;break;case"defaultValue":se=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&lt(n,s,w,f,c,g)}Sg(n,ne,se);return;case"option":for(var Ge in o)if(ne=o[Ge],o.hasOwnProperty(Ge)&&ne!=null&&!c.hasOwnProperty(Ge))switch(Ge){case"selected":n.selected=!1;break;default:lt(n,s,Ge,null,c,ne)}for(j in c)if(ne=c[j],se=o[j],c.hasOwnProperty(j)&&ne!==se&&(ne!=null||se!=null))switch(j){case"selected":n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:lt(n,s,j,ne,c,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in o)ne=o[Oe],o.hasOwnProperty(Oe)&&ne!=null&&!c.hasOwnProperty(Oe)&&lt(n,s,Oe,null,c,ne);for(te in c)if(ne=c[te],se=o[te],c.hasOwnProperty(te)&&ne!==se&&(ne!=null||se!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,s));break;default:lt(n,s,te,ne,c,se)}return;default:if(Bc(s)){for(var ut in o)ne=o[ut],o.hasOwnProperty(ut)&&ne!==void 0&&!c.hasOwnProperty(ut)&&Td(n,s,ut,void 0,c,ne);for(fe in c)ne=c[fe],se=o[fe],!c.hasOwnProperty(fe)||ne===se||ne===void 0&&se===void 0||Td(n,s,fe,ne,c,se);return}}for(var X in o)ne=o[X],o.hasOwnProperty(X)&&ne!=null&&!c.hasOwnProperty(X)&&lt(n,s,X,null,c,ne);for(me in c)ne=c[me],se=o[me],!c.hasOwnProperty(me)||ne===se||ne==null&&se==null||lt(n,s,me,ne,c,se)}var Cd=null,Ad=null;function uu(n){return n.nodeType===9?n:n.ownerDocument}function C_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function A_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Rd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var kd=null;function cT(){var n=window.event;return n&&n.type==="popstate"?n===kd?!1:(kd=n,!0):(kd=null,!1)}var R_=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,k_=typeof Promise=="function"?Promise:void 0,dT=typeof queueMicrotask=="function"?queueMicrotask:typeof k_<"u"?function(n){return k_.resolve(null).then(n).catch(fT)}:R_;function fT(n){setTimeout(function(){throw n})}function sr(n){return n==="head"}function D_(n,s){var o=s,c=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var w=n.ownerDocument;if(o&1&&lo(w.documentElement),o&2&&lo(w.body),o&4)for(o=w.head,lo(o),w=o.firstChild;w;){var R=w.nextSibling,j=w.nodeName;w[Sa]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=R}}if(f===0){n.removeChild(g),vo(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);vo(s)}function Dd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dd(o),Lc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function pT(n,s,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Sa])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Bn(n.nextSibling),n===null)break}return null}function gT(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Bn(n.nextSibling),n===null))return null;return n}function Nd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function mT(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Bn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var Id=null;function N_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function I_(n,s,o){switch(s=uu(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function lo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Lc(n)}var Nn=new Map,x_=new Set;function cu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ei=I.d;I.d={f:vT,r:_T,D:yT,C:bT,L:ET,m:wT,X:TT,S:ST,M:CT};function vT(){var n=Ei.f(),s=tu();return n||s}function _T(n){var s=hs(n);s!==null&&s.tag===5&&s.type==="form"?Qm(s):Ei.r(n)}var Vs=typeof document>"u"?null:document;function O_(n,s,o){var c=Vs;if(c&&typeof s=="string"&&s){var f=Sn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),x_.has(f)||(x_.add(f),n={rel:n,crossOrigin:o,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),Vt(s,"link",n),Lt(s),c.head.appendChild(s)))}}function yT(n){Ei.D(n),O_("dns-prefetch",n,null)}function bT(n,s){Ei.C(n,s),O_("preconnect",n,s)}function ET(n,s,o){Ei.L(n,s,o);var c=Vs;if(c&&n&&s){var f='link[rel="preload"][as="'+Sn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Sn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Sn(o.imageSizes)+'"]')):f+='[href="'+Sn(n)+'"]';var g=f;switch(s){case"style":g=Ws(n);break;case"script":g=$s(n)}Nn.has(g)||(n=m({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Nn.set(g,n),c.querySelector(f)!==null||s==="style"&&c.querySelector(uo(g))||s==="script"&&c.querySelector(co(g))||(s=c.createElement("link"),Vt(s,"link",n),Lt(s),c.head.appendChild(s)))}}function wT(n,s){Ei.m(n,s);var o=Vs;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Sn(c)+'"][href="'+Sn(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=$s(n)}if(!Nn.has(g)&&(n=m({rel:"modulepreload",href:n},s),Nn.set(g,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(co(g)))return}c=o.createElement("link"),Vt(c,"link",n),Lt(c),o.head.appendChild(c)}}}function ST(n,s,o){Ei.S(n,s,o);var c=Vs;if(c&&n){var f=ds(c).hoistableStyles,g=Ws(n);s=s||"default";var w=f.get(g);if(!w){var R={loading:0,preload:null};if(w=c.querySelector(uo(g)))R.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Nn.get(g))&&xd(n,o);var j=w=c.createElement("link");Lt(j),Vt(j,"link",n),j._p=new Promise(function(te,fe){j.onload=te,j.onerror=fe}),j.addEventListener("load",function(){R.loading|=1}),j.addEventListener("error",function(){R.loading|=2}),R.loading|=4,hu(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:R},f.set(g,w)}}}function TT(n,s){Ei.X(n,s);var o=Vs;if(o&&n){var c=ds(o).hoistableScripts,f=$s(n),g=c.get(f);g||(g=o.querySelector(co(f)),g||(n=m({src:n,async:!0},s),(s=Nn.get(f))&&Od(n,s),g=o.createElement("script"),Lt(g),Vt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function CT(n,s){Ei.M(n,s);var o=Vs;if(o&&n){var c=ds(o).hoistableScripts,f=$s(n),g=c.get(f);g||(g=o.querySelector(co(f)),g||(n=m({src:n,async:!0,type:"module"},s),(s=Nn.get(f))&&Od(n,s),g=o.createElement("script"),Lt(g),Vt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function L_(n,s,o,c){var f=(f=Ae.current)?cu(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Ws(o.href),o=ds(f).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ws(o.href);var g=ds(f).hoistableStyles,w=g.get(n);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,w),(g=f.querySelector(uo(n)))&&!g._p&&(w.instance=g,w.state.loading=5),Nn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Nn.set(n,o),g||AT(f,n,o,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$s(o),o=ds(f).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ws(n){return'href="'+Sn(n)+'"'}function uo(n){return'link[rel="stylesheet"]['+n+"]"}function M_(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function AT(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Vt(s,"link",o),Lt(s),n.head.appendChild(s))}function $s(n){return'[src="'+Sn(n)+'"]'}function co(n){return"script[async]"+n}function U_(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+Sn(o.href)+'"]');if(c)return s.instance=c,Lt(c),c;var f=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Lt(c),Vt(c,"style",f),hu(c,o.precedence,n),s.instance=c;case"stylesheet":f=Ws(o.href);var g=n.querySelector(uo(f));if(g)return s.state.loading|=4,s.instance=g,Lt(g),g;c=M_(o),(f=Nn.get(f))&&xd(c,f),g=(n.ownerDocument||n).createElement("link"),Lt(g);var w=g;return w._p=new Promise(function(R,j){w.onload=R,w.onerror=j}),Vt(g,"link",c),s.state.loading|=4,hu(g,o.precedence,n),s.instance=g;case"script":return g=$s(o.src),(f=n.querySelector(co(g)))?(s.instance=f,Lt(f),f):(c=o,(f=Nn.get(g))&&(c=m({},o),Od(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Lt(f),Vt(f,"link",c),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,hu(c,o.precedence,n));return s.instance}function hu(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,w=0;w<c.length;w++){var R=c[w];if(R.dataset.precedence===s)g=R;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function xd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Od(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var du=null;function z_(n,s,o){if(du===null){var c=new Map,f=du=new Map;f.set(o,c)}else f=du,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[Sa]||g[Yt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=n+w;var R=c.get(w);R?R.push(g):c.set(w,[g])}}return c}function P_(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function RT(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function G_(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ho=null;function kT(){}function DT(n,s,o){if(ho===null)throw Error(i(475));var c=ho;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Ws(o.href),g=n.querySelector(uo(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=fu.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=g,Lt(g);return}g=n.ownerDocument||n,o=M_(o),(f=Nn.get(f))&&xd(o,f),g=g.createElement("link"),Lt(g);var w=g;w._p=new Promise(function(R,j){w.onload=R,w.onerror=j}),Vt(g,"link",o),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=fu.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function NT(){if(ho===null)throw Error(i(475));var n=ho;return n.stylesheets&&n.count===0&&Ld(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&Ld(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function fu(){if(this.count--,this.count===0){if(this.stylesheets)Ld(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var pu=null;function Ld(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,pu=new Map,s.forEach(IT,n),pu=null,fu.call(n))}function IT(n,s){if(!(s.state.loading&4)){var o=pu.get(n);if(o)var c=o.get(null);else{o=new Map,pu.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var w=f[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),c=w)}c&&o.set(null,c)}f=s.instance,w=f.getAttribute("data-precedence"),g=o.get(w)||c,g===c&&o.set(null,f),o.set(w,f),this.count++,c=fu.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var fo={$$typeof:O,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function xT(n,s,o,c,f,g,w,R){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.hiddenUpdates=Fi(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function B_(n,s,o,c,f,g,w,R,j,te,fe,me){return n=new xT(n,s,o,w,R,j,te,me),s=1,g===!0&&(s|=24),g=pn(3,null,null,s),n.current=g,g.stateNode=n,s=gh(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},yh(g),n}function F_(n){return n?(n=Ts,n):Ts}function H_(n,s,o,c,f,g){f=F_(f),c.context===null?c.context=f:c.pendingContext=f,c=Wi(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=$i(n,c,s),o!==null&&(yn(o,n,s),Ha(o,n,s))}function j_(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Md(n,s){j_(n,s),(n=n.alternate)&&j_(n,s)}function q_(n){if(n.tag===13){var s=Ss(n,67108864);s!==null&&yn(s,n,67108864),Md(n,67108864)}}var gu=!0;function OT(n,s,o,c){var f=P.T;P.T=null;var g=I.p;try{I.p=2,Ud(n,s,o,c)}finally{I.p=g,P.T=f}}function LT(n,s,o,c){var f=P.T;P.T=null;var g=I.p;try{I.p=8,Ud(n,s,o,c)}finally{I.p=g,P.T=f}}function Ud(n,s,o,c){if(gu){var f=zd(c);if(f===null)Sd(n,s,c,mu,o),W_(n,c);else if(UT(f,n,s,o,c))c.stopPropagation();else if(W_(n,c),s&4&&-1<MT.indexOf(n)){for(;f!==null;){var g=hs(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=$t(g.pendingLanes);if(w!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;w;){var j=1<<31-Re(w);R.entanglements[1]|=j,w&=~j}ni(g),(rt&6)===0&&(Jl=z()+500,so(0))}}break;case 13:R=Ss(g,2),R!==null&&yn(R,g,2),tu(),Md(g,2)}if(g=zd(c),g===null&&Sd(n,s,c,mu,o),g===f)break;f=g}f!==null&&c.stopPropagation()}else Sd(n,s,c,null,o)}}function zd(n){return n=Hc(n),Pd(n)}var mu=null;function Pd(n){if(mu=null,n=cs(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return mu=n,null}function V_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(M()){case K:return 2;case ge:return 8;case F:case H:return 32;case oe:return 268435456;default:return 32}default:return 32}}var Gd=!1,ar=null,or=null,lr=null,po=new Map,go=new Map,ur=[],MT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function W_(n,s){switch(n){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":po.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":go.delete(s.pointerId)}}function mo(n,s,o,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=hs(s),s!==null&&q_(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function UT(n,s,o,c,f){switch(s){case"focusin":return ar=mo(ar,n,s,o,c,f),!0;case"dragenter":return or=mo(or,n,s,o,c,f),!0;case"mouseover":return lr=mo(lr,n,s,o,c,f),!0;case"pointerover":var g=f.pointerId;return po.set(g,mo(po.get(g)||null,n,s,o,c,f)),!0;case"gotpointercapture":return g=f.pointerId,go.set(g,mo(go.get(g)||null,n,s,o,c,f)),!0}return!1}function $_(n){var s=cs(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,DS(n.priority,function(){if(o.tag===13){var c=_n();c=Ic(c);var f=Ss(o,c);f!==null&&yn(f,o,c),Md(o,c)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vu(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=zd(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Fc=c,o.target.dispatchEvent(c),Fc=null}else return s=hs(o),s!==null&&q_(s),n.blockedOn=o,!1;s.shift()}return!0}function Y_(n,s,o){vu(n)&&o.delete(s)}function zT(){Gd=!1,ar!==null&&vu(ar)&&(ar=null),or!==null&&vu(or)&&(or=null),lr!==null&&vu(lr)&&(lr=null),po.forEach(Y_),go.forEach(Y_)}function _u(n,s){n.blockedOn===s&&(n.blockedOn=null,Gd||(Gd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zT)))}var yu=null;function K_(n){yu!==n&&(yu=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yu===n&&(yu=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],f=n[s+2];if(typeof c!="function"){if(Pd(c||o)===null)continue;break}var g=hs(o);g!==null&&(n.splice(s,3),s-=3,Ph(g,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function vo(n){function s(j){return _u(j,n)}ar!==null&&_u(ar,n),or!==null&&_u(or,n),lr!==null&&_u(lr,n),po.forEach(s),go.forEach(s);for(var o=0;o<ur.length;o++){var c=ur[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ur.length&&(o=ur[0],o.blockedOn===null);)$_(o),o.blockedOn===null&&ur.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],w=f[rn]||null;if(typeof g=="function")w||K_(o);else if(w){var R=null;if(g&&g.hasAttribute("formAction")){if(f=g,w=g[rn]||null)R=w.formAction;else if(Pd(f)!==null)continue}else R=w.action;typeof R=="function"?o[c+1]=R:(o.splice(c,3),c-=3),K_(o)}}}function Bd(n){this._internalRoot=n}bu.prototype.render=Bd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=_n();H_(o,c,n,s,null,null)},bu.prototype.unmount=Bd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;H_(n.current,2,null,n,null,null),tu(),s[us]=null}};function bu(n){this._internalRoot=n}bu.prototype.unstable_scheduleHydration=function(n){if(n){var s=dg();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ur.length&&s!==0&&s<ur[o].priority;o++);ur.splice(o,0,n),o===0&&$_(n)}};var Z_=e.version;if(Z_!=="19.1.0")throw Error(i(527,Z_,"19.1.0"));I.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=d(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var PT={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{le=Eu.inject(PT),be=Eu}catch{}}return yo.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,c="",f=dv,g=fv,w=pv,R=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(R=s.unstable_transitionCallbacks)),s=B_(n,1,!1,null,null,o,c,f,g,w,R,null),n[us]=s.current,wd(n),new Bd(s)},yo.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var c=!1,f="",g=dv,w=fv,R=pv,j=null,te=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(j=o.unstable_transitionCallbacks),o.formState!==void 0&&(te=o.formState)),s=B_(n,1,!0,s,o??null,c,f,g,w,R,j,te),s.context=F_(null),o=s.current,c=_n(),c=Ic(c),f=Wi(c),f.callback=null,$i(o,f,c),o=c,s.current.lanes=o,zn(s,o),ni(s),n[us]=s.current,wd(n),new bu(s)},yo.version="19.1.0",yo}var ay;function YT(){if(ay)return jd.exports;ay=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jd.exports=$T(),jd.exports}var KT=YT(),Su={exports:{}},oy;function ZT(){if(oy)return Su.exports;oy=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(D,W,V){return Function.prototype.apply.call(D,W,V)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:t=function(D){return Object.getOwnPropertyNames(D)};function i(N){console&&console.warn&&console.warn(N)}var a=Number.isNaN||function(D){return D!==D};function l(){l.init.call(this)}Su.exports=l,Su.exports.once=A,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function h(N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(N){if(typeof N!="number"||N<0||a(N))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+N+".");u=N}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||a(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function d(N){return N._maxListeners===void 0?l.defaultMaxListeners:N._maxListeners}l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(D){for(var W=[],V=1;V<arguments.length;V++)W.push(arguments[V]);var J=D==="error",Y=this._events;if(Y!==void 0)J=J&&Y.error===void 0;else if(!J)return!1;if(J){var ie;if(W.length>0&&(ie=W[0]),ie instanceof Error)throw ie;var ye=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw ye.context=ie,ye}var L=Y[D];if(L===void 0)return!1;if(typeof L=="function")e(L,this,W);else for(var x=L.length,T=S(L,x),V=0;V<x;++V)e(T[V],this,W);return!0};function p(N,D,W,V){var J,Y,ie;if(h(W),Y=N._events,Y===void 0?(Y=N._events=Object.create(null),N._eventsCount=0):(Y.newListener!==void 0&&(N.emit("newListener",D,W.listener?W.listener:W),Y=N._events),ie=Y[D]),ie===void 0)ie=Y[D]=W,++N._eventsCount;else if(typeof ie=="function"?ie=Y[D]=V?[W,ie]:[ie,W]:V?ie.unshift(W):ie.push(W),J=d(N),J>0&&ie.length>J&&!ie.warned){ie.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+ie.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=N,ye.type=D,ye.count=ie.length,i(ye)}return N}l.prototype.addListener=function(D,W){return p(this,D,W,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(D,W){return p(this,D,W,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(N,D,W){var V={fired:!1,wrapFn:void 0,target:N,type:D,listener:W},J=m.bind(V);return J.listener=W,V.wrapFn=J,J}l.prototype.once=function(D,W){return h(W),this.on(D,v(this,D,W)),this},l.prototype.prependOnceListener=function(D,W){return h(W),this.prependListener(D,v(this,D,W)),this},l.prototype.removeListener=function(D,W){var V,J,Y,ie,ye;if(h(W),J=this._events,J===void 0)return this;if(V=J[D],V===void 0)return this;if(V===W||V.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete J[D],J.removeListener&&this.emit("removeListener",D,V.listener||W));else if(typeof V!="function"){for(Y=-1,ie=V.length-1;ie>=0;ie--)if(V[ie]===W||V[ie].listener===W){ye=V[ie].listener,Y=ie;break}if(Y<0)return this;Y===0?V.shift():E(V,Y),V.length===1&&(J[D]=V[0]),J.removeListener!==void 0&&this.emit("removeListener",D,ye||W)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(D){var W,V,J;if(V=this._events,V===void 0)return this;if(V.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):V[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete V[D]),this;if(arguments.length===0){var Y=Object.keys(V),ie;for(J=0;J<Y.length;++J)ie=Y[J],ie!=="removeListener"&&this.removeAllListeners(ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=V[D],typeof W=="function")this.removeListener(D,W);else if(W!==void 0)for(J=W.length-1;J>=0;J--)this.removeListener(D,W[J]);return this};function _(N,D,W){var V=N._events;if(V===void 0)return[];var J=V[D];return J===void 0?[]:typeof J=="function"?W?[J.listener||J]:[J]:W?C(J):S(J,J.length)}l.prototype.listeners=function(D){return _(this,D,!0)},l.prototype.rawListeners=function(D){return _(this,D,!1)},l.listenerCount=function(N,D){return typeof N.listenerCount=="function"?N.listenerCount(D):y.call(N,D)},l.prototype.listenerCount=y;function y(N){var D=this._events;if(D!==void 0){var W=D[N];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function S(N,D){for(var W=new Array(D),V=0;V<D;++V)W[V]=N[V];return W}function E(N,D){for(;D+1<N.length;D++)N[D]=N[D+1];N.pop()}function C(N){for(var D=new Array(N.length),W=0;W<D.length;++W)D[W]=N[W].listener||N[W];return D}function A(N,D){return new Promise(function(W,V){function J(ie){N.removeListener(D,Y),V(ie)}function Y(){typeof N.removeListener=="function"&&N.removeListener("error",J),W([].slice.call(arguments))}O(N,D,Y,{once:!0}),D!=="error"&&k(N,J,{once:!0})})}function k(N,D,W){typeof N.on=="function"&&O(N,"error",D,W)}function O(N,D,W,V){if(typeof N.on=="function")V.once?N.once(D,W):N.on(D,W);else if(typeof N.addEventListener=="function")N.addEventListener(D,function J(Y){V.once&&N.removeEventListener(D,J),W(Y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof N)}return Su.exports}var l0=ZT();function XT(){const r=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const i in arguments[e])r[i]=arguments[e][i];return r}let It=XT;typeof Object.assign=="function"&&(It=Object.assign);function xn(r,e,t,i){const a=r._nodes.get(e);let l=null;return a&&(i==="mixed"?l=a.out&&a.out[t]||a.undirected&&a.undirected[t]:i==="directed"?l=a.out&&a.out[t]:l=a.undirected&&a.undirected[t]),l}function Wt(r){return typeof r=="object"&&r!==null}function u0(r){let e;for(e in r)return!1;return!0}function In(r,e,t){Object.defineProperty(r,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function Fn(r,e,t){const i={enumerable:!0,configurable:!0};typeof t=="function"?i.get=t:(i.value=t,i.writable=!1),Object.defineProperty(r,e,i)}function ly(r){return!(!Wt(r)||r.attributes&&!Array.isArray(r.attributes))}function QT(){let r=Math.floor(Math.random()*256)&255;return()=>r++}function Di(){const r=arguments;let e=null,t=-1;return{[Symbol.iterator](){return this},next(){let i=null;do{if(e===null){if(t++,t>=r.length)return{done:!0};e=r[t][Symbol.iterator]()}if(i=e.next(),i.done){e=null;continue}break}while(!0);return i}}}function da(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class ip extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class Ce extends ip{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ce.prototype.constructor)}}class we extends ip{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,we.prototype.constructor)}}class Le extends ip{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Le.prototype.constructor)}}function c0(r,e){this.key=r,this.attributes=e,this.clear()}c0.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function h0(r,e){this.key=r,this.attributes=e,this.clear()}h0.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function d0(r,e){this.key=r,this.attributes=e,this.clear()}d0.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function fa(r,e,t,i,a){this.key=e,this.attributes=a,this.undirected=r,this.source=t,this.target=i}fa.prototype.attach=function(){let r="out",e="in";this.undirected&&(r=e="undirected");const t=this.source.key,i=this.target.key;this.source[r][i]=this,!(this.undirected&&t===i)&&(this.target[e][t]=this)};fa.prototype.attachMulti=function(){let r="out",e="in";const t=this.source.key,i=this.target.key;this.undirected&&(r=e="undirected");const a=this.source[r],l=a[i];if(typeof l>"u"){a[i]=this,this.undirected&&t===i||(this.target[e][t]=this);return}l.previous=this,this.next=l,a[i]=this,this.target[e][t]=this};fa.prototype.detach=function(){const r=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),delete this.source[t][e],delete this.target[i][r]};fa.prototype.detachMulti=function(){const r=this.source.key,e=this.target.key;let t="out",i="in";this.undirected&&(t=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[i][r]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[i][r]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const f0=0,p0=1,JT=2,g0=3;function Mi(r,e,t,i,a,l,u){let h,d,p,m;if(i=""+i,t===f0){if(h=r._nodes.get(i),!h)throw new we(`Graph.${e}: could not find the "${i}" node in the graph.`);p=a,m=l}else if(t===g0){if(a=""+a,d=r._edges.get(a),!d)throw new we(`Graph.${e}: could not find the "${a}" edge in the graph.`);const v=d.source.key,_=d.target.key;if(i===v)h=d.target;else if(i===_)h=d.source;else throw new we(`Graph.${e}: the "${i}" node is not attached to the "${a}" edge (${v}, ${_}).`);p=l,m=u}else{if(d=r._edges.get(i),!d)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`);t===p0?h=d.source:h=d.target,p=a,m=l}return[h,p,m]}function eC(r,e,t){r.prototype[e]=function(i,a,l){const[u,h]=Mi(this,e,t,i,a,l);return u.attributes[h]}}function tC(r,e,t){r.prototype[e]=function(i,a){const[l]=Mi(this,e,t,i,a);return l.attributes}}function nC(r,e,t){r.prototype[e]=function(i,a,l){const[u,h]=Mi(this,e,t,i,a,l);return u.attributes.hasOwnProperty(h)}}function iC(r,e,t){r.prototype[e]=function(i,a,l,u){const[h,d,p]=Mi(this,e,t,i,a,l,u);return h.attributes[d]=p,this.emit("nodeAttributesUpdated",{key:h.key,type:"set",attributes:h.attributes,name:d}),this}}function rC(r,e,t){r.prototype[e]=function(i,a,l,u){const[h,d,p]=Mi(this,e,t,i,a,l,u);if(typeof p!="function")throw new Ce(`Graph.${e}: updater should be a function.`);const m=h.attributes,v=p(m[d]);return m[d]=v,this.emit("nodeAttributesUpdated",{key:h.key,type:"set",attributes:h.attributes,name:d}),this}}function sC(r,e,t){r.prototype[e]=function(i,a,l){const[u,h]=Mi(this,e,t,i,a,l);return delete u.attributes[h],this.emit("nodeAttributesUpdated",{key:u.key,type:"remove",attributes:u.attributes,name:h}),this}}function aC(r,e,t){r.prototype[e]=function(i,a,l){const[u,h]=Mi(this,e,t,i,a,l);if(!Wt(h))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return u.attributes=h,this.emit("nodeAttributesUpdated",{key:u.key,type:"replace",attributes:u.attributes}),this}}function oC(r,e,t){r.prototype[e]=function(i,a,l){const[u,h]=Mi(this,e,t,i,a,l);if(!Wt(h))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return It(u.attributes,h),this.emit("nodeAttributesUpdated",{key:u.key,type:"merge",attributes:u.attributes,data:h}),this}}function lC(r,e,t){r.prototype[e]=function(i,a,l){const[u,h]=Mi(this,e,t,i,a,l);if(typeof h!="function")throw new Ce(`Graph.${e}: provided updater is not a function.`);return u.attributes=h(u.attributes),this.emit("nodeAttributesUpdated",{key:u.key,type:"update",attributes:u.attributes}),this}}const uC=[{name:r=>`get${r}Attribute`,attacher:eC},{name:r=>`get${r}Attributes`,attacher:tC},{name:r=>`has${r}Attribute`,attacher:nC},{name:r=>`set${r}Attribute`,attacher:iC},{name:r=>`update${r}Attribute`,attacher:rC},{name:r=>`remove${r}Attribute`,attacher:sC},{name:r=>`replace${r}Attributes`,attacher:aC},{name:r=>`merge${r}Attributes`,attacher:oC},{name:r=>`update${r}Attributes`,attacher:lC}];function cC(r){uC.forEach(function({name:e,attacher:t}){t(r,e("Node"),f0),t(r,e("Source"),p0),t(r,e("Target"),JT),t(r,e("Opposite"),g0)})}function hC(r,e,t){r.prototype[e]=function(i,a){let l;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,h=""+a;if(a=arguments[2],l=xn(this,u,h,t),!l)throw new we(`Graph.${e}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,l=this._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return l.attributes[a]}}function dC(r,e,t){r.prototype[e]=function(i){let a;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const l=""+i,u=""+arguments[1];if(a=xn(this,l,u,t),!a)throw new we(`Graph.${e}: could not find an edge for the given path ("${l}" - "${u}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return a.attributes}}function fC(r,e,t){r.prototype[e]=function(i,a){let l;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,h=""+a;if(a=arguments[2],l=xn(this,u,h,t),!l)throw new we(`Graph.${e}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,l=this._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return l.attributes.hasOwnProperty(a)}}function pC(r,e,t){r.prototype[e]=function(i,a,l){let u;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+i,d=""+a;if(a=arguments[2],l=arguments[3],u=xn(this,h,d,t),!u)throw new we(`Graph.${e}: could not find an edge for the given path ("${h}" - "${d}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return u.attributes[a]=l,this.emit("edgeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:a}),this}}function gC(r,e,t){r.prototype[e]=function(i,a,l){let u;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const h=""+i,d=""+a;if(a=arguments[2],l=arguments[3],u=xn(this,h,d,t),!u)throw new we(`Graph.${e}: could not find an edge for the given path ("${h}" - "${d}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,u=this._edges.get(i),!u)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof l!="function")throw new Ce(`Graph.${e}: updater should be a function.`);return u.attributes[a]=l(u.attributes[a]),this.emit("edgeAttributesUpdated",{key:u.key,type:"set",attributes:u.attributes,name:a}),this}}function mC(r,e,t){r.prototype[e]=function(i,a){let l;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,h=""+a;if(a=arguments[2],l=xn(this,u,h,t),!l)throw new we(`Graph.${e}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,l=this._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete l.attributes[a],this.emit("edgeAttributesUpdated",{key:l.key,type:"remove",attributes:l.attributes,name:a}),this}}function vC(r,e,t){r.prototype[e]=function(i,a){let l;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,h=""+a;if(a=arguments[2],l=xn(this,u,h,t),!l)throw new we(`Graph.${e}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,l=this._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Wt(a))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return l.attributes=a,this.emit("edgeAttributesUpdated",{key:l.key,type:"replace",attributes:l.attributes}),this}}function _C(r,e,t){r.prototype[e]=function(i,a){let l;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,h=""+a;if(a=arguments[2],l=xn(this,u,h,t),!l)throw new we(`Graph.${e}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,l=this._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Wt(a))throw new Ce(`Graph.${e}: provided attributes are not a plain object.`);return It(l.attributes,a),this.emit("edgeAttributesUpdated",{key:l.key,type:"merge",attributes:l.attributes,data:a}),this}}function yC(r,e,t){r.prototype[e]=function(i,a){let l;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new Le(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Le(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const u=""+i,h=""+a;if(a=arguments[2],l=xn(this,u,h,t),!l)throw new we(`Graph.${e}: could not find an edge for the given path ("${u}" - "${h}").`)}else{if(t!=="mixed")throw new Le(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,l=this._edges.get(i),!l)throw new we(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof a!="function")throw new Ce(`Graph.${e}: provided updater is not a function.`);return l.attributes=a(l.attributes),this.emit("edgeAttributesUpdated",{key:l.key,type:"update",attributes:l.attributes}),this}}const bC=[{name:r=>`get${r}Attribute`,attacher:hC},{name:r=>`get${r}Attributes`,attacher:dC},{name:r=>`has${r}Attribute`,attacher:fC},{name:r=>`set${r}Attribute`,attacher:pC},{name:r=>`update${r}Attribute`,attacher:gC},{name:r=>`remove${r}Attribute`,attacher:mC},{name:r=>`replace${r}Attributes`,attacher:vC},{name:r=>`merge${r}Attributes`,attacher:_C},{name:r=>`update${r}Attributes`,attacher:yC}];function EC(r){bC.forEach(function({name:e,attacher:t}){t(r,e("Edge"),"mixed"),t(r,e("DirectedEdge"),"directed"),t(r,e("UndirectedEdge"),"undirected")})}const wC=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function SC(r,e,t,i){let a=!1;for(const l in e){if(l===i)continue;const u=e[l];if(a=t(u.key,u.attributes,u.source.key,u.target.key,u.source.attributes,u.target.attributes,u.undirected),r&&a)return u.key}}function TC(r,e,t,i){let a,l,u,h=!1;for(const d in e)if(d!==i){a=e[d];do{if(l=a.source,u=a.target,h=t(a.key,a.attributes,l.key,u.key,l.attributes,u.attributes,a.undirected),r&&h)return a.key;a=a.next}while(a!==void 0)}}function $d(r,e){const t=Object.keys(r),i=t.length;let a,l=0;return{[Symbol.iterator](){return this},next(){do if(a)a=a.next;else{if(l>=i)return{done:!0};const u=t[l++];if(u===e){a=void 0;continue}a=r[u]}while(!a);return{done:!1,value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected}}}}}function CC(r,e,t,i){const a=e[t];if(!a)return;const l=a.source,u=a.target;if(i(a.key,a.attributes,l.key,u.key,l.attributes,u.attributes,a.undirected)&&r)return a.key}function AC(r,e,t,i){let a=e[t];if(!a)return;let l=!1;do{if(l=i(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),r&&l)return a.key;a=a.next}while(a!==void 0)}function Yd(r,e){let t=r[e];if(t.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!t)return{done:!0};const a={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:a}}};let i=!1;return{[Symbol.iterator](){return this},next(){return i===!0?{done:!0}:(i=!0,{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}})}}}function RC(r,e){if(r.size===0)return[];if(e==="mixed"||e===r.type)return Array.from(r._edges.keys());const t=e==="undirected"?r.undirectedSize:r.directedSize,i=new Array(t),a=e==="undirected",l=r._edges.values();let u=0,h,d;for(;h=l.next(),h.done!==!0;)d=h.value,d.undirected===a&&(i[u++]=d.key);return i}function m0(r,e,t,i){if(e.size===0)return;const a=t!=="mixed"&&t!==e.type,l=t==="undirected";let u,h,d=!1;const p=e._edges.values();for(;u=p.next(),u.done!==!0;){if(h=u.value,a&&h.undirected!==l)continue;const{key:m,attributes:v,source:_,target:y}=h;if(d=i(m,v,_.key,y.key,_.attributes,y.attributes,h.undirected),r&&d)return m}}function kC(r,e){if(r.size===0)return da();const t=e!=="mixed"&&e!==r.type,i=e==="undirected",a=r._edges.values();return{[Symbol.iterator](){return this},next(){let l,u;for(;;){if(l=a.next(),l.done)return l;if(u=l.value,!(t&&u.undirected!==i))break}return{value:{edge:u.key,attributes:u.attributes,source:u.source.key,target:u.target.key,sourceAttributes:u.source.attributes,targetAttributes:u.target.attributes,undirected:u.undirected},done:!1}}}}function rp(r,e,t,i,a,l){const u=e?TC:SC;let h;if(t!=="undirected"&&(i!=="out"&&(h=u(r,a.in,l),r&&h)||i!=="in"&&(h=u(r,a.out,l,i?void 0:a.key),r&&h))||t!=="directed"&&(h=u(r,a.undirected,l),r&&h))return h}function DC(r,e,t,i){const a=[];return rp(!1,r,e,t,i,function(l){a.push(l)}),a}function NC(r,e,t){let i=da();return r!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(i=Di(i,$d(t.in))),e!=="in"&&typeof t.out<"u"&&(i=Di(i,$d(t.out,e?void 0:t.key)))),r!=="directed"&&typeof t.undirected<"u"&&(i=Di(i,$d(t.undirected))),i}function sp(r,e,t,i,a,l,u){const h=t?AC:CC;let d;if(e!=="undirected"&&(typeof a.in<"u"&&i!=="out"&&(d=h(r,a.in,l,u),r&&d)||typeof a.out<"u"&&i!=="in"&&(i||a.key!==l)&&(d=h(r,a.out,l,u),r&&d))||e!=="directed"&&typeof a.undirected<"u"&&(d=h(r,a.undirected,l,u),r&&d))return d}function IC(r,e,t,i,a){const l=[];return sp(!1,r,e,t,i,a,function(u){l.push(u)}),l}function xC(r,e,t,i){let a=da();return r!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&i in t.in&&(a=Di(a,Yd(t.in,i))),typeof t.out<"u"&&e!=="in"&&i in t.out&&(e||t.key!==i)&&(a=Di(a,Yd(t.out,i)))),r!=="directed"&&typeof t.undirected<"u"&&i in t.undirected&&(a=Di(a,Yd(t.undirected,i))),a}function OC(r,e){const{name:t,type:i,direction:a}=e;r.prototype[t]=function(l,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return RC(this,i);if(arguments.length===1){l=""+l;const h=this._nodes.get(l);if(typeof h>"u")throw new we(`Graph.${t}: could not find the "${l}" node in the graph.`);return DC(this.multi,i==="mixed"?this.type:i,a,h)}if(arguments.length===2){l=""+l,u=""+u;const h=this._nodes.get(l);if(!h)throw new we(`Graph.${t}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new we(`Graph.${t}:  could not find the "${u}" target node in the graph.`);return IC(i,this.multi,a,h,u)}throw new Ce(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function LC(r,e){const{name:t,type:i,direction:a}=e,l="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[l]=function(p,m,v){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return v=p,m0(!1,this,i,v);if(arguments.length===2){p=""+p,v=m;const _=this._nodes.get(p);if(typeof _>"u")throw new we(`Graph.${l}: could not find the "${p}" node in the graph.`);return rp(!1,this.multi,i==="mixed"?this.type:i,a,_,v)}if(arguments.length===3){p=""+p,m=""+m;const _=this._nodes.get(p);if(!_)throw new we(`Graph.${l}:  could not find the "${p}" source node in the graph.`);if(!this._nodes.has(m))throw new we(`Graph.${l}:  could not find the "${m}" target node in the graph.`);return sp(!1,i,this.multi,a,_,m,v)}throw new Ce(`Graph.${l}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const u="map"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(){const p=Array.prototype.slice.call(arguments),m=p.pop();let v;if(p.length===0){let _=0;i!=="directed"&&(_+=this.undirectedSize),i!=="undirected"&&(_+=this.directedSize),v=new Array(_);let y=0;p.push((S,E,C,A,k,O,N)=>{v[y++]=m(S,E,C,A,k,O,N)})}else v=[],p.push((_,y,S,E,C,A,k)=>{v.push(m(_,y,S,E,C,A,k))});return this[l].apply(this,p),v};const h="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[h]=function(){const p=Array.prototype.slice.call(arguments),m=p.pop(),v=[];return p.push((_,y,S,E,C,A,k)=>{m(_,y,S,E,C,A,k)&&v.push(_)}),this[l].apply(this,p),v};const d="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[d]=function(){let p=Array.prototype.slice.call(arguments);if(p.length<2||p.length>4)throw new Ce(`Graph.${d}: invalid number of arguments (expecting 2, 3 or 4 and got ${p.length}).`);if(typeof p[p.length-1]=="function"&&typeof p[p.length-2]!="function")throw new Ce(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m,v;p.length===2?(m=p[0],v=p[1],p=[]):p.length===3?(m=p[1],v=p[2],p=[p[0]]):p.length===4&&(m=p[2],v=p[3],p=[p[0],p[1]]);let _=v;return p.push((y,S,E,C,A,k,O)=>{_=m(_,y,S,E,C,A,k,O)}),this[l].apply(this,p),_}}function MC(r,e){const{name:t,type:i,direction:a}=e,l="find"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[l]=function(d,p,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return m=d,m0(!0,this,i,m);if(arguments.length===2){d=""+d,m=p;const v=this._nodes.get(d);if(typeof v>"u")throw new we(`Graph.${l}: could not find the "${d}" node in the graph.`);return rp(!0,this.multi,i==="mixed"?this.type:i,a,v,m)}if(arguments.length===3){d=""+d,p=""+p;const v=this._nodes.get(d);if(!v)throw new we(`Graph.${l}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(p))throw new we(`Graph.${l}:  could not find the "${p}" target node in the graph.`);return sp(!0,i,this.multi,a,v,p,m)}throw new Ce(`Graph.${l}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const u="some"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[u]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();return d.push((v,_,y,S,E,C,A)=>p(v,_,y,S,E,C,A)),!!this[l].apply(this,d)};const h="every"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[h]=function(){const d=Array.prototype.slice.call(arguments),p=d.pop();return d.push((v,_,y,S,E,C,A)=>!p(v,_,y,S,E,C,A)),!this[l].apply(this,d)}}function UC(r,e){const{name:t,type:i,direction:a}=e,l=t.slice(0,-1)+"Entries";r.prototype[l]=function(u,h){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return da();if(!arguments.length)return kC(this,i);if(arguments.length===1){u=""+u;const d=this._nodes.get(u);if(!d)throw new we(`Graph.${l}: could not find the "${u}" node in the graph.`);return NC(i,a,d)}if(arguments.length===2){u=""+u,h=""+h;const d=this._nodes.get(u);if(!d)throw new we(`Graph.${l}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new we(`Graph.${l}:  could not find the "${h}" target node in the graph.`);return xC(i,a,d,h)}throw new Ce(`Graph.${l}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function zC(r){wC.forEach(e=>{OC(r,e),LC(r,e),MC(r,e),UC(r,e)})}const PC=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function hc(){this.A=null,this.B=null}hc.prototype.wrap=function(r){this.A===null?this.A=r:this.B===null&&(this.B=r)};hc.prototype.has=function(r){return this.A!==null&&r in this.A||this.B!==null&&r in this.B};function bo(r,e,t,i,a){for(const l in i){const u=i[l],h=u.source,d=u.target,p=h===t?d:h;if(e&&e.has(p.key))continue;const m=a(p.key,p.attributes);if(r&&m)return p.key}}function ap(r,e,t,i,a){if(e!=="mixed"){if(e==="undirected")return bo(r,null,i,i.undirected,a);if(typeof t=="string")return bo(r,null,i,i[t],a)}const l=new hc;let u;if(e!=="undirected"){if(t!=="out"){if(u=bo(r,null,i,i.in,a),r&&u)return u;l.wrap(i.in)}if(t!=="in"){if(u=bo(r,l,i,i.out,a),r&&u)return u;l.wrap(i.out)}}if(e!=="directed"&&(u=bo(r,l,i,i.undirected,a),r&&u))return u}function GC(r,e,t){if(r!=="mixed"){if(r==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const i=[];return ap(!1,r,e,t,function(a){i.push(a)}),i}function Eo(r,e,t){const i=Object.keys(t),a=i.length;let l=0;return{[Symbol.iterator](){return this},next(){let u=null;do{if(l>=a)return r&&r.wrap(t),{done:!0};const h=t[i[l++]],d=h.source,p=h.target;if(u=d===e?p:d,r&&r.has(u.key)){u=null;continue}}while(u===null);return{done:!1,value:{neighbor:u.key,attributes:u.attributes}}}}}function BC(r,e,t){if(r!=="mixed"){if(r==="undirected")return Eo(null,t,t.undirected);if(typeof e=="string")return Eo(null,t,t[e])}let i=da();const a=new hc;return r!=="undirected"&&(e!=="out"&&(i=Di(i,Eo(a,t,t.in))),e!=="in"&&(i=Di(i,Eo(a,t,t.out)))),r!=="directed"&&(i=Di(i,Eo(a,t,t.undirected))),i}function FC(r,e){const{name:t,type:i,direction:a}=e;r.prototype[t]=function(l){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];l=""+l;const u=this._nodes.get(l);if(typeof u>"u")throw new we(`Graph.${t}: could not find the "${l}" node in the graph.`);return GC(i==="mixed"?this.type:i,a,u)}}function HC(r,e){const{name:t,type:i,direction:a}=e,l="forEach"+t[0].toUpperCase()+t.slice(1,-1);r.prototype[l]=function(p,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;p=""+p;const v=this._nodes.get(p);if(typeof v>"u")throw new we(`Graph.${l}: could not find the "${p}" node in the graph.`);ap(!1,i==="mixed"?this.type:i,a,v,m)};const u="map"+t[0].toUpperCase()+t.slice(1);r.prototype[u]=function(p,m){const v=[];return this[l](p,(_,y)=>{v.push(m(_,y))}),v};const h="filter"+t[0].toUpperCase()+t.slice(1);r.prototype[h]=function(p,m){const v=[];return this[l](p,(_,y)=>{m(_,y)&&v.push(_)}),v};const d="reduce"+t[0].toUpperCase()+t.slice(1);r.prototype[d]=function(p,m,v){if(arguments.length<3)throw new Ce(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let _=v;return this[l](p,(y,S)=>{_=m(_,y,S)}),_}}function jC(r,e){const{name:t,type:i,direction:a}=e,l=t[0].toUpperCase()+t.slice(1,-1),u="find"+l;r.prototype[u]=function(p,m){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;p=""+p;const v=this._nodes.get(p);if(typeof v>"u")throw new we(`Graph.${u}: could not find the "${p}" node in the graph.`);return ap(!0,i==="mixed"?this.type:i,a,v,m)};const h="some"+l;r.prototype[h]=function(p,m){return!!this[u](p,m)};const d="every"+l;r.prototype[d]=function(p,m){return!this[u](p,(_,y)=>!m(_,y))}}function qC(r,e){const{name:t,type:i,direction:a}=e,l=t.slice(0,-1)+"Entries";r.prototype[l]=function(u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return da();u=""+u;const h=this._nodes.get(u);if(typeof h>"u")throw new we(`Graph.${l}: could not find the "${u}" node in the graph.`);return BC(i==="mixed"?this.type:i,a,h)}}function VC(r){PC.forEach(e=>{FC(r,e),HC(r,e),jC(r,e),qC(r,e)})}function Tu(r,e,t,i,a){const l=i._nodes.values(),u=i.type;let h,d,p,m,v,_;for(;h=l.next(),h.done!==!0;){let y=!1;if(d=h.value,u!=="undirected"){m=d.out;for(p in m){v=m[p];do _=v.target,y=!0,a(d.key,_.key,d.attributes,_.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}if(u!=="directed"){m=d.undirected;for(p in m)if(!(e&&d.key>p)){v=m[p];do _=v.target,_.key!==p&&(_=v.source),y=!0,a(d.key,_.key,d.attributes,_.attributes,v.key,v.attributes,v.undirected),v=v.next;while(v)}}t&&!y&&a(d.key,null,d.attributes,null,null,null,null)}}function WC(r,e){const t={key:r};return u0(e.attributes)||(t.attributes=It({},e.attributes)),t}function $C(r,e,t){const i={key:e,source:t.source.key,target:t.target.key};return u0(t.attributes)||(i.attributes=It({},t.attributes)),r==="mixed"&&t.undirected&&(i.undirected=!0),i}function YC(r){if(!Wt(r))throw new Ce('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in r))throw new Ce("Graph.import: serialized node is missing its key.");if("attributes"in r&&(!Wt(r.attributes)||r.attributes===null))throw new Ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function KC(r){if(!Wt(r))throw new Ce('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in r))throw new Ce("Graph.import: serialized edge is missing its source.");if(!("target"in r))throw new Ce("Graph.import: serialized edge is missing its target.");if("attributes"in r&&(!Wt(r.attributes)||r.attributes===null))throw new Ce("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in r&&typeof r.undirected!="boolean")throw new Ce("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const ZC=QT(),XC=new Set(["directed","undirected","mixed"]),uy=new Set(["domain","_events","_eventsCount","_maxListeners"]),QC=[{name:r=>`${r}Edge`,generateKey:!0},{name:r=>`${r}DirectedEdge`,generateKey:!0,type:"directed"},{name:r=>`${r}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:r=>`${r}EdgeWithKey`},{name:r=>`${r}DirectedEdgeWithKey`,type:"directed"},{name:r=>`${r}UndirectedEdgeWithKey`,type:"undirected"}],JC={allowSelfLoops:!0,multi:!1,type:"mixed"};function eA(r,e,t){if(t&&!Wt(t))throw new Ce(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},r._nodes.has(e))throw new Le(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new r.NodeDataClass(e,t);return r._nodes.set(e,i),r.emit("nodeAdded",{key:e,attributes:t}),i}function cy(r,e,t){const i=new r.NodeDataClass(e,t);return r._nodes.set(e,i),r.emit("nodeAdded",{key:e,attributes:t}),i}function v0(r,e,t,i,a,l,u,h){if(!i&&r.type==="undirected")throw new Le(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&r.type==="directed")throw new Le(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(h&&!Wt(h))throw new Ce(`Graph.${e}: invalid attributes. Expecting an object but got "${h}"`);if(l=""+l,u=""+u,h=h||{},!r.allowSelfLoops&&l===u)throw new Le(`Graph.${e}: source & target are the same ("${l}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const d=r._nodes.get(l),p=r._nodes.get(u);if(!d)throw new we(`Graph.${e}: source node "${l}" not found.`);if(!p)throw new we(`Graph.${e}: target node "${u}" not found.`);const m={key:null,undirected:i,source:l,target:u,attributes:h};if(t)a=r._edgeKeyGenerator();else if(a=""+a,r._edges.has(a))throw new Le(`Graph.${e}: the "${a}" edge already exists in the graph.`);if(!r.multi&&(i?typeof d.undirected[u]<"u":typeof d.out[u]<"u"))throw new Le(`Graph.${e}: an edge linking "${l}" to "${u}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const v=new fa(i,a,d,p,h);r._edges.set(a,v);const _=l===u;return i?(d.undirectedDegree++,p.undirectedDegree++,_&&(d.undirectedLoops++,r._undirectedSelfLoopCount++)):(d.outDegree++,p.inDegree++,_&&(d.directedLoops++,r._directedSelfLoopCount++)),r.multi?v.attachMulti():v.attach(),i?r._undirectedSize++:r._directedSize++,m.key=a,r.emit("edgeAdded",m),a}function tA(r,e,t,i,a,l,u,h,d){if(!i&&r.type==="undirected")throw new Le(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&r.type==="directed")throw new Le(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(h){if(d){if(typeof h!="function")throw new Ce(`Graph.${e}: invalid updater function. Expecting a function but got "${h}"`)}else if(!Wt(h))throw new Ce(`Graph.${e}: invalid attributes. Expecting an object but got "${h}"`)}l=""+l,u=""+u;let p;if(d&&(p=h,h=void 0),!r.allowSelfLoops&&l===u)throw new Le(`Graph.${e}: source & target are the same ("${l}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let m=r._nodes.get(l),v=r._nodes.get(u),_,y;if(!t&&(_=r._edges.get(a),_)){if((_.source.key!==l||_.target.key!==u)&&(!i||_.source.key!==u||_.target.key!==l))throw new Le(`Graph.${e}: inconsistency detected when attempting to merge the "${a}" edge with "${l}" source & "${u}" target vs. ("${_.source.key}", "${_.target.key}").`);y=_}if(!y&&!r.multi&&m&&(y=i?m.undirected[u]:m.out[u]),y){const k=[y.key,!1,!1,!1];if(d?!p:!h)return k;if(d){const O=y.attributes;y.attributes=p(O),r.emit("edgeAttributesUpdated",{type:"replace",key:y.key,attributes:y.attributes})}else It(y.attributes,h),r.emit("edgeAttributesUpdated",{type:"merge",key:y.key,attributes:y.attributes,data:h});return k}h=h||{},d&&p&&(h=p(h));const S={key:null,undirected:i,source:l,target:u,attributes:h};if(t)a=r._edgeKeyGenerator();else if(a=""+a,r._edges.has(a))throw new Le(`Graph.${e}: the "${a}" edge already exists in the graph.`);let E=!1,C=!1;m||(m=cy(r,l,{}),E=!0,l===u&&(v=m,C=!0)),v||(v=cy(r,u,{}),C=!0),_=new fa(i,a,m,v,h),r._edges.set(a,_);const A=l===u;return i?(m.undirectedDegree++,v.undirectedDegree++,A&&(m.undirectedLoops++,r._undirectedSelfLoopCount++)):(m.outDegree++,v.inDegree++,A&&(m.directedLoops++,r._directedSelfLoopCount++)),r.multi?_.attachMulti():_.attach(),i?r._undirectedSize++:r._directedSize++,S.key=a,r.emit("edgeAdded",S),[a,!0,E,C]}function Ys(r,e){r._edges.delete(e.key);const{source:t,target:i,attributes:a}=e,l=e.undirected,u=t===i;l?(t.undirectedDegree--,i.undirectedDegree--,u&&(t.undirectedLoops--,r._undirectedSelfLoopCount--)):(t.outDegree--,i.inDegree--,u&&(t.directedLoops--,r._directedSelfLoopCount--)),r.multi?e.detachMulti():e.detach(),l?r._undirectedSize--:r._directedSize--,r.emit("edgeDropped",{key:e.key,attributes:a,source:t.key,target:i.key,undirected:l})}class ht extends l0.EventEmitter{constructor(e){if(super(),e=It({},JC,e),typeof e.multi!="boolean")throw new Ce(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!XC.has(e.type))throw new Ce(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new Ce(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?c0:e.type==="directed"?h0:d0;In(this,"NodeDataClass",t);const i="geid_"+ZC()+"_";let a=0;const l=()=>{let u;do u=i+a++;while(this._edges.has(u));return u};In(this,"_attributes",{}),In(this,"_nodes",new Map),In(this,"_edges",new Map),In(this,"_directedSize",0),In(this,"_undirectedSize",0),In(this,"_directedSelfLoopCount",0),In(this,"_undirectedSelfLoopCount",0),In(this,"_edgeKeyGenerator",l),In(this,"_options",e),uy.forEach(u=>In(this,u,this[u])),Fn(this,"order",()=>this._nodes.size),Fn(this,"size",()=>this._edges.size),Fn(this,"directedSize",()=>this._directedSize),Fn(this,"undirectedSize",()=>this._undirectedSize),Fn(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Fn(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Fn(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Fn(this,"multi",this._options.multi),Fn(this,"type",this._options.type),Fn(this,"allowSelfLoops",this._options.allowSelfLoops),Fn(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,a=this._edges.get(i);return!!a&&!a.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(t):!1}throw new Ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,a=this._edges.get(i);return!!a&&a.undirected}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(t):!1}throw new Ce(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,t=""+t;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(t)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(t):!1}throw new Ce(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new Le("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new we(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new we(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const a=i.out&&i.out[t]||void 0;if(a)return a.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new Le("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new we(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new we(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const a=i.undirected&&i.undirected[t]||void 0;if(a)return a.key}edge(e,t){if(this.multi)throw new Le("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new we(`Graph.edge: could not find the "${t}" target node in the graph.`);const a=i.out&&i.out[t]||i.undirected&&i.undirected[t]||void 0;if(a)return a.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in||t in i.out}areOutNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.out}areInNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in i.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in i.undirected}areNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in i.in||t in i.out)||this.type!=="directed"&&t in i.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.in||this.type!=="directed"&&t in i.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const i=this._nodes.get(e);if(!i)throw new we(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in i.out||this.type!=="directed"&&t in i.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree),i}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.outDegree),i}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=t.undirectedDegree),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=t.undirectedDegree,a+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree,a+=t.directedLoops),i-a}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=t.undirectedDegree,a+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.outDegree,a+=t.directedLoops),i-a}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,a=0;return this.type!=="directed"&&(i+=t.undirectedDegree,a+=t.undirectedLoops*2),this.type!=="undirected"&&(i+=t.inDegree+t.outDegree,a+=t.directedLoops*2),i-a}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const i=this._edges.get(t);if(!i)throw new we(`Graph.opposite: could not find the "${t}" edge in the graph.`);const a=i.source.key,l=i.target.key;if(e===a)return l;if(e===l)return a;throw new we(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${a}, ${l}).`)}hasExtremity(e,t){e=""+e,t=""+t;const i=this._edges.get(e);if(!i)throw new we(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===t||i.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new we(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return eA(this,e,t).key}mergeNode(e,t){if(t&&!Wt(t))throw new Ce(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let i=this._nodes.get(e);return i?(t&&(It(i.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:t})),[e,!1]):(i=new this.NodeDataClass(e,t),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new Ce(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let i=this._nodes.get(e);if(i){if(t){const l=i.attributes;i.attributes=t(l),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const a=t?t({}):{};return i=new this.NodeDataClass(e,a),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:a}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new we(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const a in t.out){i=t.out[a];do Ys(this,i),i=i.next;while(i)}for(const a in t.in){i=t.in[a];do Ys(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const a in t.undirected){i=t.undirected[a];do Ys(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const i=""+arguments[0],a=""+arguments[1];if(t=xn(this,i,a,this.type),!t)throw new we(`Graph.dropEdge: could not find the "${i}" -> "${a}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new we(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Ys(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new Le("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Le("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const i=xn(this,e,t,"directed");if(!i)throw new we(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Ys(this,i),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new Le("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Le("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=xn(this,e,t,"undirected");if(!i)throw new we(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return Ys(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new Ce("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=t(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Wt(e))throw new Ce("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Wt(e))throw new Ce("Graph.mergeAttributes: provided attributes are not a plain object.");return It(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new Ce("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new Ce("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!ly(t))throw new Ce("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let a,l;for(;a=i.next(),a.done!==!0;)l=a.value,l.attributes=e(l.key,l.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new Ce("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!ly(t))throw new Ce("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let a,l,u,h;for(;a=i.next(),a.done!==!0;)l=a.value,u=l.source,h=l.target,l.attributes=e(l.key,l.attributes,u.key,h.key,u.attributes,h.attributes,l.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new Ce("Graph.forEachAdjacencyEntry: expecting a callback.");Tu(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ce("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Tu(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new Ce("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Tu(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new Ce("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Tu(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new Ce("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let i,a;for(;i=t.next(),i.done!==!0;)a=i.value,e(a.key,a.attributes)}findNode(e){if(typeof e!="function")throw new Ce("Graph.findNode: expecting a callback.");const t=this._nodes.values();let i,a;for(;i=t.next(),i.done!==!0;)if(a=i.value,e(a.key,a.attributes))return a.key}mapNodes(e){if(typeof e!="function")throw new Ce("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let i,a;const l=new Array(this.order);let u=0;for(;i=t.next(),i.done!==!0;)a=i.value,l[u++]=e(a.key,a.attributes);return l}someNode(e){if(typeof e!="function")throw new Ce("Graph.someNode: expecting a callback.");const t=this._nodes.values();let i,a;for(;i=t.next(),i.done!==!0;)if(a=i.value,e(a.key,a.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new Ce("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let i,a;for(;i=t.next(),i.done!==!0;)if(a=i.value,!e(a.key,a.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new Ce("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let i,a;const l=[];for(;i=t.next(),i.done!==!0;)a=i.value,e(a.key,a.attributes)&&l.push(a.key);return l}reduceNodes(e,t){if(typeof e!="function")throw new Ce("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new Ce("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=t;const a=this._nodes.values();let l,u;for(;l=a.next(),l.done!==!0;)u=l.value,i=e(i,u.key,u.attributes);return i}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=e.next();if(t.done)return t;const i=t.value;return{value:{node:i.key,attributes:i.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((a,l)=>{e[t++]=WC(l,a)});const i=new Array(this._edges.size);return t=0,this._edges.forEach((a,l)=>{i[t++]=$C(this.type,l,a)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,t=!1){if(e instanceof ht)return e.forEachNode((d,p)=>{t?this.mergeNode(d,p):this.addNode(d,p)}),e.forEachEdge((d,p,m,v,_,y,S)=>{t?S?this.mergeUndirectedEdgeWithKey(d,m,v,p):this.mergeDirectedEdgeWithKey(d,m,v,p):S?this.addUndirectedEdgeWithKey(d,m,v,p):this.addDirectedEdgeWithKey(d,m,v,p)}),this;if(!Wt(e))throw new Ce("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Wt(e.attributes))throw new Ce("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,a,l,u,h;if(e.nodes){if(l=e.nodes,!Array.isArray(l))throw new Ce("Graph.import: invalid nodes. Expecting an array.");for(i=0,a=l.length;i<a;i++){u=l[i],YC(u);const{key:d,attributes:p}=u;t?this.mergeNode(d,p):this.addNode(d,p)}}if(e.edges){let d=!1;if(this.type==="undirected"&&(d=!0),l=e.edges,!Array.isArray(l))throw new Ce("Graph.import: invalid edges. Expecting an array.");for(i=0,a=l.length;i<a;i++){h=l[i],KC(h);const{source:p,target:m,attributes:v,undirected:_=d}=h;let y;"key"in h?(y=t?_?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:_?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,y.call(this,h.key,p,m,v)):(y=t?_?this.mergeUndirectedEdge:this.mergeDirectedEdge:_?this.addUndirectedEdge:this.addDirectedEdge,y.call(this,p,m,v))}}return this}nullCopy(e){const t=new ht(It({},this._options,e));return t.replaceAttributes(It({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((i,a)=>{const l=It({},i.attributes);i=new t.NodeDataClass(a,l),t._nodes.set(a,i)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Le(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Le("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Le("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),i=this._edges.values();let a,l;for(;a=i.next(),a.done!==!0;)l=a.value,v0(t,"copy",!1,l.undirected,l.key,l.source.key,l.target.key,It({},l.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((l,u)=>{e[u]=l.attributes});const t={},i={};this._edges.forEach((l,u)=>{const h=l.undirected?"--":"->";let d="",p=l.source.key,m=l.target.key,v;l.undirected&&p>m&&(v=p,p=m,m=v);const _=`(${p})${h}(${m})`;u.startsWith("geid_")?this.multi&&(typeof i[_]>"u"?i[_]=0:i[_]++,d+=`${i[_]}. `):d+=`[${u}]: `,d+=_,t[d]=l.attributes});const a={};for(const l in this)this.hasOwnProperty(l)&&!uy.has(l)&&typeof this[l]!="function"&&typeof l!="symbol"&&(a[l]=this[l]);return a.attributes=this._attributes,a.nodes=e,a.edges=t,In(a,"constructor",this.constructor),a}}typeof Symbol<"u"&&(ht.prototype[Symbol.for("nodejs.util.inspect.custom")]=ht.prototype.inspect);QC.forEach(r=>{["add","merge","update"].forEach(e=>{const t=r.name(e),i=e==="add"?v0:tA;r.generateKey?ht.prototype[t]=function(a,l,u){return i(this,t,!0,(r.type||this.type)==="undirected",null,a,l,u,e==="update")}:ht.prototype[t]=function(a,l,u,h){return i(this,t,!1,(r.type||this.type)==="undirected",a,l,u,h,e==="update")}})});cC(ht);EC(ht);zC(ht);VC(ht);class _0 extends ht{constructor(e){const t=It({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new Ce("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new Ce('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class y0 extends ht{constructor(e){const t=It({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new Ce("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new Ce('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class b0 extends ht{constructor(e){const t=It({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ce("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class E0 extends ht{constructor(e){const t=It({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ce("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new Ce('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class w0 extends ht{constructor(e){const t=It({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new Ce("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new Ce('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function pa(r){r.from=function(e,t){const i=It({},e.options,t),a=new r(i);return a.import(e),a}}pa(ht);pa(_0);pa(y0);pa(b0);pa(E0);pa(w0);ht.Graph=ht;ht.DirectedGraph=_0;ht.UndirectedGraph=y0;ht.MultiGraph=b0;ht.MultiDirectedGraph=E0;ht.MultiUndirectedGraph=w0;ht.InvalidArgumentsGraphError=Ce;ht.NotFoundGraphError=we;ht.UsageGraphError=Le;function nA(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Oo(r){var e=nA(r,"string");return typeof e=="symbol"?e:e+""}function Qt(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function hy(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,Oo(i.key),i)}}function Jt(r,e,t){return e&&hy(r.prototype,e),t&&hy(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function aa(r){return aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aa(r)}function S0(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S0=function(){return!!r})()}function iA(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function rA(r,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iA(r)}function Mn(r,e,t){return e=aa(e),rA(r,S0()?Reflect.construct(e,t||[],aa(r).constructor):e.apply(r,t))}function kf(r,e){return kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},kf(r,e)}function Un(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&kf(r,e)}function sA(r){if(Array.isArray(r))return r}function aA(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var i,a,l,u,h=[],d=!0,p=!1;try{if(l=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;d=!1}else for(;!(d=(i=l.call(t)).done)&&(h.push(i.value),h.length!==e);d=!0);}catch(m){p=!0,a=m}finally{try{if(!d&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(p)throw a}}return h}}function Df(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,i=Array(e);t<e;t++)i[t]=r[t];return i}function T0(r,e){if(r){if(typeof r=="string")return Df(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Df(r,e):void 0}}function oA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oa(r,e){return sA(r)||aA(r,e)||T0(r,e)||oA()}var Kd={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},C0=new Int8Array(4),Zd=new Int32Array(C0.buffer,0,1),lA=new Float32Array(C0.buffer,0,1),uA=/^\s*rgba?\s*\(/,cA=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function hA(r){var e=0,t=0,i=0,a=1;if(r[0]==="#")r.length===4?(e=parseInt(r.charAt(1)+r.charAt(1),16),t=parseInt(r.charAt(2)+r.charAt(2),16),i=parseInt(r.charAt(3)+r.charAt(3),16)):(e=parseInt(r.charAt(1)+r.charAt(2),16),t=parseInt(r.charAt(3)+r.charAt(4),16),i=parseInt(r.charAt(5)+r.charAt(6),16)),r.length===9&&(a=parseInt(r.charAt(7)+r.charAt(8),16)/255);else if(uA.test(r)){var l=r.match(cA);l&&(e=+l[1],t=+l[2],i=+l[3],l[4]&&(a=+l[4]))}return{r:e,g:t,b:i,a}}var ea={};for(var Cu in Kd)ea[Cu]=tl(Kd[Cu]),ea[Kd[Cu]]=ea[Cu];function A0(r,e,t,i,a){return Zd[0]=i<<24|t<<16|e<<8|r,Zd[0]=Zd[0]&4278190079,lA[0]}function tl(r){if(r=r.toLowerCase(),typeof ea[r]<"u")return ea[r];var e=hA(r),t=e.r,i=e.g,a=e.b,l=e.a;l=l*255|0;var u=A0(t,i,a,l);return ea[r]=u,u}var Xd={};function R0(r){if(typeof Xd[r]<"u")return Xd[r];var e=(r&16711680)>>>16,t=(r&65280)>>>8,i=r&255,a=255,l=A0(e,t,i,a);return Xd[r]=l,l}function dy(r,e,t,i){return t+(e<<8)+(r<<16)}function fy(r,e,t,i,a,l){var u=Math.floor(t/l*a),h=Math.floor(r.drawingBufferHeight/l-i/l*a),d=new Uint8Array(4);r.bindFramebuffer(r.FRAMEBUFFER,e),r.readPixels(u,h,1,1,r.RGBA,r.UNSIGNED_BYTE,d);var p=oa(d,4),m=p[0],v=p[1],_=p[2],y=p[3];return[m,v,_,y]}function _e(r,e,t){return(e=Oo(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function py(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function Ne(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?py(Object(t),!0).forEach(function(i){_e(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):py(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function dA(r,e){for(;!{}.hasOwnProperty.call(r,e)&&(r=aa(r))!==null;);return r}function Nf(){return Nf=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var i=dA(r,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?r:t):a.value}},Nf.apply(null,arguments)}function k0(r,e,t,i){var a=Nf(aa(r.prototype),e,t);return typeof a=="function"?function(l){return a.apply(t,l)}:a}function fA(r){return r.normalized?1:r.size}function Qd(r){var e=0;return r.forEach(function(t){return e+=fA(t)}),e}function D0(r,e,t){var i=r==="VERTEX"?e.VERTEX_SHADER:e.FRAGMENT_SHADER,a=e.createShader(i);if(a===null)throw new Error("loadShader: error while creating the shader");e.shaderSource(a,t),e.compileShader(a);var l=e.getShaderParameter(a,e.COMPILE_STATUS);if(!l){var u=e.getShaderInfoLog(a);throw e.deleteShader(a),new Error(`loadShader: error while compiling the shader:
`.concat(u,`
`).concat(t))}return a}function pA(r,e){return D0("VERTEX",r,e)}function gA(r,e){return D0("FRAGMENT",r,e)}function mA(r,e){var t=r.createProgram();if(t===null)throw new Error("loadProgram: error while creating the program.");var i,a;for(i=0,a=e.length;i<a;i++)r.attachShader(t,e[i]);r.linkProgram(t);var l=r.getProgramParameter(t,r.LINK_STATUS);if(!l)throw r.deleteProgram(t),new Error("loadProgram: error while linking the program.");return t}function gy(r){var e=r.gl,t=r.buffer,i=r.program,a=r.vertexShader,l=r.fragmentShader;e.deleteShader(a),e.deleteShader(l),e.deleteProgram(i),e.deleteBuffer(t)}var my=`#define PICKING_MODE
`,vA=_e(_e(_e(_e(_e(_e(_e(_e({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),N0=function(){function r(e,t,i){Qt(this,r),_e(this,"array",new Float32Array),_e(this,"constantArray",new Float32Array),_e(this,"capacity",0),_e(this,"verticesCount",0);var a=this.getDefinition();if(this.VERTICES=a.VERTICES,this.VERTEX_SHADER_SOURCE=a.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=a.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=a.UNIFORMS,this.ATTRIBUTES=a.ATTRIBUTES,this.METHOD=a.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in a?a.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in a?a.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in a,this.ATTRIBUTES_ITEMS_COUNT=Qd(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",e,a.VERTEX_SHADER_SOURCE,a.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=t?this.getProgramInfo("pick",e,my+a.VERTEX_SHADER_SOURCE,my+a.FRAGMENT_SHADER_SOURCE,t):null,this.isInstanced){var l=Qd(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*l);for(var u=0;u<this.CONSTANT_DATA.length;u++){var h=this.CONSTANT_DATA[u];if(h.length!==l)throw new Error("Program: error while getting constant data (one vector has ".concat(h.length," items instead of ").concat(l,")"));for(var d=0;d<h.length;d++)this.constantArray[u*l+d]=h[d]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Jt(r,[{key:"kill",value:function(){gy(this.normalProgram),this.pickProgram&&(gy(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(t,i,a,l,u){var h=this.getDefinition(),d=i.createBuffer();if(d===null)throw new Error("Program: error while creating the WebGL buffer.");var p=pA(i,a),m=gA(i,l),v=mA(i,[p,m]),_={};h.UNIFORMS.forEach(function(E){var C=i.getUniformLocation(v,E);C&&(_[E]=C)});var y={};h.ATTRIBUTES.forEach(function(E){y[E.name]=i.getAttribLocation(v,E.name)});var S;if("CONSTANT_ATTRIBUTES"in h&&(h.CONSTANT_ATTRIBUTES.forEach(function(E){y[E.name]=i.getAttribLocation(v,E.name)}),S=i.createBuffer(),S===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:t,program:v,gl:i,frameBuffer:u,buffer:d,constantBuffer:S||{},uniformLocations:_,attributeLocations:y,isPicking:t==="pick",vertexShader:p,fragmentShader:m}}},{key:"bindProgram",value:function(t){var i=this,a=0,l=t.gl,u=t.buffer;this.isInstanced?(l.bindBuffer(l.ARRAY_BUFFER,t.constantBuffer),a=0,this.CONSTANT_ATTRIBUTES.forEach(function(h){return a+=i.bindAttribute(h,t,a,!1)}),l.bufferData(l.ARRAY_BUFFER,this.constantArray,l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,t.buffer),a=0,this.ATTRIBUTES.forEach(function(h){return a+=i.bindAttribute(h,t,a,!0)}),l.bufferData(l.ARRAY_BUFFER,this.array,l.DYNAMIC_DRAW)):(l.bindBuffer(l.ARRAY_BUFFER,u),a=0,this.ATTRIBUTES.forEach(function(h){return a+=i.bindAttribute(h,t,a)}),l.bufferData(l.ARRAY_BUFFER,this.array,l.DYNAMIC_DRAW)),l.bindBuffer(l.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(t){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(a){return i.unbindAttribute(a,t,!1)}),this.ATTRIBUTES.forEach(function(a){return i.unbindAttribute(a,t,!0)})):this.ATTRIBUTES.forEach(function(a){return i.unbindAttribute(a,t)})}},{key:"bindAttribute",value:function(t,i,a,l){var u=vA[t.type];if(typeof u!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(t.type,'"'));var h=i.attributeLocations[t.name],d=i.gl;if(h!==-1){d.enableVertexAttribArray(h);var p=this.isInstanced?(l?this.ATTRIBUTES_ITEMS_COUNT:Qd(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(d.vertexAttribPointer(h,t.size,t.type,t.normalized||!1,p,a),this.isInstanced&&l)if(d instanceof WebGL2RenderingContext)d.vertexAttribDivisor(h,1);else{var m=d.getExtension("ANGLE_instanced_arrays");m&&m.vertexAttribDivisorANGLE(h,1)}}return t.size*u}},{key:"unbindAttribute",value:function(t,i,a){var l=i.attributeLocations[t.name],u=i.gl;if(l!==-1&&(u.disableVertexAttribArray(l),this.isInstanced&&a))if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(l,0);else{var h=u.getExtension("ANGLE_instanced_arrays");h&&h.vertexAttribDivisorANGLE(l,0)}}},{key:"reallocate",value:function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(t,i){var a=i.gl,l=i.program;a.enable(a.BLEND),a.useProgram(l),this.setUniforms(t,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(t){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,t.width*t.pixelRatio/t.downSizingRatio,t.height*t.pixelRatio/t.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(Ne(Ne({},t),{},{pixelRatio:t.pixelRatio/t.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,t.width*t.pixelRatio,t.height*t.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(t,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(t,i){var a=i.gl,l=i.frameBuffer;if(a.bindFramebuffer(a.FRAMEBUFFER,l),!this.isInstanced)a.drawArrays(t,0,this.verticesCount);else if(a instanceof WebGL2RenderingContext)a.drawArraysInstanced(t,0,this.VERTICES,this.capacity);else{var u=a.getExtension("ANGLE_instanced_arrays");u&&u.drawArraysInstancedANGLE(t,0,this.VERTICES,this.capacity)}}}])}(),_A=function(r){function e(){return Qt(this,e),Mn(this,e,arguments)}return Un(e,r),Jt(e,[{key:"kill",value:function(){k0(e,"kill",this)([])}},{key:"process",value:function(i,a,l){var u=a*this.STRIDE;if(l.hidden){for(var h=u+this.STRIDE;u<h;u++)this.array[u]=0;return}return this.processVisibleItem(R0(i),u,l)}}])}(N0),op=function(r){function e(){var t;Qt(this,e);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=Mn(this,e,[].concat(a)),_e(t,"drawLabel",void 0),t}return Un(e,r),Jt(e,[{key:"kill",value:function(){k0(e,"kill",this)([])}},{key:"process",value:function(i,a,l,u,h){var d=a*this.STRIDE;if(h.hidden||l.hidden||u.hidden){for(var p=d+this.STRIDE;d<p;d++)this.array[d]=0;return}return this.processVisibleItem(R0(i),d,l,u,h)}}])}(N0);function yA(r,e){return function(){function t(i,a,l){Qt(this,t),_e(this,"drawLabel",e),this.programs=r.map(function(u){return new u(i,a,l)})}return Jt(t,[{key:"reallocate",value:function(a){this.programs.forEach(function(l){return l.reallocate(a)})}},{key:"process",value:function(a,l,u,h,d){this.programs.forEach(function(p){return p.process(a,l,u,h,d)})}},{key:"render",value:function(a){this.programs.forEach(function(l){return l.render(a)})}},{key:"kill",value:function(){this.programs.forEach(function(a){return a.kill()})}}])}()}function bA(r,e,t,i,a){var l=a.edgeLabelSize,u=a.edgeLabelFont,h=a.edgeLabelWeight,d=a.edgeLabelColor.attribute?e[a.edgeLabelColor.attribute]||a.edgeLabelColor.color||"#000":a.edgeLabelColor.color,p=e.label;if(p){r.fillStyle=d,r.font="".concat(h," ").concat(l,"px ").concat(u);var m=t.size,v=i.size,_=t.x,y=t.y,S=i.x,E=i.y,C=(_+S)/2,A=(y+E)/2,k=S-_,O=E-y,N=Math.sqrt(k*k+O*O);if(!(N<m+v)){_+=k*m/N,y+=O*m/N,S-=k*v/N,E-=O*v/N,C=(_+S)/2,A=(y+E)/2,k=S-_,O=E-y,N=Math.sqrt(k*k+O*O);var D=r.measureText(p).width;if(D>N){var W="…";for(p=p+W,D=r.measureText(p).width;D>N&&p.length>1;)p=p.slice(0,-2)+W,D=r.measureText(p).width;if(p.length<4)return}var V;k>0?O>0?V=Math.acos(k/N):V=Math.asin(O/N):O>0?V=Math.acos(k/N)+Math.PI:V=Math.asin(k/N)+Math.PI/2,r.save(),r.translate(C,A),r.rotate(V),r.fillText(p,-D/2,e.size/2+l),r.restore()}}}function I0(r,e,t){if(e.label){var i=t.labelSize,a=t.labelFont,l=t.labelWeight,u=t.labelColor.attribute?e[t.labelColor.attribute]||t.labelColor.color||"#000":t.labelColor.color;r.fillStyle=u,r.font="".concat(l," ").concat(i,"px ").concat(a),r.fillText(e.label,e.x+e.size+3,e.y+i/3)}}function EA(r,e,t){var i=t.labelSize,a=t.labelFont,l=t.labelWeight;r.font="".concat(l," ").concat(i,"px ").concat(a),r.fillStyle="#FFF",r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=8,r.shadowColor="#000";var u=2;if(typeof e.label=="string"){var h=r.measureText(e.label).width,d=Math.round(h+5),p=Math.round(i+2*u),m=Math.max(e.size,i/2)+u,v=Math.asin(p/2/m),_=Math.sqrt(Math.abs(Math.pow(m,2)-Math.pow(p/2,2)));r.beginPath(),r.moveTo(e.x+_,e.y+p/2),r.lineTo(e.x+m+d,e.y+p/2),r.lineTo(e.x+m+d,e.y-p/2),r.lineTo(e.x+_,e.y-p/2),r.arc(e.x,e.y,m,v,-v),r.closePath(),r.fill()}else r.beginPath(),r.arc(e.x,e.y,e.size+u,0,Math.PI*2),r.closePath(),r.fill();r.shadowOffsetX=0,r.shadowOffsetY=0,r.shadowBlur=0,I0(r,e,t)}var wA=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,SA=wA,TA=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,CA=TA,x0=WebGLRenderingContext,vy=x0.UNSIGNED_BYTE,Jd=x0.FLOAT,AA=["u_sizeRatio","u_correctionRatio","u_matrix"],dc=function(r){function e(){return Qt(this,e),Mn(this,e,arguments)}return Un(e,r),Jt(e,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:CA,FRAGMENT_SHADER_SOURCE:SA,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:AA,ATTRIBUTES:[{name:"a_position",size:2,type:Jd},{name:"a_size",size:1,type:Jd},{name:"a_color",size:4,type:vy,normalized:!0},{name:"a_id",size:4,type:vy,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Jd}],CONSTANT_DATA:[[e.ANGLE_1],[e.ANGLE_2],[e.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,a,l){var u=this.array,h=tl(l.color);u[a++]=l.x,u[a++]=l.y,u[a++]=l.size,u[a++]=h,u[a++]=i}},{key:"setUniforms",value:function(i,a){var l=a.gl,u=a.uniformLocations,h=u.u_sizeRatio,d=u.u_correctionRatio,p=u.u_matrix;l.uniform1f(d,i.correctionRatio),l.uniform1f(h,i.sizeRatio),l.uniformMatrix3fv(p,!1,i.matrix)}}])}(_A);_e(dc,"ANGLE_1",0);_e(dc,"ANGLE_2",2*Math.PI/3);_e(dc,"ANGLE_3",4*Math.PI/3);var RA=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,kA=RA,DA=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,NA=DA,O0=WebGLRenderingContext,_y=O0.UNSIGNED_BYTE,Au=O0.FLOAT,IA=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],L0={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function M0(r){var e=Ne(Ne({},L0),{});return function(t){function i(){return Qt(this,i),Mn(this,i,arguments)}return Un(i,t),Jt(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:NA,FRAGMENT_SHADER_SOURCE:kA,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:IA,ATTRIBUTES:[{name:"a_position",size:2,type:Au},{name:"a_normal",size:2,type:Au},{name:"a_radius",size:1,type:Au},{name:"a_color",size:4,type:_y,normalized:!0},{name:"a_id",size:4,type:_y,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Au}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(l,u,h,d,p){if(e.extremity==="source"){var m=[d,h];h=m[0],d=m[1]}var v=p.size||1,_=d.size||1,y=h.x,S=h.y,E=d.x,C=d.y,A=tl(p.color),k=E-y,O=C-S,N=k*k+O*O,D=0,W=0;N&&(N=1/Math.sqrt(N),D=-O*N*v,W=k*N*v);var V=this.array;V[u++]=E,V[u++]=C,V[u++]=-D,V[u++]=-W,V[u++]=_,V[u++]=A,V[u++]=l}},{key:"setUniforms",value:function(l,u){var h=u.gl,d=u.uniformLocations,p=d.u_matrix,m=d.u_sizeRatio,v=d.u_correctionRatio,_=d.u_minEdgeThickness,y=d.u_lengthToThicknessRatio,S=d.u_widenessToThicknessRatio;h.uniformMatrix3fv(p,!1,l.matrix),h.uniform1f(m,l.sizeRatio),h.uniform1f(v,l.correctionRatio),h.uniform1f(_,l.minEdgeThickness),h.uniform1f(y,e.lengthToThicknessRatio),h.uniform1f(S,e.widenessToThicknessRatio)}}])}(op)}M0();var xA=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,U0=xA,OA=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,LA=OA,z0=WebGLRenderingContext,yy=z0.UNSIGNED_BYTE,Fr=z0.FLOAT,MA=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],UA={lengthToThicknessRatio:L0.lengthToThicknessRatio};function P0(r){var e=Ne(Ne({},UA),{});return function(t){function i(){return Qt(this,i),Mn(this,i,arguments)}return Un(i,t),Jt(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:LA,FRAGMENT_SHADER_SOURCE:U0,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:MA,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Fr},{name:"a_positionEnd",size:2,type:Fr},{name:"a_normal",size:2,type:Fr},{name:"a_color",size:4,type:yy,normalized:!0},{name:"a_id",size:4,type:yy,normalized:!0},{name:"a_radius",size:1,type:Fr}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Fr},{name:"a_normalCoef",size:1,type:Fr},{name:"a_radiusCoef",size:1,type:Fr}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(l,u,h,d,p){var m=p.size||1,v=h.x,_=h.y,y=d.x,S=d.y,E=tl(p.color),C=y-v,A=S-_,k=d.size||1,O=C*C+A*A,N=0,D=0;O&&(O=1/Math.sqrt(O),N=-A*O*m,D=C*O*m);var W=this.array;W[u++]=v,W[u++]=_,W[u++]=y,W[u++]=S,W[u++]=N,W[u++]=D,W[u++]=E,W[u++]=l,W[u++]=k}},{key:"setUniforms",value:function(l,u){var h=u.gl,d=u.uniformLocations,p=d.u_matrix,m=d.u_zoomRatio,v=d.u_feather,_=d.u_pixelRatio,y=d.u_correctionRatio,S=d.u_sizeRatio,E=d.u_minEdgeThickness,C=d.u_lengthToThicknessRatio;h.uniformMatrix3fv(p,!1,l.matrix),h.uniform1f(m,l.zoomRatio),h.uniform1f(S,l.sizeRatio),h.uniform1f(y,l.correctionRatio),h.uniform1f(_,l.pixelRatio),h.uniform1f(v,l.antiAliasingFeather),h.uniform1f(E,l.minEdgeThickness),h.uniform1f(C,e.lengthToThicknessRatio)}}])}(op)}P0();function zA(r){return yA([P0(),M0()])}var PA=zA(),GA=PA,BA=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,FA=BA,G0=WebGLRenderingContext,by=G0.UNSIGNED_BYTE,wo=G0.FLOAT,HA=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],jA=function(r){function e(){return Qt(this,e),Mn(this,e,arguments)}return Un(e,r),Jt(e,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:FA,FRAGMENT_SHADER_SOURCE:U0,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:HA,ATTRIBUTES:[{name:"a_positionStart",size:2,type:wo},{name:"a_positionEnd",size:2,type:wo},{name:"a_normal",size:2,type:wo},{name:"a_color",size:4,type:by,normalized:!0},{name:"a_id",size:4,type:by,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:wo},{name:"a_normalCoef",size:1,type:wo}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,a,l,u,h){var d=h.size||1,p=l.x,m=l.y,v=u.x,_=u.y,y=tl(h.color),S=v-p,E=_-m,C=S*S+E*E,A=0,k=0;C&&(C=1/Math.sqrt(C),A=-E*C*d,k=S*C*d);var O=this.array;O[a++]=p,O[a++]=m,O[a++]=v,O[a++]=_,O[a++]=A,O[a++]=k,O[a++]=y,O[a++]=i}},{key:"setUniforms",value:function(i,a){var l=a.gl,u=a.uniformLocations,h=u.u_matrix,d=u.u_zoomRatio,p=u.u_feather,m=u.u_pixelRatio,v=u.u_correctionRatio,_=u.u_sizeRatio,y=u.u_minEdgeThickness;l.uniformMatrix3fv(h,!1,i.matrix),l.uniform1f(d,i.zoomRatio),l.uniform1f(_,i.sizeRatio),l.uniform1f(v,i.correctionRatio),l.uniform1f(m,i.pixelRatio),l.uniform1f(p,i.antiAliasingFeather),l.uniform1f(y,i.minEdgeThickness)}}])}(op),lp=function(r){function e(){var t;return Qt(this,e),t=Mn(this,e),t.rawEmitter=t,t}return Un(e,r),Jt(e)}(l0.EventEmitter),ef,Ey;function B0(){return Ey||(Ey=1,ef=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),ef}var qA=B0();const VA=tp(qA);var WA=function(e){return e},$A=function(e){return e*e},YA=function(e){return e*(2-e)},KA=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},ZA=function(e){return e*e*e},XA=function(e){return--e*e*e+1},QA=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},JA={linear:WA,quadraticIn:$A,quadraticOut:YA,quadraticInOut:KA,cubicIn:ZA,cubicOut:XA,cubicInOut:QA},eR={easing:"quadraticInOut",duration:150};function Hn(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function Ru(r,e,t){return r[0]=e,r[4]=typeof t=="number"?t:e,r}function wy(r,e){var t=Math.sin(e),i=Math.cos(e);return r[0]=i,r[1]=t,r[3]=-t,r[4]=i,r}function Sy(r,e,t){return r[6]=e,r[7]=t,r}function hr(r,e){var t=r[0],i=r[1],a=r[2],l=r[3],u=r[4],h=r[5],d=r[6],p=r[7],m=r[8],v=e[0],_=e[1],y=e[2],S=e[3],E=e[4],C=e[5],A=e[6],k=e[7],O=e[8];return r[0]=v*t+_*l+y*d,r[1]=v*i+_*u+y*p,r[2]=v*a+_*h+y*m,r[3]=S*t+E*l+C*d,r[4]=S*i+E*u+C*p,r[5]=S*a+E*h+C*m,r[6]=A*t+k*l+O*d,r[7]=A*i+k*u+O*p,r[8]=A*a+k*h+O*m,r}function If(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=r[0],a=r[1],l=r[3],u=r[4],h=r[6],d=r[7],p=e.x,m=e.y;return{x:p*i+m*l+h*t,y:p*a+m*u+d*t}}function tR(r,e){var t=r.height/r.width,i=e.height/e.width;return t<1&&i>1||t>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/t,t))}function So(r,e,t,i,a){var l=r.angle,u=r.ratio,h=r.x,d=r.y,p=e.width,m=e.height,v=Hn(),_=Math.min(p,m)-2*i,y=tR(e,t);return a?(hr(v,Sy(Hn(),h,d)),hr(v,Ru(Hn(),u)),hr(v,wy(Hn(),l)),hr(v,Ru(Hn(),p/_/2/y,m/_/2/y))):(hr(v,Ru(Hn(),2*(_/p)*y,2*(_/m)*y)),hr(v,wy(Hn(),-l)),hr(v,Ru(Hn(),1/u)),hr(v,Sy(Hn(),-h,-d))),v}function nR(r,e,t){var i=If(r,{x:Math.cos(e.angle),y:Math.sin(e.angle)},0),a=i.x,l=i.y;return 1/Math.sqrt(Math.pow(a,2)+Math.pow(l,2))/t.width}function iR(r){if(!r.order)return{x:[0,1],y:[0,1]};var e=1/0,t=-1/0,i=1/0,a=-1/0;return r.forEachNode(function(l,u){var h=u.x,d=u.y;h<e&&(e=h),h>t&&(t=h),d<i&&(i=d),d>a&&(a=d)}),{x:[e,t],y:[i,a]}}function rR(r){if(!VA(r))throw new Error("Sigma: invalid graph instance.");r.forEachNode(function(e,t){if(!Number.isFinite(t.x)||!Number.isFinite(t.y))throw new Error("Sigma: Coordinates of node ".concat(e," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function sR(r,e,t){var i=document.createElement(r);if(e)for(var a in e)i.style[a]=e[a];if(t)for(var l in t)i.setAttribute(l,t[l]);return i}function Ty(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function Cy(r,e,t){return t.sort(function(i,a){var l=e(i)||0,u=e(a)||0;return l<u?-1:l>u?1:0})}function Ay(r){var e=oa(r.x,2),t=e[0],i=e[1],a=oa(r.y,2),l=a[0],u=a[1],h=Math.max(i-t,u-l),d=(i+t)/2,p=(u+l)/2;(h===0||Math.abs(h)===1/0||isNaN(h))&&(h=1),isNaN(d)&&(d=0),isNaN(p)&&(p=0);var m=function(_){return{x:.5+(_.x-d)/h,y:.5+(_.y-p)/h}};return m.applyTo=function(v){v.x=.5+(v.x-d)/h,v.y=.5+(v.y-p)/h},m.inverse=function(v){return{x:d+h*(v.x-.5),y:p+h*(v.y-.5)}},m.ratio=h,m}function xf(r){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(r)}function Ry(r,e){var t=e.size;if(t!==0){var i=r.length;r.length+=t;var a=0;e.forEach(function(l){r[i+a]=l,a++})}}function tf(r){r=r||{};for(var e=0,t=arguments.length<=1?0:arguments.length-1;e<t;e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];i&&Object.assign(r,i)}return r}var up={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:bA,defaultDrawNodeLabel:I0,defaultDrawNodeHover:EA,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},aR={circle:dc},oR={arrow:GA,line:jA};function nf(r){if(typeof r.labelDensity!="number"||r.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var e=r.minCameraRatio,t=r.maxCameraRatio;if(typeof e=="number"&&typeof t=="number"&&t<e)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function lR(r){var e=tf({},up,r);return e.nodeProgramClasses=tf({},aR,e.nodeProgramClasses),e.edgeProgramClasses=tf({},oR,e.edgeProgramClasses),e}var ku=1.5,ky=function(r){function e(){var t;return Qt(this,e),t=Mn(this,e),_e(t,"x",.5),_e(t,"y",.5),_e(t,"angle",0),_e(t,"ratio",1),_e(t,"minRatio",null),_e(t,"maxRatio",null),_e(t,"enabledZooming",!0),_e(t,"enabledPanning",!0),_e(t,"enabledRotation",!0),_e(t,"clean",null),_e(t,"nextFrame",null),_e(t,"previousState",null),_e(t,"enabled",!0),t.previousState=t.getState(),t}return Un(e,r),Jt(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var a=i;return typeof this.minRatio=="number"&&(a=Math.max(a,this.minRatio)),typeof this.maxRatio=="number"&&(a=Math.min(a,this.maxRatio)),a}},{key:"validateState",value:function(i){var a={};return this.enabledPanning&&typeof i.x=="number"&&(a.x=i.x),this.enabledPanning&&typeof i.y=="number"&&(a.y=i.y),this.enabledZooming&&typeof i.ratio=="number"&&(a.ratio=this.getBoundedRatio(i.ratio)),this.enabledRotation&&typeof i.angle=="number"&&(a.angle=i.angle),this.clean?this.clean(Ne(Ne({},this.getState()),a)):a}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var a=this.validateState(i);return typeof a.x=="number"&&(this.x=a.x),typeof a.y=="number"&&(this.y=a.y),typeof a.ratio=="number"&&(this.ratio=a.ratio),typeof a.angle=="number"&&(this.angle=a.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var a=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0;if(!u)return new Promise(function(y){return a.animate(i,l,y)});if(this.enabled){var h=Ne(Ne({},eR),l),d=this.validateState(i),p=typeof h.easing=="function"?h.easing:JA[h.easing],m=Date.now(),v=this.getState(),_=function(){var S=(Date.now()-m)/h.duration;if(S>=1){a.nextFrame=null,a.setState(d),a.animationCallback&&(a.animationCallback.call(null),a.animationCallback=void 0);return}var E=p(S),C={};typeof d.x=="number"&&(C.x=v.x+(d.x-v.x)*E),typeof d.y=="number"&&(C.y=v.y+(d.y-v.y)*E),a.enabledRotation&&typeof d.angle=="number"&&(C.angle=v.angle+(d.angle-v.angle)*E),typeof d.ratio=="number"&&(C.ratio=v.ratio+(d.ratio-v.ratio)*E),a.setState(C),a.nextFrame=requestAnimationFrame(_)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(_)):_(),this.animationCallback=u}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||ku)},i):this.animate({ratio:this.ratio/ku})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||ku)},i):this.animate({ratio:this.ratio*ku})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return e.from(this.getState())}}],[{key:"from",value:function(i){var a=new e;return a.setState(i)}}])}(lp);function jn(r,e){var t=e.getBoundingClientRect();return{x:r.clientX-t.left,y:r.clientY-t.top}}function Si(r,e){var t=Ne(Ne({},jn(r,e)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){t.sigmaDefaultPrevented=!0},original:r});return t}function To(r){var e="x"in r?r:Ne(Ne({},r.touches[0]||r.previousTouches[0]),{},{original:r.original,sigmaDefaultPrevented:r.sigmaDefaultPrevented,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0,e.sigmaDefaultPrevented=!0}});return e}function uR(r,e){return Ne(Ne({},Si(r,e)),{},{delta:F0(r)})}var cR=2;function Ou(r){for(var e=[],t=0,i=Math.min(r.length,cR);t<i;t++)e.push(r[t]);return e}function Co(r,e,t){var i={touches:Ou(r.touches).map(function(a){return jn(a,t)}),previousTouches:e.map(function(a){return jn(a,t)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:r};return i}function F0(r){if(typeof r.deltaY<"u")return r.deltaY*-3/360;if(typeof r.detail<"u")return r.detail/-9;throw new Error("Captor: could not extract delta from event.")}var H0=function(r){function e(t,i){var a;return Qt(this,e),a=Mn(this,e),a.container=t,a.renderer=i,a}return Un(e,r),Jt(e)}(lp),hR=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],dR=hR.reduce(function(r,e){return Ne(Ne({},r),{},_e({},e,up[e]))},{}),fR=function(r){function e(t,i){var a;return Qt(this,e),a=Mn(this,e,[t,i]),_e(a,"enabled",!0),_e(a,"draggedEvents",0),_e(a,"downStartTime",null),_e(a,"lastMouseX",null),_e(a,"lastMouseY",null),_e(a,"isMouseDown",!1),_e(a,"isMoving",!1),_e(a,"movingTimeout",null),_e(a,"startCameraState",null),_e(a,"clicks",0),_e(a,"doubleClickTimeout",null),_e(a,"currentWheelDirection",0),_e(a,"settings",dR),a.handleClick=a.handleClick.bind(a),a.handleRightClick=a.handleRightClick.bind(a),a.handleDown=a.handleDown.bind(a),a.handleUp=a.handleUp.bind(a),a.handleMove=a.handleMove.bind(a),a.handleWheel=a.handleWheel.bind(a),a.handleLeave=a.handleLeave.bind(a),a.handleEnter=a.handleEnter.bind(a),t.addEventListener("click",a.handleClick,{capture:!1}),t.addEventListener("contextmenu",a.handleRightClick,{capture:!1}),t.addEventListener("mousedown",a.handleDown,{capture:!1}),t.addEventListener("wheel",a.handleWheel,{capture:!1}),t.addEventListener("mouseleave",a.handleLeave,{capture:!1}),t.addEventListener("mouseenter",a.handleEnter,{capture:!1}),document.addEventListener("mousemove",a.handleMove,{capture:!1}),document.addEventListener("mouseup",a.handleUp,{capture:!1}),a}return Un(e,r),Jt(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var a=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){a.clicks=0,a.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Si(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",Si(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var a=Si(i,this.container);if(this.emit("doubleClick",a),!a.sigmaDefaultPrevented){var l=this.renderer.getCamera(),u=l.getBoundedRatio(l.getState().ratio/this.settings.doubleClickZoomingRatio);l.animate(this.renderer.getViewportZoomedState(jn(i,this.container),u),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var a=jn(i,this.container),l=a.x,u=a.y;this.lastMouseX=l,this.lastMouseY=u,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Si(i,this.container))}}},{key:"handleUp",value:function(i){var a=this;if(!(!this.enabled||!this.isMouseDown)){var l=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var u=jn(i,this.container),h=u.x,d=u.y,p=l.getState(),m=l.getPreviousState()||{x:0,y:0};this.isMoving?l.animate({x:p.x+this.settings.inertiaRatio*(p.x-m.x),y:p.y+this.settings.inertiaRatio*(p.y-m.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==h||this.lastMouseY!==d)&&l.setState({x:p.x,y:p.y}),this.isMoving=!1,setTimeout(function(){var v=a.draggedEvents>0;a.draggedEvents=0,v&&a.renderer.getSetting("hideEdgesOnMove")&&a.renderer.refresh()},0),this.emit("mouseup",Si(i,this.container))}}},{key:"handleMove",value:function(i){var a=this;if(this.enabled){var l=Si(i,this.container);if(this.emit("mousemovebody",l),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",l),!l.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){a.movingTimeout=null,a.isMoving=!1},this.settings.dragTimeout);var u=this.renderer.getCamera(),h=jn(i,this.container),d=h.x,p=h.y,m=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),v=this.renderer.viewportToFramedGraph({x:d,y:p}),_=m.x-v.x,y=m.y-v.y,S=u.getState(),E=S.x+_,C=S.y+y;u.setState({x:E,y:C}),this.lastMouseX=d,this.lastMouseY=p,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",Si(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",Si(i,this.container))}},{key:"handleWheel",value:function(i){var a=this,l=this.renderer.getCamera();if(!(!this.enabled||!l.enabledZooming)){var u=F0(i);if(u){var h=uR(i,this.container);if(this.emit("wheel",h),h.sigmaDefaultPrevented){i.preventDefault(),i.stopPropagation();return}var d=l.getState().ratio,p=u>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,m=l.getBoundedRatio(d*p),v=u>0?1:-1,_=Date.now();d!==m&&(i.preventDefault(),i.stopPropagation(),!(this.currentWheelDirection===v&&this.lastWheelTriggerTime&&_-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(l.animate(this.renderer.getViewportZoomedState(jn(i,this.container),m),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){a.currentWheelDirection=0}),this.currentWheelDirection=v,this.lastWheelTriggerTime=_))}}}},{key:"setSettings",value:function(i){this.settings=i}}])}(H0),pR=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],gR=pR.reduce(function(r,e){return Ne(Ne({},r),{},_e({},e,up[e]))},{}),mR=function(r){function e(t,i){var a;return Qt(this,e),a=Mn(this,e,[t,i]),_e(a,"enabled",!0),_e(a,"isMoving",!1),_e(a,"hasMoved",!1),_e(a,"touchMode",0),_e(a,"startTouchesPositions",[]),_e(a,"lastTouches",[]),_e(a,"lastTap",null),_e(a,"settings",gR),a.handleStart=a.handleStart.bind(a),a.handleLeave=a.handleLeave.bind(a),a.handleMove=a.handleMove.bind(a),t.addEventListener("touchstart",a.handleStart,{capture:!1}),t.addEventListener("touchcancel",a.handleLeave,{capture:!1}),document.addEventListener("touchend",a.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",a.handleMove,{capture:!1,passive:!1}),a}return Un(e,r),Jt(e,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var a=this;if(this.enabled){i.preventDefault();var l=Ou(i.touches);if(this.touchMode=l.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=l.map(function(y){return jn(y,a.container)}),this.touchMode===2){var u=oa(this.startTouchesPositions,2),h=u[0],d=h.x,p=h.y,m=u[1],v=m.x,_=m.y;this.startTouchesAngle=Math.atan2(_-p,v-d),this.startTouchesDistance=Math.sqrt(Math.pow(v-d,2)+Math.pow(_-p,2))}this.emit("touchdown",Co(i,this.lastTouches,this.container)),this.lastTouches=l,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var a=this.renderer.getCamera(),l=a.getState(),u=a.getPreviousState()||{x:0,y:0};a.animate({x:l.x+this.settings.inertiaRatio*(l.x-u.x),y:l.y+this.settings.inertiaRatio*(l.y-u.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Co(i,this.lastTouches,this.container)),!i.touches.length){var h=jn(this.lastTouches[0],this.container),d=this.startTouchesPositions[0],p=Math.pow(h.x-d.x,2)+Math.pow(h.y-d.y,2);if(!i.touches.length&&p<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var m=Co(i,this.lastTouches,this.container);if(this.emit("doubletap",m),this.lastTap=null,!m.sigmaDefaultPrevented){var v=this.renderer.getCamera(),_=v.getBoundedRatio(v.getState().ratio/this.settings.doubleClickZoomingRatio);v.animate(this.renderer.getViewportZoomedState(h,_),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var y=Co(i,this.lastTouches,this.container);this.emit("tap",y),this.lastTap={time:Date.now(),position:y.touches[0]||y.previousTouches[0]}}}this.lastTouches=Ou(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var a=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var l=Ou(i.touches),u=l.map(function(G){return jn(G,a.container)}),h=this.lastTouches;this.lastTouches=l,this.lastTouchesPositions=u;var d=Co(i,h,this.container);if(this.emit("touchmove",d),!d.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=u.some(function(G,q){var Z=a.startTouchesPositions[q];return Z&&(G.x!==Z.x||G.y!==Z.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){a.isMoving=!1},this.settings.dragTimeout);var p=this.renderer.getCamera(),m=this.startCameraState,v=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var _=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),y=_.x,S=_.y,E=this.renderer.viewportToFramedGraph(u[0]),C=E.x,A=E.y;p.setState({x:m.x+y-C,y:m.y+S-A});break}case 2:{var k={x:.5,y:.5,angle:0,ratio:1},O=u[0],N=O.x,D=O.y,W=u[1],V=W.x,J=W.y,Y=Math.atan2(J-D,V-N)-this.startTouchesAngle,ie=Math.hypot(J-D,V-N)/this.startTouchesDistance,ye=p.getBoundedRatio(m.ratio/ie);k.ratio=ye,k.angle=m.angle+Y;var L=this.getDimensions(),x=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:m}),T=Math.min(L.width,L.height)-2*v,ae=T/L.width,P=T/L.height,I=ye/T,he=N-T/2/ae,re=D-T/2/P,U=[he*Math.cos(-k.angle)-re*Math.sin(-k.angle),re*Math.cos(-k.angle)+he*Math.sin(-k.angle)];he=U[0],re=U[1],k.x=x.x-he*I,k.y=x.y+re*I,p.setState(k);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}])}(H0);function vR(r){if(Array.isArray(r))return Df(r)}function _R(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function yR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dy(r){return vR(r)||_R(r)||T0(r)||yR()}function bR(r,e){if(r==null)return{};var t={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(e.indexOf(i)!==-1)continue;t[i]=r[i]}return t}function rf(r,e){if(r==null)return{};var t,i,a=bR(r,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(i=0;i<l.length;i++)t=l[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(a[t]=r[t])}return a}var Ny=function(){function r(e,t){Qt(this,r),this.key=e,this.size=t}return Jt(r,null,[{key:"compare",value:function(t,i){return t.size>i.size?-1:t.size<i.size||t.key>i.key?1:-1}}])}(),Iy=function(){function r(){Qt(this,r),_e(this,"width",0),_e(this,"height",0),_e(this,"cellSize",0),_e(this,"columns",0),_e(this,"rows",0),_e(this,"cells",{})}return Jt(r,[{key:"resizeAndClear",value:function(t,i){this.width=t.width,this.height=t.height,this.cellSize=i,this.columns=Math.ceil(t.width/i),this.rows=Math.ceil(t.height/i),this.cells={}}},{key:"getIndex",value:function(t){var i=Math.floor(t.x/this.cellSize),a=Math.floor(t.y/this.cellSize);return a*this.columns+i}},{key:"add",value:function(t,i,a){var l=new Ny(t,i),u=this.getIndex(a),h=this.cells[u];h||(h=[],this.cells[u]=h),h.push(l)}},{key:"organize",value:function(){for(var t in this.cells){var i=this.cells[t];i.sort(Ny.compare)}}},{key:"getLabelsToDisplay",value:function(t,i){var a=this.cellSize*this.cellSize,l=a/t/t,u=l*i/a,h=Math.ceil(u),d=[];for(var p in this.cells)for(var m=this.cells[p],v=0;v<Math.min(h,m.length);v++)d.push(m[v].key);return d}}])}();function ER(r){var e=r.graph,t=r.hoveredNode,i=r.highlightedNodes,a=r.displayedNodeLabels,l=[];return e.forEachEdge(function(u,h,d,p){(d===t||p===t||i.has(d)||i.has(p)||a.has(d)&&a.has(p))&&l.push(u)}),l}var xy=150,Oy=50,Ti=Object.prototype.hasOwnProperty;function wR(r,e,t){if(!Ti.call(t,"x")||!Ti.call(t,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(e,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return t.color||(t.color=r.defaultNodeColor),!t.label&&t.label!==""&&(t.label=null),t.label!==void 0&&t.label!==null?t.label=""+t.label:t.label=null,t.size||(t.size=2),Ti.call(t,"hidden")||(t.hidden=!1),Ti.call(t,"highlighted")||(t.highlighted=!1),Ti.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=r.defaultNodeType),t.zIndex||(t.zIndex=0),t}function SR(r,e,t){return t.color||(t.color=r.defaultEdgeColor),t.label||(t.label=""),t.size||(t.size=.5),Ti.call(t,"hidden")||(t.hidden=!1),Ti.call(t,"forceLabel")||(t.forceLabel=!1),(!t.type||t.type==="")&&(t.type=r.defaultEdgeType),t.zIndex||(t.zIndex=0),t}var TR=function(r){function e(t,i){var a,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Qt(this,e),a=Mn(this,e),_e(a,"elements",{}),_e(a,"canvasContexts",{}),_e(a,"webGLContexts",{}),_e(a,"pickingLayers",new Set),_e(a,"textures",{}),_e(a,"frameBuffers",{}),_e(a,"activeListeners",{}),_e(a,"labelGrid",new Iy),_e(a,"nodeDataCache",{}),_e(a,"edgeDataCache",{}),_e(a,"nodeProgramIndex",{}),_e(a,"edgeProgramIndex",{}),_e(a,"nodesWithForcedLabels",new Set),_e(a,"edgesWithForcedLabels",new Set),_e(a,"nodeExtent",{x:[0,1],y:[0,1]}),_e(a,"nodeZExtent",[1/0,-1/0]),_e(a,"edgeZExtent",[1/0,-1/0]),_e(a,"matrix",Hn()),_e(a,"invMatrix",Hn()),_e(a,"correctionRatio",1),_e(a,"customBBox",null),_e(a,"normalizationFunction",Ay({x:[0,1],y:[0,1]})),_e(a,"graphToViewportRatio",1),_e(a,"itemIDsIndex",{}),_e(a,"nodeIndices",{}),_e(a,"edgeIndices",{}),_e(a,"width",0),_e(a,"height",0),_e(a,"pixelRatio",Ty()),_e(a,"pickingDownSizingRatio",2*a.pixelRatio),_e(a,"displayedNodeLabels",new Set),_e(a,"displayedEdgeLabels",new Set),_e(a,"highlightedNodes",new Set),_e(a,"hoveredNode",null),_e(a,"hoveredEdge",null),_e(a,"renderFrame",null),_e(a,"renderHighlightedNodesFrame",null),_e(a,"needToProcess",!1),_e(a,"checkEdgesEventsFrame",null),_e(a,"nodePrograms",{}),_e(a,"nodeHoverPrograms",{}),_e(a,"edgePrograms",{}),a.settings=lR(l),nf(a.settings),rR(t),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");a.graph=t,a.container=i,a.createWebGLContext("edges",{picking:l.enableEdgeEvents}),a.createCanvasContext("edgeLabels"),a.createWebGLContext("nodes",{picking:!0}),a.createCanvasContext("labels"),a.createCanvasContext("hovers"),a.createWebGLContext("hoverNodes"),a.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),a.resize();for(var u in a.settings.nodeProgramClasses)a.registerNodeProgram(u,a.settings.nodeProgramClasses[u],a.settings.nodeHoverProgramClasses[u]);for(var h in a.settings.edgeProgramClasses)a.registerEdgeProgram(h,a.settings.edgeProgramClasses[h]);return a.camera=new ky,a.bindCameraHandlers(),a.mouseCaptor=new fR(a.elements.mouse,a),a.mouseCaptor.setSettings(a.settings),a.touchCaptor=new mR(a.elements.mouse,a),a.touchCaptor.setSettings(a.settings),a.bindEventHandlers(),a.bindGraphHandlers(),a.handleSettingsUpdate(),a.refresh(),a}return Un(e,r),Jt(e,[{key:"registerNodeProgram",value:function(i,a,l){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new a(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(l||a)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,a){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new a(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var a=this.nodePrograms,l=a[i],u=rf(a,[i].map(Oo));l.kill(),this.nodePrograms=u}if(this.nodeHoverPrograms[i]){var h=this.nodeHoverPrograms,d=h[i],p=rf(h,[i].map(Oo));d.kill(),this.nodePrograms=p}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var a=this.edgePrograms,l=a[i],u=rf(a,[i].map(Oo));l.kill(),this.edgePrograms=u}return this}},{key:"resetWebGLTexture",value:function(i){var a=this.webGLContexts[i],l=this.frameBuffers[i],u=this.textures[i];u&&a.deleteTexture(u);var h=a.createTexture();return a.bindFramebuffer(a.FRAMEBUFFER,l),a.bindTexture(a.TEXTURE_2D,h),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,null),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,h,0),this.textures[i]=h,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var a=i.x,l=i.y,u=fy(this.webGLContexts.nodes,this.frameBuffers.nodes,a,l,this.pixelRatio,this.pickingDownSizingRatio),h=dy.apply(void 0,Dy(u)),d=this.itemIDsIndex[h];return d&&d.type==="node"?d.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(l){var u=To(l),h={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}},d=i.getNodeAtPosition(u);if(d&&i.hoveredNode!==d&&!i.nodeDataCache[d].hidden){i.hoveredNode&&i.emit("leaveNode",Ne(Ne({},h),{},{node:i.hoveredNode})),i.hoveredNode=d,i.emit("enterNode",Ne(Ne({},h),{},{node:d})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(u)!==i.hoveredNode){var p=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",Ne(Ne({},h),{},{node:p})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var m=i.hoveredNode?null:i.getEdgeAtPoint(h.event.x,h.event.y);m!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",Ne(Ne({},h),{},{edge:i.hoveredEdge})),m&&i.emit("enterEdge",Ne(Ne({},h),{},{edge:m})),i.hoveredEdge=m)}},this.activeListeners.handleMoveBody=function(l){var u=To(l);i.emit("moveBody",{event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(l){var u=To(l),h={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",Ne(Ne({},h),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",Ne(Ne({},h),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",Ne({},h))},this.activeListeners.handleEnter=function(l){var u=To(l),h={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}};i.emit("enterStage",Ne({},h))};var a=function(u){return function(h){var d=To(h),p={event:d,preventSigmaDefault:function(){d.preventSigmaDefault()}},m=i.getNodeAtPosition(d);if(m)return i.emit("".concat(u,"Node"),Ne(Ne({},p),{},{node:m}));if(i.settings.enableEdgeEvents){var v=i.getEdgeAtPoint(d.x,d.y);if(v)return i.emit("".concat(u,"Edge"),Ne(Ne({},p),{},{edge:v}))}return i.emit("".concat(u,"Stage"),p)}};return this.activeListeners.handleClick=a("click"),this.activeListeners.handleRightClick=a("rightClick"),this.activeListeners.handleDoubleClick=a("doubleClick"),this.activeListeners.handleWheel=a("wheel"),this.activeListeners.handleDown=a("down"),this.activeListeners.handleUp=a("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,a=this.graph,l=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(u){var h,d=(h=u.hints)===null||h===void 0?void 0:h.attributes;i.graph.forEachNode(function(m){return i.updateNode(m)});var p=!d||d.some(function(m){return l.has(m)});i.refresh({partialGraph:{nodes:a.nodes()},skipIndexation:!p,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(u){var h,d=(h=u.hints)===null||h===void 0?void 0:h.attributes;i.graph.forEachEdge(function(m){return i.updateEdge(m)});var p=d&&["zIndex","type"].some(function(m){return d==null?void 0:d.includes(m)});i.refresh({partialGraph:{edges:a.edges()},skipIndexation:!p,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(u){var h=u.key;i.addNode(h),i.refresh({partialGraph:{nodes:[h]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(u){var h=u.key;i.refresh({partialGraph:{nodes:[h]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(u){var h=u.key;i.removeNode(h),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(u){var h=u.key;i.addEdge(h),i.refresh({partialGraph:{edges:[h]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(u){var h=u.key;i.refresh({partialGraph:{edges:[h]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(u){var h=u.key;i.removeEdge(h),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},a.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),a.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),a.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),a.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),a.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),a.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),a.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),a.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),a.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),a.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,a){var l=fy(this.webGLContexts.edges,this.frameBuffers.edges,i,a,this.pixelRatio,this.pickingDownSizingRatio),u=dy.apply(void 0,Dy(l)),h=this.itemIDsIndex[u];return h&&h.type==="edge"?h.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var a=this.graph,l=this.settings,u=this.getDimensions();if(this.nodeExtent=iR(this.graph),!this.settings.autoRescale){var h=u.width,d=u.height,p=this.nodeExtent,m=p.x,v=p.y;this.nodeExtent={x:[(m[0]+m[1])/2-h/2,(m[0]+m[1])/2+h/2],y:[(v[0]+v[1])/2-d/2,(v[0]+v[1])/2+d/2]}}this.normalizationFunction=Ay(this.customBBox||this.nodeExtent);var _=new ky,y=So(_.getState(),u,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(u,l.labelGridCellSize);for(var S={},E={},C={},A={},k=1,O=a.nodes(),N=0,D=O.length;N<D;N++){var W=O[N],V=this.nodeDataCache[W],J=a.getNodeAttributes(W);V.x=J.x,V.y=J.y,this.normalizationFunction.applyTo(V),typeof V.label=="string"&&!V.hidden&&this.labelGrid.add(W,V.size,this.framedGraphToViewport(V,{matrix:y})),S[V.type]=(S[V.type]||0)+1}this.labelGrid.organize();for(var Y in this.nodePrograms){if(!Ti.call(this.nodePrograms,Y))throw new Error('Sigma: could not find a suitable program for node type "'.concat(Y,'"!'));this.nodePrograms[Y].reallocate(S[Y]||0),S[Y]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(O=Cy(this.nodeZExtent,function(ue){return i.nodeDataCache[ue].zIndex},O));for(var ie=0,ye=O.length;ie<ye;ie++){var L=O[ie];E[L]=k,A[E[L]]={type:"node",id:L},k++;var x=this.nodeDataCache[L];this.addNodeToProgram(L,E[L],S[x.type]++)}for(var T={},ae=a.edges(),P=0,I=ae.length;P<I;P++){var he=ae[P],re=this.edgeDataCache[he];T[re.type]=(T[re.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(ae=Cy(this.edgeZExtent,function(ue){return i.edgeDataCache[ue].zIndex},ae));for(var U in this.edgePrograms){if(!Ti.call(this.edgePrograms,U))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(U,'"!'));this.edgePrograms[U].reallocate(T[U]||0),T[U]=0}for(var G=0,q=ae.length;G<q;G++){var Z=ae[G];C[Z]=k,A[C[Z]]={type:"edge",id:Z},k++;var ce=this.edgeDataCache[Z];this.addEdgeToProgram(Z,C[Z],T[ce.type]++)}return this.itemIDsIndex=A,this.nodeIndices=E,this.edgeIndices=C,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var a=this,l=this.settings;if(this.camera.minRatio=l.minCameraRatio,this.camera.maxRatio=l.maxCameraRatio,this.camera.enabledZooming=l.enableCameraZooming,this.camera.enabledPanning=l.enableCameraPanning,this.camera.enabledRotation=l.enableCameraRotation,l.cameraPanBoundaries?this.camera.clean=function(m){return a.cleanCameraState(m,l.cameraPanBoundaries&&xf(l.cameraPanBoundaries)==="object"?l.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==l.edgeProgramClasses){for(var u in l.edgeProgramClasses)l.edgeProgramClasses[u]!==i.edgeProgramClasses[u]&&this.registerEdgeProgram(u,l.edgeProgramClasses[u]);for(var h in i.edgeProgramClasses)l.edgeProgramClasses[h]||this.unregisterEdgeProgram(h)}if(i.nodeProgramClasses!==l.nodeProgramClasses||i.nodeHoverProgramClasses!==l.nodeHoverProgramClasses){for(var d in l.nodeProgramClasses)(l.nodeProgramClasses[d]!==i.nodeProgramClasses[d]||l.nodeHoverProgramClasses[d]!==i.nodeHoverProgramClasses[d])&&this.registerNodeProgram(d,l.nodeProgramClasses[d],l.nodeHoverProgramClasses[d]);for(var p in i.nodeProgramClasses)l.nodeProgramClasses[p]||this.unregisterNodeProgram(p)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.tolerance,u=l===void 0?0:l,h=a.boundaries,d=Ne({},i),p=h||this.nodeExtent,m=oa(p.x,2),v=m[0],_=m[1],y=oa(p.y,2),S=y[0],E=y[1],C=[this.graphToViewport({x:v,y:S},{cameraState:i}),this.graphToViewport({x:_,y:S},{cameraState:i}),this.graphToViewport({x:v,y:E},{cameraState:i}),this.graphToViewport({x:_,y:E},{cameraState:i})],A=1/0,k=-1/0,O=1/0,N=-1/0;C.forEach(function(T){var ae=T.x,P=T.y;A=Math.min(A,ae),k=Math.max(k,ae),O=Math.min(O,P),N=Math.max(N,P)});var D=k-A,W=N-O,V=this.getDimensions(),J=V.width,Y=V.height,ie=0,ye=0;if(D>=J?k<J-u?ie=k-(J-u):A>u&&(ie=A-u):k>J+u?ie=k-(J+u):A<-u&&(ie=A+u),W>=Y?N<Y-u?ye=N-(Y-u):O>u&&(ye=O-u):N>Y+u?ye=N-(Y+u):O<-u&&(ye=O+u),ie||ye){var L=this.viewportToFramedGraph({x:0,y:0},{cameraState:i}),x=this.viewportToFramedGraph({x:ie,y:ye},{cameraState:i});ie=x.x-L.x,ye=x.y-L.y,d.x+=ie,d.y+=ye}return d}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),a=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);Ry(a,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var l=this.canvasContexts.labels,u=0,h=a.length;u<h;u++){var d=a[u],p=this.nodeDataCache[d];if(!this.displayedNodeLabels.has(d)&&!p.hidden){var m=this.framedGraphToViewport(p),v=m.x,_=m.y,y=this.scaleSize(p.size);if(!(!p.forceLabel&&y<this.settings.labelRenderedSizeThreshold)&&!(v<-xy||v>this.width+xy||_<-Oy||_>this.height+Oy)){this.displayedNodeLabels.add(d);var S=this.settings.defaultDrawNodeLabel,E=this.nodePrograms[p.type],C=(E==null?void 0:E.drawLabel)||S;C(l,Ne(Ne({key:d},p),{},{size:y,x:v,y:_}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var a=ER({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});Ry(a,this.edgesWithForcedLabels);for(var l=new Set,u=0,h=a.length;u<h;u++){var d=a[u],p=this.graph.extremities(d),m=this.nodeDataCache[p[0]],v=this.nodeDataCache[p[1]],_=this.edgeDataCache[d];if(!l.has(d)&&!(_.hidden||m.hidden||v.hidden)){var y=this.settings.defaultDrawEdgeLabel,S=this.edgePrograms[_.type],E=(S==null?void 0:S.drawLabel)||y;E(i,Ne(Ne({key:d},_),{},{size:this.scaleSize(_.size)}),Ne(Ne(Ne({key:p[0]},m),this.framedGraphToViewport(m)),{},{size:this.scaleSize(m.size)}),Ne(Ne(Ne({key:p[1]},v),this.framedGraphToViewport(v)),{},{size:this.scaleSize(v.size)}),this.settings),l.add(d)}}return this.displayedEdgeLabels=l,this}},{key:"renderHighlightedNodes",value:function(){var i=this,a=this.canvasContexts.hovers;a.clearRect(0,0,this.width,this.height);var l=function(y){var S=i.nodeDataCache[y],E=i.framedGraphToViewport(S),C=E.x,A=E.y,k=i.scaleSize(S.size),O=i.settings.defaultDrawNodeHover,N=i.nodePrograms[S.type],D=(N==null?void 0:N.drawHover)||O;D(a,Ne(Ne({key:y},S),{},{size:k,x:C,y:A}),i.settings)},u=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&u.push(this.hoveredNode),this.highlightedNodes.forEach(function(_){_!==i.hoveredNode&&u.push(_)}),u.forEach(function(_){return l(_)});var h={};u.forEach(function(_){var y=i.nodeDataCache[_].type;h[y]=(h[y]||0)+1});for(var d in this.nodeHoverPrograms)this.nodeHoverPrograms[d].reallocate(h[d]||0),h[d]=0;u.forEach(function(_){var y=i.nodeDataCache[_];i.nodeHoverPrograms[y.type].process(0,h[y.type]++,y)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var p=this.getRenderParams();for(var m in this.nodeHoverPrograms){var v=this.nodeHoverPrograms[m];v.render(p)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var a=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(C){return i.resetWebGLTexture(C)}),!this.graph.order)return a();var l=this.mouseCaptor,u=this.camera.isAnimated()||l.isMoving||l.draggedEvents||l.currentWheelDirection,h=this.camera.getState(),d=this.getDimensions(),p=this.getGraphDimensions(),m=this.getStagePadding();this.matrix=So(h,d,p,m),this.invMatrix=So(h,d,p,m,!0),this.correctionRatio=nR(this.matrix,h,d),this.graphToViewportRatio=this.getGraphToViewportRatio();var v=this.getRenderParams();for(var _ in this.nodePrograms){var y=this.nodePrograms[_];y.render(v)}if(!this.settings.hideEdgesOnMove||!u)for(var S in this.edgePrograms){var E=this.edgePrograms[S];E.render(v)}return this.settings.hideLabelsOnMove&&u||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),a()}},{key:"addNode",value:function(i){var a=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(a=this.settings.nodeReducer(i,a));var l=wR(this.settings,i,a);this.nodeDataCache[i]=l,this.nodesWithForcedLabels.delete(i),l.forceLabel&&!l.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),l.highlighted&&!l.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(l.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=l.zIndex),l.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=l.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var a=this.nodeDataCache[i];this.normalizationFunction.applyTo(a)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var a=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(a=this.settings.edgeReducer(i,a));var l=SR(this.settings,i,a);this.edgeDataCache[i]=l,this.edgesWithForcedLabels.delete(i),l.forceLabel&&!l.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(l.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=l.zIndex),l.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=l.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new Iy,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,a,l){var u=this.nodeDataCache[i],h=this.nodePrograms[u.type];if(!h)throw new Error('Sigma: could not find a suitable program for node type "'.concat(u.type,'"!'));h.process(a,l,u),this.nodeProgramIndex[i]=l}},{key:"addEdgeToProgram",value:function(i,a,l){var u=this.edgeDataCache[i],h=this.edgePrograms[u.type];if(!h)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(u.type,'"!'));var d=this.graph.extremities(i),p=this.nodeDataCache[d[0]],m=this.nodeDataCache[d[1]];h.process(a,l,p,m,u),this.edgeProgramIndex[i]=l}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,a=i.stagePadding,l=i.autoRescale;return l&&a||0}},{key:"createLayer",value:function(i,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var u=sR(a,{position:"absolute"},{class:"sigma-".concat(i)});return l.style&&Object.assign(u.style,l.style),this.elements[i]=u,"beforeLayer"in l&&l.beforeLayer?this.elements[l.beforeLayer].before(u):"afterLayer"in l&&l.afterLayer?this.elements[l.afterLayer].after(u):this.container.appendChild(u),u}},{key:"createCanvas",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",a)}},{key:"createCanvasContext",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=this.createCanvas(i,a),u={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=l.getContext("2d",u),this}},{key:"createWebGLContext",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(a==null?void 0:a.canvas)||this.createCanvas(i,a);a.hidden&&l.remove();var u=Ne({preserveDrawingBuffer:!1,antialias:!1},a),h;h=l.getContext("webgl2",u),h||(h=l.getContext("webgl",u)),h||(h=l.getContext("experimental-webgl",u));var d=h;if(this.webGLContexts[i]=d,d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),a.picking){this.pickingLayers.add(i);var p=d.createFramebuffer();if(!p)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=p}return d}},{key:"killLayer",value:function(i){var a=this.elements[i];if(!a)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var l,u=this.webGLContexts[i];(l=u.getExtension("WEBGL_lose_context"))===null||l===void 0||l.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return a.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.hoveredNode&&!i.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!i.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var a=this.nodeDataCache[i];return a?Object.assign({},a):void 0}},{key:"getEdgeDisplayData",value:function(i){var a=this.edgeDataCache[i];return a?Object.assign({},a):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return Ne({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,a){var l=Ne({},this.settings);return this.settings[i]=a,nf(this.settings),this.handleSettingsUpdate(l),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,a){return this.setSetting(i,a(this.settings[i])),this}},{key:"setSettings",value:function(i){var a=Ne({},this.settings);return this.settings=Ne(Ne({},this.settings),i),nf(this.settings),this.handleSettingsUpdate(a),this.scheduleRefresh(),this}},{key:"resize",value:function(i){var a=this.width,l=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=Ty(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&a===this.width&&l===this.height)return this;for(var u in this.elements){var h=this.elements[u];h.style.width=this.width+"px",h.style.height=this.height+"px"}for(var d in this.canvasContexts)this.elements[d].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[d].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[d].scale(this.pixelRatio,this.pixelRatio);for(var p in this.webGLContexts){this.elements[p].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[p].setAttribute("height",this.height*this.pixelRatio+"px");var m=this.webGLContexts[p];if(m.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(p)){var v=this.textures[p];v&&m.deleteTexture(v)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var a=this,l=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,u=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,h=!i||!i.partialGraph;if(h)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(N){return a.addNode(N)}),this.graph.forEachEdge(function(N){return a.addEdge(N)});else{for(var d,p,m=((d=i.partialGraph)===null||d===void 0?void 0:d.nodes)||[],v=0,_=(m==null?void 0:m.length)||0;v<_;v++){var y=m[v];if(this.updateNode(y),l){var S=this.nodeProgramIndex[y];if(S===void 0)throw new Error('Sigma: node "'.concat(y,`" can't be repaint`));this.addNodeToProgram(y,this.nodeIndices[y],S)}}for(var E=(i==null||(p=i.partialGraph)===null||p===void 0?void 0:p.edges)||[],C=0,A=E.length;C<A;C++){var k=E[C];if(this.updateEdge(k),l){var O=this.edgeProgramIndex[k];if(O===void 0)throw new Error('Sigma: edge "'.concat(k,`" can't be repaint`));this.addEdgeToProgram(k,this.edgeIndices[k],O)}}}return(h||!l)&&(this.needToProcess=!0),u?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(Ne(Ne({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,a){var l=this.camera.getState(),u=l.ratio,h=l.angle,d=l.x,p=l.y,m=this.settings,v=m.minCameraRatio,_=m.maxCameraRatio;typeof _=="number"&&(a=Math.min(a,_)),typeof v=="number"&&(a=Math.max(a,v));var y=a/u,S={x:this.width/2,y:this.height/2},E=this.viewportToFramedGraph(i),C=this.viewportToFramedGraph(S);return{angle:h,x:(E.x-C.x)*(1-y)+d,y:(E.y-C.y)*(1-y)+p,ratio:a}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),a=this.viewportToFramedGraph({x:this.width,y:0}),l=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:a.x,y2:a.y,height:a.y-l.y}}},{key:"framedGraphToViewport",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=!!a.cameraState||!!a.viewportDimensions||!!a.graphDimensions,u=a.matrix?a.matrix:l?So(a.cameraState||this.camera.getState(),a.viewportDimensions||this.getDimensions(),a.graphDimensions||this.getGraphDimensions(),a.padding||this.getStagePadding()):this.matrix,h=If(u,i);return{x:(1+h.x)*this.width/2,y:(1-h.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=!!a.cameraState||!!a.viewportDimensions||!a.graphDimensions,u=a.matrix?a.matrix:l?So(a.cameraState||this.camera.getState(),a.viewportDimensions||this.getDimensions(),a.graphDimensions||this.getGraphDimensions(),a.padding||this.getStagePadding(),!0):this.invMatrix,h=If(u,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),h}},{key:"viewportToGraph",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,a))}},{key:"graphToViewport",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),a)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},a={x:1,y:1},l=Math.sqrt(Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2)),u=this.graphToViewport(i),h=this.graphToViewport(a),d=Math.sqrt(Math.pow(u.x-h.x,2)+Math.pow(u.y-h.y,2));return d/l}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);for(var a in this.nodePrograms)this.nodePrograms[a].kill();for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].kill();for(var u in this.edgePrograms)this.edgePrograms[u].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var h in this.elements)this.killLayer(h);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(a)*(this.getSetting("itemSizesReference")==="positions"?a*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var a in this.elements)this.elements[a]instanceof HTMLCanvasElement&&(i[a]=this.elements[a]);return i}}])}(lp),CR=TR,Ao={},Ly;function AR(){if(Ly)return Ao;Ly=1;function r(i){return typeof i!="number"||isNaN(i)?1:i}function e(i,a){var l={},u=function(p){return typeof p>"u"?a:p};typeof a=="function"&&(u=a);var h=function(p){return u(p[i])},d=function(){return u(void 0)};return typeof i=="string"?(l.fromAttributes=h,l.fromGraph=function(p,m){return h(p.getNodeAttributes(m))},l.fromEntry=function(p,m){return h(m)}):typeof i=="function"?(l.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},l.fromGraph=function(p,m){return u(i(m,p.getNodeAttributes(m)))},l.fromEntry=function(p,m){return u(i(p,m))}):(l.fromAttributes=d,l.fromGraph=d,l.fromEntry=d),l}function t(i,a){var l={},u=function(p){return typeof p>"u"?a:p};typeof a=="function"&&(u=a);var h=function(p){return u(p[i])},d=function(){return u(void 0)};return typeof i=="string"?(l.fromAttributes=h,l.fromGraph=function(p,m){return h(p.getEdgeAttributes(m))},l.fromEntry=function(p,m){return h(m)},l.fromPartialEntry=l.fromEntry,l.fromMinimalEntry=l.fromEntry):typeof i=="function"?(l.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},l.fromGraph=function(p,m){var v=p.extremities(m);return u(i(m,p.getEdgeAttributes(m),v[0],v[1],p.getNodeAttributes(v[0]),p.getNodeAttributes(v[1]),p.isUndirected(m)))},l.fromEntry=function(p,m,v,_,y,S,E){return u(i(p,m,v,_,y,S,E))},l.fromPartialEntry=function(p,m,v,_){return u(i(p,m,v,_))},l.fromMinimalEntry=function(p,m){return u(i(p,m))}):(l.fromAttributes=d,l.fromGraph=d,l.fromEntry=d,l.fromMinimalEntry=d),l}return Ao.createNodeValueGetter=e,Ao.createEdgeValueGetter=t,Ao.createEdgeWeightGetter=function(i){return t(i,r)},Ao}var sf,My;function RR(){if(My)return sf;My=1;var r=0,e=1,t=2,i=3,a=4,l=5,u=6,h=7,d=8,p=9,m=0,v=1,_=2,y=0,S=1,E=2,C=3,A=4,k=5,O=6,N=7,D=8,W=3,V=10,J=3,Y=9,ie=10;return sf=function(L,x,T){var ae,P,I,he,re,U,G,q,Z,ce,ue=x.length,Ae=T.length,qe=L.adjustSizes,De=L.barnesHutTheta*L.barnesHutTheta,Fe,Pe,Ie,Be,dt,b,Q,B=[];for(I=0;I<ue;I+=V)x[I+a]=x[I+t],x[I+l]=x[I+i],x[I+t]=0,x[I+i]=0;if(L.outboundAttractionDistribution){for(Fe=0,I=0;I<ue;I+=V)Fe+=x[I+u];Fe/=ue/V}if(L.barnesHutOptimize){var z=1/0,M=-1/0,K=1/0,ge=-1/0,F,H,oe;for(I=0;I<ue;I+=V)z=Math.min(z,x[I+r]),M=Math.max(M,x[I+r]),K=Math.min(K,x[I+e]),ge=Math.max(ge,x[I+e]);var ve=M-z,de=ge-K;for(ve>de?(K-=(ve-de)/2,ge=K+ve):(z-=(de-ve)/2,M=z+de),B[0+y]=-1,B[0+S]=(z+M)/2,B[0+E]=(K+ge)/2,B[0+C]=Math.max(M-z,ge-K),B[0+A]=-1,B[0+k]=-1,B[0+O]=0,B[0+N]=0,B[0+D]=0,ae=1,I=0;I<ue;I+=V)for(P=0,oe=W;;)if(B[P+k]>=0){x[I+r]<B[P+S]?x[I+e]<B[P+E]?F=B[P+k]:F=B[P+k]+Y:x[I+e]<B[P+E]?F=B[P+k]+Y*2:F=B[P+k]+Y*3,B[P+N]=(B[P+N]*B[P+O]+x[I+r]*x[I+u])/(B[P+O]+x[I+u]),B[P+D]=(B[P+D]*B[P+O]+x[I+e]*x[I+u])/(B[P+O]+x[I+u]),B[P+O]+=x[I+u],P=F;continue}else if(B[P+y]<0){B[P+y]=I;break}else{if(B[P+k]=ae*Y,q=B[P+C]/2,Z=B[P+k],B[Z+y]=-1,B[Z+S]=B[P+S]-q,B[Z+E]=B[P+E]-q,B[Z+C]=q,B[Z+A]=Z+Y,B[Z+k]=-1,B[Z+O]=0,B[Z+N]=0,B[Z+D]=0,Z+=Y,B[Z+y]=-1,B[Z+S]=B[P+S]-q,B[Z+E]=B[P+E]+q,B[Z+C]=q,B[Z+A]=Z+Y,B[Z+k]=-1,B[Z+O]=0,B[Z+N]=0,B[Z+D]=0,Z+=Y,B[Z+y]=-1,B[Z+S]=B[P+S]+q,B[Z+E]=B[P+E]-q,B[Z+C]=q,B[Z+A]=Z+Y,B[Z+k]=-1,B[Z+O]=0,B[Z+N]=0,B[Z+D]=0,Z+=Y,B[Z+y]=-1,B[Z+S]=B[P+S]+q,B[Z+E]=B[P+E]+q,B[Z+C]=q,B[Z+A]=B[P+A],B[Z+k]=-1,B[Z+O]=0,B[Z+N]=0,B[Z+D]=0,ae+=4,x[B[P+y]+r]<B[P+S]?x[B[P+y]+e]<B[P+E]?F=B[P+k]:F=B[P+k]+Y:x[B[P+y]+e]<B[P+E]?F=B[P+k]+Y*2:F=B[P+k]+Y*3,B[P+O]=x[B[P+y]+u],B[P+N]=x[B[P+y]+r],B[P+D]=x[B[P+y]+e],B[F+y]=B[P+y],B[P+y]=-1,x[I+r]<B[P+S]?x[I+e]<B[P+E]?H=B[P+k]:H=B[P+k]+Y:x[I+e]<B[P+E]?H=B[P+k]+Y*2:H=B[P+k]+Y*3,F===H)if(oe--){P=F;continue}else{oe=W;break}B[H+y]=I;break}}if(L.barnesHutOptimize)for(Pe=L.scalingRatio,I=0;I<ue;I+=V)for(P=0;;)if(B[P+k]>=0)if(b=Math.pow(x[I+r]-B[P+N],2)+Math.pow(x[I+e]-B[P+D],2),ce=B[P+C],4*ce*ce/b<De){if(Ie=x[I+r]-B[P+N],Be=x[I+e]-B[P+D],qe===!0?b>0?(Q=Pe*x[I+u]*B[P+O]/b,x[I+t]+=Ie*Q,x[I+i]+=Be*Q):b<0&&(Q=-Pe*x[I+u]*B[P+O]/Math.sqrt(b),x[I+t]+=Ie*Q,x[I+i]+=Be*Q):b>0&&(Q=Pe*x[I+u]*B[P+O]/b,x[I+t]+=Ie*Q,x[I+i]+=Be*Q),P=B[P+A],P<0)break;continue}else{P=B[P+k];continue}else{if(U=B[P+y],U>=0&&U!==I&&(Ie=x[I+r]-x[U+r],Be=x[I+e]-x[U+e],b=Ie*Ie+Be*Be,qe===!0?b>0?(Q=Pe*x[I+u]*x[U+u]/b,x[I+t]+=Ie*Q,x[I+i]+=Be*Q):b<0&&(Q=-Pe*x[I+u]*x[U+u]/Math.sqrt(b),x[I+t]+=Ie*Q,x[I+i]+=Be*Q):b>0&&(Q=Pe*x[I+u]*x[U+u]/b,x[I+t]+=Ie*Q,x[I+i]+=Be*Q)),P=B[P+A],P<0)break;continue}else for(Pe=L.scalingRatio,he=0;he<ue;he+=V)for(re=0;re<he;re+=V)Ie=x[he+r]-x[re+r],Be=x[he+e]-x[re+e],qe===!0?(b=Math.sqrt(Ie*Ie+Be*Be)-x[he+d]-x[re+d],b>0?(Q=Pe*x[he+u]*x[re+u]/b/b,x[he+t]+=Ie*Q,x[he+i]+=Be*Q,x[re+t]-=Ie*Q,x[re+i]-=Be*Q):b<0&&(Q=100*Pe*x[he+u]*x[re+u],x[he+t]+=Ie*Q,x[he+i]+=Be*Q,x[re+t]-=Ie*Q,x[re+i]-=Be*Q)):(b=Math.sqrt(Ie*Ie+Be*Be),b>0&&(Q=Pe*x[he+u]*x[re+u]/b/b,x[he+t]+=Ie*Q,x[he+i]+=Be*Q,x[re+t]-=Ie*Q,x[re+i]-=Be*Q));for(Z=L.gravity/L.scalingRatio,Pe=L.scalingRatio,I=0;I<ue;I+=V)Q=0,Ie=x[I+r],Be=x[I+e],b=Math.sqrt(Math.pow(Ie,2)+Math.pow(Be,2)),L.strongGravityMode?b>0&&(Q=Pe*x[I+u]*Z):b>0&&(Q=Pe*x[I+u]*Z/b),x[I+t]-=Ie*Q,x[I+i]-=Be*Q;for(Pe=1*(L.outboundAttractionDistribution?Fe:1),G=0;G<Ae;G+=J)he=T[G+m],re=T[G+v],q=T[G+_],dt=Math.pow(q,L.edgeWeightInfluence),Ie=x[he+r]-x[re+r],Be=x[he+e]-x[re+e],qe===!0?(b=Math.sqrt(Ie*Ie+Be*Be)-x[he+d]-x[re+d],L.linLogMode?L.outboundAttractionDistribution?b>0&&(Q=-Pe*dt*Math.log(1+b)/b/x[he+u]):b>0&&(Q=-Pe*dt*Math.log(1+b)/b):L.outboundAttractionDistribution?b>0&&(Q=-Pe*dt/x[he+u]):b>0&&(Q=-Pe*dt)):(b=Math.sqrt(Math.pow(Ie,2)+Math.pow(Be,2)),L.linLogMode?L.outboundAttractionDistribution?b>0&&(Q=-Pe*dt*Math.log(1+b)/b/x[he+u]):b>0&&(Q=-Pe*dt*Math.log(1+b)/b):L.outboundAttractionDistribution?(b=1,Q=-Pe*dt/x[he+u]):(b=1,Q=-Pe*dt)),b>0&&(x[he+t]+=Ie*Q,x[he+i]+=Be*Q,x[re+t]-=Ie*Q,x[re+i]-=Be*Q);var le,be,Te,Re,He,Je;if(qe===!0)for(I=0;I<ue;I+=V)x[I+p]!==1&&(le=Math.sqrt(Math.pow(x[I+t],2)+Math.pow(x[I+i],2)),le>ie&&(x[I+t]=x[I+t]*ie/le,x[I+i]=x[I+i]*ie/le),be=x[I+u]*Math.sqrt((x[I+a]-x[I+t])*(x[I+a]-x[I+t])+(x[I+l]-x[I+i])*(x[I+l]-x[I+i])),Te=Math.sqrt((x[I+a]+x[I+t])*(x[I+a]+x[I+t])+(x[I+l]+x[I+i])*(x[I+l]+x[I+i]))/2,Re=.1*Math.log(1+Te)/(1+Math.sqrt(be)),He=x[I+r]+x[I+t]*(Re/L.slowDown),x[I+r]=He,Je=x[I+e]+x[I+i]*(Re/L.slowDown),x[I+e]=Je);else for(I=0;I<ue;I+=V)x[I+p]!==1&&(be=x[I+u]*Math.sqrt((x[I+a]-x[I+t])*(x[I+a]-x[I+t])+(x[I+l]-x[I+i])*(x[I+l]-x[I+i])),Te=Math.sqrt((x[I+a]+x[I+t])*(x[I+a]+x[I+t])+(x[I+l]+x[I+i])*(x[I+l]+x[I+i]))/2,Re=x[I+h]*Math.log(1+Te)/(1+Math.sqrt(be)),x[I+h]=Math.min(1,Math.sqrt(Re*(Math.pow(x[I+t],2)+Math.pow(x[I+i],2))/(1+Math.sqrt(be)))),He=x[I+r]+x[I+t]*(Re/L.slowDown),x[I+r]=He,Je=x[I+e]+x[I+i]*(Re/L.slowDown),x[I+e]=Je);return{}},sf}var wi={},Uy;function kR(){if(Uy)return wi;Uy=1;var r=10,e=3;return wi.assign=function(t){t=t||{};var i=Array.prototype.slice.call(arguments).slice(1),a,l,u;for(a=0,u=i.length;a<u;a++)if(i[a])for(l in i[a])t[l]=i[a][l];return t},wi.validateSettings=function(t){return"linLogMode"in t&&typeof t.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&typeof t.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&typeof t.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&typeof t.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in t&&!(typeof t.scalingRatio=="number"&&t.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in t&&typeof t.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in t&&!(typeof t.gravity=="number"&&t.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in t&&!(typeof t.slowDown=="number"||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&typeof t.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in t&&!(typeof t.barnesHutTheta=="number"&&t.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},wi.graphToByteArrays=function(t,i){var a=t.order,l=t.size,u={},h,d=new Float32Array(a*r),p=new Float32Array(l*e);return h=0,t.forEachNode(function(m,v){u[m]=h,d[h]=v.x,d[h+1]=v.y,d[h+2]=0,d[h+3]=0,d[h+4]=0,d[h+5]=0,d[h+6]=1,d[h+7]=1,d[h+8]=v.size||1,d[h+9]=v.fixed?1:0,h+=r}),h=0,t.forEachEdge(function(m,v,_,y,S,E,C){var A=u[_],k=u[y],O=i(m,v,_,y,S,E,C);d[A+6]+=O,d[k+6]+=O,p[h]=A,p[h+1]=k,p[h+2]=O,h+=e}),{nodes:d,edges:p}},wi.assignLayoutChanges=function(t,i,a){var l=0;t.updateEachNodeAttributes(function(u,h){return h.x=i[l],h.y=i[l+1],l+=r,a?a(u,h):h})},wi.readGraphPositions=function(t,i){var a=0;t.forEachNode(function(l,u){i[a]=u.x,i[a+1]=u.y,a+=r})},wi.collectLayoutChanges=function(t,i,a){for(var l=t.nodes(),u={},h=0,d=0,p=i.length;h<p;h+=r){if(a){var m=Object.assign({},t.getNodeAttributes(l[d]));m.x=i[h],m.y=i[h+1],m=a(l[d],m),u[l[d]]={x:m.x,y:m.y}}else u[l[d]]={x:i[h],y:i[h+1]};d++}return u},wi.createWorker=function(i){var a=window.URL||window.webkitURL,l=i.toString(),u=a.createObjectURL(new Blob(["("+l+").call(this);"],{type:"text/javascript"})),h=new Worker(u);return a.revokeObjectURL(u),h},wi}var af,zy;function DR(){return zy||(zy=1,af={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),af}var of,Py;function NR(){if(Py)return of;Py=1;var r=B0(),e=AR().createEdgeWeightGetter,t=RR(),i=kR(),a=DR();function l(d,p,m){if(!r(p))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof m=="number"&&(m={iterations:m});var v=m.iterations;if(typeof v!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(v<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var _=e("getEdgeWeight"in m?m.getEdgeWeight:"weight").fromEntry,y=typeof m.outputReducer=="function"?m.outputReducer:null,S=i.assign({},a,m.settings),E=i.validateSettings(S);if(E)throw new Error("graphology-layout-forceatlas2: "+E.message);var C=i.graphToByteArrays(p,_),A;for(A=0;A<v;A++)t(S,C.nodes,C.edges);if(d){i.assignLayoutChanges(p,C.nodes,y);return}return i.collectLayoutChanges(p,C.nodes)}function u(d){var p=typeof d=="number"?d:d.order;return{barnesHutOptimize:p>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(p)}}var h=l.bind(null,!1);return h.assign=l.bind(null,!0),h.inferSettings=u,of=h,of}var IR=NR();const lf=tp(IR);function Du(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var uf={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Gy;function xR(){return Gy||(Gy=1,function(r,e){(function(t){r.exports=t()})(function(){return function t(i,a,l){function u(p,m){if(!a[p]){if(!i[p]){var v=typeof Du=="function"&&Du;if(!m&&v)return v(p,!0);if(h)return h(p,!0);var _=new Error("Cannot find module '"+p+"'");throw _.code="MODULE_NOT_FOUND",_}var y=a[p]={exports:{}};i[p][0].call(y.exports,function(S){var E=i[p][1][S];return u(E||S)},y,y.exports,t,i,a,l)}return a[p].exports}for(var h=typeof Du=="function"&&Du,d=0;d<l.length;d++)u(l[d]);return u}({1:[function(t,i,a){var l=t("./utils"),u=t("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(d){for(var p,m,v,_,y,S,E,C=[],A=0,k=d.length,O=k,N=l.getTypeOf(d)!=="string";A<d.length;)O=k-A,v=N?(p=d[A++],m=A<k?d[A++]:0,A<k?d[A++]:0):(p=d.charCodeAt(A++),m=A<k?d.charCodeAt(A++):0,A<k?d.charCodeAt(A++):0),_=p>>2,y=(3&p)<<4|m>>4,S=1<O?(15&m)<<2|v>>6:64,E=2<O?63&v:64,C.push(h.charAt(_)+h.charAt(y)+h.charAt(S)+h.charAt(E));return C.join("")},a.decode=function(d){var p,m,v,_,y,S,E=0,C=0,A="data:";if(d.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var k,O=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===h.charAt(64)&&O--,d.charAt(d.length-2)===h.charAt(64)&&O--,O%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=u.uint8array?new Uint8Array(0|O):new Array(0|O);E<d.length;)p=h.indexOf(d.charAt(E++))<<2|(_=h.indexOf(d.charAt(E++)))>>4,m=(15&_)<<4|(y=h.indexOf(d.charAt(E++)))>>2,v=(3&y)<<6|(S=h.indexOf(d.charAt(E++))),k[C++]=p,y!==64&&(k[C++]=m),S!==64&&(k[C++]=v);return k}},{"./support":30,"./utils":32}],2:[function(t,i,a){var l=t("./external"),u=t("./stream/DataWorker"),h=t("./stream/Crc32Probe"),d=t("./stream/DataLengthProbe");function p(m,v,_,y,S){this.compressedSize=m,this.uncompressedSize=v,this.crc32=_,this.compression=y,this.compressedContent=S}p.prototype={getContentWorker:function(){var m=new u(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),v=this;return m.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new u(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(m,v,_){return m.pipe(new h).pipe(new d("uncompressedSize")).pipe(v.compressWorker(_)).pipe(new d("compressedSize")).withStreamInfo("compression",v)},i.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,a){var l=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,a){var l=t("./utils"),u=function(){for(var h,d=[],p=0;p<256;p++){h=p;for(var m=0;m<8;m++)h=1&h?3988292384^h>>>1:h>>>1;d[p]=h}return d}();i.exports=function(h,d){return h!==void 0&&h.length?l.getTypeOf(h)!=="string"?function(p,m,v,_){var y=u,S=_+v;p^=-1;for(var E=_;E<S;E++)p=p>>>8^y[255&(p^m[E])];return-1^p}(0|d,h,h.length,0):function(p,m,v,_){var y=u,S=_+v;p^=-1;for(var E=_;E<S;E++)p=p>>>8^y[255&(p^m.charCodeAt(E))];return-1^p}(0|d,h,h.length,0):0}},{"./utils":32}],5:[function(t,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,i,a){var l=null;l=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:l}},{lie:37}],7:[function(t,i,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=t("pako"),h=t("./utils"),d=t("./stream/GenericWorker"),p=l?"uint8array":"array";function m(v,_){d.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=_,this.meta={}}a.magic="\b\0",h.inherits(m,d),m.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(p,v.data),!1)},m.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(_){v.push({data:_,meta:v.meta})}},a.compressWorker=function(v){return new m("Deflate",v)},a.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,a){function l(y,S){var E,C="";for(E=0;E<S;E++)C+=String.fromCharCode(255&y),y>>>=8;return C}function u(y,S,E,C,A,k){var O,N,D=y.file,W=y.compression,V=k!==p.utf8encode,J=h.transformTo("string",k(D.name)),Y=h.transformTo("string",p.utf8encode(D.name)),ie=D.comment,ye=h.transformTo("string",k(ie)),L=h.transformTo("string",p.utf8encode(ie)),x=Y.length!==D.name.length,T=L.length!==ie.length,ae="",P="",I="",he=D.dir,re=D.date,U={crc32:0,compressedSize:0,uncompressedSize:0};S&&!E||(U.crc32=y.crc32,U.compressedSize=y.compressedSize,U.uncompressedSize=y.uncompressedSize);var G=0;S&&(G|=8),V||!x&&!T||(G|=2048);var q=0,Z=0;he&&(q|=16),A==="UNIX"?(Z=798,q|=function(ue,Ae){var qe=ue;return ue||(qe=Ae?16893:33204),(65535&qe)<<16}(D.unixPermissions,he)):(Z=20,q|=function(ue){return 63&(ue||0)}(D.dosPermissions)),O=re.getUTCHours(),O<<=6,O|=re.getUTCMinutes(),O<<=5,O|=re.getUTCSeconds()/2,N=re.getUTCFullYear()-1980,N<<=4,N|=re.getUTCMonth()+1,N<<=5,N|=re.getUTCDate(),x&&(P=l(1,1)+l(m(J),4)+Y,ae+="up"+l(P.length,2)+P),T&&(I=l(1,1)+l(m(ye),4)+L,ae+="uc"+l(I.length,2)+I);var ce="";return ce+=`
\0`,ce+=l(G,2),ce+=W.magic,ce+=l(O,2),ce+=l(N,2),ce+=l(U.crc32,4),ce+=l(U.compressedSize,4),ce+=l(U.uncompressedSize,4),ce+=l(J.length,2),ce+=l(ae.length,2),{fileRecord:v.LOCAL_FILE_HEADER+ce+J+ae,dirRecord:v.CENTRAL_FILE_HEADER+l(Z,2)+ce+l(ye.length,2)+"\0\0\0\0"+l(q,4)+l(C,4)+J+ae+ye}}var h=t("../utils"),d=t("../stream/GenericWorker"),p=t("../utf8"),m=t("../crc32"),v=t("../signature");function _(y,S,E,C){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=E,this.encodeFileName=C,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(_,d),_.prototype.push=function(y){var S=y.meta.percent||0,E=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,d.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:E?(S+100*(E-C-1))/E:100}}))},_.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var S=this.streamFiles&&!y.file.dir;if(S){var E=u(y,S,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:E.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(y){this.accumulate=!1;var S=this.streamFiles&&!y.file.dir,E=u(y,S,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(E.dirRecord),S)this.push({data:function(C){return v.DATA_DESCRIPTOR+l(C.crc32,4)+l(C.compressedSize,4)+l(C.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:E.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var y=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var E=this.bytesWritten-y,C=function(A,k,O,N,D){var W=h.transformTo("string",D(N));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(A,2)+l(A,2)+l(k,4)+l(O,4)+l(W.length,2)+W}(this.dirRecords.length,E,y,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(y){this._sources.push(y);var S=this;return y.on("data",function(E){S.processChunk(E)}),y.on("end",function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()}),y.on("error",function(E){S.error(E)}),this},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(y){var S=this._sources;if(!d.prototype.error.call(this,y))return!1;for(var E=0;E<S.length;E++)try{S[E].error(y)}catch{}return!0},_.prototype.lock=function(){d.prototype.lock.call(this);for(var y=this._sources,S=0;S<y.length;S++)y[S].lock()},i.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,a){var l=t("../compressions"),u=t("./ZipFileWorker");a.generateWorker=function(h,d,p){var m=new u(d.streamFiles,p,d.platform,d.encodeFileName),v=0;try{h.forEach(function(_,y){v++;var S=function(k,O){var N=k||O,D=l[N];if(!D)throw new Error(N+" is not a valid compression method !");return D}(y.options.compression,d.compression),E=y.options.compressionOptions||d.compressionOptions||{},C=y.dir,A=y.date;y._compressWorker(S,E).withStreamInfo("file",{name:_,dir:C,date:A,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(m)}),m.entriesCount=v}catch(_){m.error(_)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,a){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new l;for(var h in this)typeof this[h]!="function"&&(u[h]=this[h]);return u}}(l.prototype=t("./object")).loadAsync=t("./load"),l.support=t("./support"),l.defaults=t("./defaults"),l.version="3.10.1",l.loadAsync=function(u,h){return new l().loadAsync(u,h)},l.external=t("./external"),i.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,a){var l=t("./utils"),u=t("./external"),h=t("./utf8"),d=t("./zipEntries"),p=t("./stream/Crc32Probe"),m=t("./nodejsUtils");function v(_){return new u.Promise(function(y,S){var E=_.decompressed.getContentWorker().pipe(new p);E.on("error",function(C){S(C)}).on("end",function(){E.streamInfo.crc32!==_.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}i.exports=function(_,y){var S=this;return y=l.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),m.isNode&&m.isStream(_)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",_,!0,y.optimizedBinaryString,y.base64).then(function(E){var C=new d(y);return C.load(E),C}).then(function(E){var C=[u.Promise.resolve(E)],A=E.files;if(y.checkCRC32)for(var k=0;k<A.length;k++)C.push(v(A[k]));return u.Promise.all(C)}).then(function(E){for(var C=E.shift(),A=C.files,k=0;k<A.length;k++){var O=A[k],N=O.fileNameStr,D=l.resolve(O.fileNameStr);S.file(D,O.decompressed,{binary:!0,optimizedBinaryString:!0,date:O.date,dir:O.dir,comment:O.fileCommentStr.length?O.fileCommentStr:null,unixPermissions:O.unixPermissions,dosPermissions:O.dosPermissions,createFolders:y.createFolders}),O.dir||(S.file(D).unsafeOriginalName=N)}return C.zipComment.length&&(S.comment=C.zipComment),S})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,a){var l=t("../utils"),u=t("../stream/GenericWorker");function h(d,p){u.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(p)}l.inherits(h,u),h.prototype._bindStream=function(d){var p=this;(this._stream=d).pause(),d.on("data",function(m){p.push({data:m,meta:{percent:0}})}).on("error",function(m){p.isPaused?this.generatedError=m:p.error(m)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},h.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,a){var l=t("readable-stream").Readable;function u(h,d,p){l.call(this,d),this._helper=h;var m=this;h.on("data",function(v,_){m.push(v)||m._helper.pause(),p&&p(_)}).on("error",function(v){m.emit("error",v)}).on("end",function(){m.push(null)})}t("../utils").inherits(u,l),u.prototype._read=function(){this._helper.resume()},i.exports=u},{"../utils":32,"readable-stream":16}],14:[function(t,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(l,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(l,u);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer(l,u)},allocBuffer:function(l){if(Buffer.alloc)return Buffer.alloc(l);var u=new Buffer(l);return u.fill(0),u},isBuffer:function(l){return Buffer.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(t,i,a){function l(D,W,V){var J,Y=h.getTypeOf(W),ie=h.extend(V||{},m);ie.date=ie.date||new Date,ie.compression!==null&&(ie.compression=ie.compression.toUpperCase()),typeof ie.unixPermissions=="string"&&(ie.unixPermissions=parseInt(ie.unixPermissions,8)),ie.unixPermissions&&16384&ie.unixPermissions&&(ie.dir=!0),ie.dosPermissions&&16&ie.dosPermissions&&(ie.dir=!0),ie.dir&&(D=A(D)),ie.createFolders&&(J=C(D))&&k.call(this,J,!0);var ye=Y==="string"&&ie.binary===!1&&ie.base64===!1;V&&V.binary!==void 0||(ie.binary=!ye),(W instanceof v&&W.uncompressedSize===0||ie.dir||!W||W.length===0)&&(ie.base64=!1,ie.binary=!0,W="",ie.compression="STORE",Y="string");var L=null;L=W instanceof v||W instanceof d?W:S.isNode&&S.isStream(W)?new E(D,W):h.prepareContent(D,W,ie.binary,ie.optimizedBinaryString,ie.base64);var x=new _(D,L,ie);this.files[D]=x}var u=t("./utf8"),h=t("./utils"),d=t("./stream/GenericWorker"),p=t("./stream/StreamHelper"),m=t("./defaults"),v=t("./compressedObject"),_=t("./zipObject"),y=t("./generate"),S=t("./nodejsUtils"),E=t("./nodejs/NodejsStreamInputAdapter"),C=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var W=D.lastIndexOf("/");return 0<W?D.substring(0,W):""},A=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},k=function(D,W){return W=W!==void 0?W:m.createFolders,D=A(D),this.files[D]||l.call(this,D,null,{dir:!0,createFolders:W}),this.files[D]};function O(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var W,V,J;for(W in this.files)J=this.files[W],(V=W.slice(this.root.length,W.length))&&W.slice(0,this.root.length)===this.root&&D(V,J)},filter:function(D){var W=[];return this.forEach(function(V,J){D(V,J)&&W.push(J)}),W},file:function(D,W,V){if(arguments.length!==1)return D=this.root+D,l.call(this,D,W,V),this;if(O(D)){var J=D;return this.filter(function(ie,ye){return!ye.dir&&J.test(ie)})}var Y=this.files[this.root+D];return Y&&!Y.dir?Y:null},folder:function(D){if(!D)return this;if(O(D))return this.filter(function(Y,ie){return ie.dir&&D.test(Y)});var W=this.root+D,V=k.call(this,W),J=this.clone();return J.root=V.name,J},remove:function(D){D=this.root+D;var W=this.files[D];if(W||(D.slice(-1)!=="/"&&(D+="/"),W=this.files[D]),W&&!W.dir)delete this.files[D];else for(var V=this.filter(function(Y,ie){return ie.name.slice(0,D.length)===D}),J=0;J<V.length;J++)delete this.files[V[J].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var W,V={};try{if((V=h.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=V.type.toLowerCase(),V.compression=V.compression.toUpperCase(),V.type==="binarystring"&&(V.type="string"),!V.type)throw new Error("No output type specified.");h.checkSupport(V.type),V.platform!=="darwin"&&V.platform!=="freebsd"&&V.platform!=="linux"&&V.platform!=="sunos"||(V.platform="UNIX"),V.platform==="win32"&&(V.platform="DOS");var J=V.comment||this.comment||"";W=y.generateWorker(this,V,J)}catch(Y){(W=new d("error")).error(Y)}return new p(W,V.type||"string",V.mimeType)},generateAsync:function(D,W){return this.generateInternalStream(D).accumulate(W)},generateNodeStream:function(D,W){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(W)}};i.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,a){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,a){var l=t("./DataReader");function u(h){l.call(this,h);for(var d=0;d<this.data.length;d++)h[d]=255&h[d]}t("../utils").inherits(u,l),u.prototype.byteAt=function(h){return this.data[this.zero+h]},u.prototype.lastIndexOfSignature=function(h){for(var d=h.charCodeAt(0),p=h.charCodeAt(1),m=h.charCodeAt(2),v=h.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===d&&this.data[_+1]===p&&this.data[_+2]===m&&this.data[_+3]===v)return _-this.zero;return-1},u.prototype.readAndCheckSignature=function(h){var d=h.charCodeAt(0),p=h.charCodeAt(1),m=h.charCodeAt(2),v=h.charCodeAt(3),_=this.readData(4);return d===_[0]&&p===_[1]&&m===_[2]&&v===_[3]},u.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=u},{"../utils":32,"./DataReader":18}],18:[function(t,i,a){var l=t("../utils");function u(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var d,p=0;for(this.checkOffset(h),d=this.index+h-1;d>=this.index;d--)p=(p<<8)+this.byteAt(d);return this.index+=h,p},readString:function(h){return l.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},i.exports=u},{"../utils":32}],19:[function(t,i,a){var l=t("./Uint8ArrayReader");function u(h){l.call(this,h)}t("../utils").inherits(u,l),u.prototype.readData=function(h){this.checkOffset(h);var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,a){var l=t("./DataReader");function u(h){l.call(this,h)}t("../utils").inherits(u,l),u.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},u.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},u.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},u.prototype.readData=function(h){this.checkOffset(h);var d=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=u},{"../utils":32,"./DataReader":18}],21:[function(t,i,a){var l=t("./ArrayReader");function u(h){l.call(this,h)}t("../utils").inherits(u,l),u.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,d},i.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,a){var l=t("../utils"),u=t("../support"),h=t("./ArrayReader"),d=t("./StringReader"),p=t("./NodeBufferReader"),m=t("./Uint8ArrayReader");i.exports=function(v){var _=l.getTypeOf(v);return l.checkSupport(_),_!=="string"||u.uint8array?_==="nodebuffer"?new p(v):u.uint8array?new m(l.transformTo("uint8array",v)):new h(l.transformTo("array",v)):new d(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,a){var l=t("./GenericWorker"),u=t("../utils");function h(d){l.call(this,"ConvertWorker to "+d),this.destType=d}u.inherits(h,l),h.prototype.processChunk=function(d){this.push({data:u.transformTo(this.destType,d.data),meta:d.meta})},i.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,a){var l=t("./GenericWorker"),u=t("../crc32");function h(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(h,l),h.prototype.processChunk=function(d){this.streamInfo.crc32=u(d.data,this.streamInfo.crc32||0),this.push(d)},i.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,a){var l=t("../utils"),u=t("./GenericWorker");function h(d){u.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}l.inherits(h,u),h.prototype.processChunk=function(d){if(d){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+d.data.length}u.prototype.processChunk.call(this,d)},i.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,a){var l=t("../utils"),u=t("./GenericWorker");function h(d){u.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(m){p.dataIsReady=!0,p.data=m,p.max=m&&m.length||0,p.type=l.getTypeOf(m),p.isPaused||p._tickAndRepeat()},function(m){p.error(m)})}l.inherits(h,u),h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,p);break;case"uint8array":d=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":d=this.data.slice(this.index,p)}return this.index=p,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,a){function l(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,h){return this._listeners[u].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,h){if(this._listeners[u])for(var d=0;d<this._listeners[u].length;d++)this._listeners[u][d].call(this,h)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var h=this;return u.on("data",function(d){h.processChunk(d)}),u.on("end",function(){h.end()}),u.on("error",function(d){h.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,h){return this.extraStreamInfo[u]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},i.exports=l},{}],29:[function(t,i,a){var l=t("../utils"),u=t("./ConvertWorker"),h=t("./GenericWorker"),d=t("../base64"),p=t("../support"),m=t("../external"),v=null;if(p.nodestream)try{v=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(S,E){return new m.Promise(function(C,A){var k=[],O=S._internalType,N=S._outputType,D=S._mimeType;S.on("data",function(W,V){k.push(W),E&&E(V)}).on("error",function(W){k=[],A(W)}).on("end",function(){try{var W=function(V,J,Y){switch(V){case"blob":return l.newBlob(l.transformTo("arraybuffer",J),Y);case"base64":return d.encode(J);default:return l.transformTo(V,J)}}(N,function(V,J){var Y,ie=0,ye=null,L=0;for(Y=0;Y<J.length;Y++)L+=J[Y].length;switch(V){case"string":return J.join("");case"array":return Array.prototype.concat.apply([],J);case"uint8array":for(ye=new Uint8Array(L),Y=0;Y<J.length;Y++)ye.set(J[Y],ie),ie+=J[Y].length;return ye;case"nodebuffer":return Buffer.concat(J);default:throw new Error("concat : unsupported type '"+V+"'")}}(O,k),D);C(W)}catch(V){A(V)}k=[]}).resume()})}function y(S,E,C){var A=E;switch(E){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=E,this._mimeType=C,l.checkSupport(A),this._worker=S.pipe(new u(A)),S.lock()}catch(k){this._worker=new h("error"),this._worker.error(k)}}y.prototype={accumulate:function(S){return _(this,S)},on:function(S,E){var C=this;return S==="data"?this._worker.on(S,function(A){E.call(C,A.data,A.meta)}):this._worker.on(S,function(){l.delay(E,arguments,C)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(S){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},S)}},i.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var l=new ArrayBuffer(0);try{a.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(l),a.blob=u.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,a){for(var l=t("./utils"),u=t("./support"),h=t("./nodejsUtils"),d=t("./stream/GenericWorker"),p=new Array(256),m=0;m<256;m++)p[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;p[254]=p[254]=1;function v(){d.call(this,"utf-8 decode"),this.leftOver=null}function _(){d.call(this,"utf-8 encode")}a.utf8encode=function(y){return u.nodebuffer?h.newBufferFrom(y,"utf-8"):function(S){var E,C,A,k,O,N=S.length,D=0;for(k=0;k<N;k++)(64512&(C=S.charCodeAt(k)))==55296&&k+1<N&&(64512&(A=S.charCodeAt(k+1)))==56320&&(C=65536+(C-55296<<10)+(A-56320),k++),D+=C<128?1:C<2048?2:C<65536?3:4;for(E=u.uint8array?new Uint8Array(D):new Array(D),k=O=0;O<D;k++)(64512&(C=S.charCodeAt(k)))==55296&&k+1<N&&(64512&(A=S.charCodeAt(k+1)))==56320&&(C=65536+(C-55296<<10)+(A-56320),k++),C<128?E[O++]=C:(C<2048?E[O++]=192|C>>>6:(C<65536?E[O++]=224|C>>>12:(E[O++]=240|C>>>18,E[O++]=128|C>>>12&63),E[O++]=128|C>>>6&63),E[O++]=128|63&C);return E}(y)},a.utf8decode=function(y){return u.nodebuffer?l.transformTo("nodebuffer",y).toString("utf-8"):function(S){var E,C,A,k,O=S.length,N=new Array(2*O);for(E=C=0;E<O;)if((A=S[E++])<128)N[C++]=A;else if(4<(k=p[A]))N[C++]=65533,E+=k-1;else{for(A&=k===2?31:k===3?15:7;1<k&&E<O;)A=A<<6|63&S[E++],k--;1<k?N[C++]=65533:A<65536?N[C++]=A:(A-=65536,N[C++]=55296|A>>10&1023,N[C++]=56320|1023&A)}return N.length!==C&&(N.subarray?N=N.subarray(0,C):N.length=C),l.applyFromCharCode(N)}(y=l.transformTo(u.uint8array?"uint8array":"array",y))},l.inherits(v,d),v.prototype.processChunk=function(y){var S=l.transformTo(u.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var E=S;(S=new Uint8Array(E.length+this.leftOver.length)).set(this.leftOver,0),S.set(E,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var C=function(k,O){var N;for((O=O||k.length)>k.length&&(O=k.length),N=O-1;0<=N&&(192&k[N])==128;)N--;return N<0||N===0?O:N+p[k[N]]>O?N:O}(S),A=S;C!==S.length&&(u.uint8array?(A=S.subarray(0,C),this.leftOver=S.subarray(C,S.length)):(A=S.slice(0,C),this.leftOver=S.slice(C,S.length))),this.push({data:a.utf8decode(A),meta:y.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=v,l.inherits(_,d),_.prototype.processChunk=function(y){this.push({data:a.utf8encode(y.data),meta:y.meta})},a.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,a){var l=t("./support"),u=t("./base64"),h=t("./nodejsUtils"),d=t("./external");function p(E){return E}function m(E,C){for(var A=0;A<E.length;++A)C[A]=255&E.charCodeAt(A);return C}t("setimmediate"),a.newBlob=function(E,C){a.checkSupport("blob");try{return new Blob([E],{type:C})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(E),A.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(E,C,A){var k=[],O=0,N=E.length;if(N<=A)return String.fromCharCode.apply(null,E);for(;O<N;)C==="array"||C==="nodebuffer"?k.push(String.fromCharCode.apply(null,E.slice(O,Math.min(O+A,N)))):k.push(String.fromCharCode.apply(null,E.subarray(O,Math.min(O+A,N)))),O+=A;return k.join("")},stringifyByChar:function(E){for(var C="",A=0;A<E.length;A++)C+=String.fromCharCode(E[A]);return C},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function _(E){var C=65536,A=a.getTypeOf(E),k=!0;if(A==="uint8array"?k=v.applyCanBeUsed.uint8array:A==="nodebuffer"&&(k=v.applyCanBeUsed.nodebuffer),k)for(;1<C;)try{return v.stringifyByChunk(E,A,C)}catch{C=Math.floor(C/2)}return v.stringifyByChar(E)}function y(E,C){for(var A=0;A<E.length;A++)C[A]=E[A];return C}a.applyFromCharCode=_;var S={};S.string={string:p,array:function(E){return m(E,new Array(E.length))},arraybuffer:function(E){return S.string.uint8array(E).buffer},uint8array:function(E){return m(E,new Uint8Array(E.length))},nodebuffer:function(E){return m(E,h.allocBuffer(E.length))}},S.array={string:_,array:p,arraybuffer:function(E){return new Uint8Array(E).buffer},uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return h.newBufferFrom(E)}},S.arraybuffer={string:function(E){return _(new Uint8Array(E))},array:function(E){return y(new Uint8Array(E),new Array(E.byteLength))},arraybuffer:p,uint8array:function(E){return new Uint8Array(E)},nodebuffer:function(E){return h.newBufferFrom(new Uint8Array(E))}},S.uint8array={string:_,array:function(E){return y(E,new Array(E.length))},arraybuffer:function(E){return E.buffer},uint8array:p,nodebuffer:function(E){return h.newBufferFrom(E)}},S.nodebuffer={string:_,array:function(E){return y(E,new Array(E.length))},arraybuffer:function(E){return S.nodebuffer.uint8array(E).buffer},uint8array:function(E){return y(E,new Uint8Array(E.length))},nodebuffer:p},a.transformTo=function(E,C){if(C=C||"",!E)return C;a.checkSupport(E);var A=a.getTypeOf(C);return S[A][E](C)},a.resolve=function(E){for(var C=E.split("/"),A=[],k=0;k<C.length;k++){var O=C[k];O==="."||O===""&&k!==0&&k!==C.length-1||(O===".."?A.pop():A.push(O))}return A.join("/")},a.getTypeOf=function(E){return typeof E=="string"?"string":Object.prototype.toString.call(E)==="[object Array]"?"array":l.nodebuffer&&h.isBuffer(E)?"nodebuffer":l.uint8array&&E instanceof Uint8Array?"uint8array":l.arraybuffer&&E instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(E){if(!l[E.toLowerCase()])throw new Error(E+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(E){var C,A,k="";for(A=0;A<(E||"").length;A++)k+="\\x"+((C=E.charCodeAt(A))<16?"0":"")+C.toString(16).toUpperCase();return k},a.delay=function(E,C,A){setImmediate(function(){E.apply(A||null,C||[])})},a.inherits=function(E,C){function A(){}A.prototype=C.prototype,E.prototype=new A},a.extend=function(){var E,C,A={};for(E=0;E<arguments.length;E++)for(C in arguments[E])Object.prototype.hasOwnProperty.call(arguments[E],C)&&A[C]===void 0&&(A[C]=arguments[E][C]);return A},a.prepareContent=function(E,C,A,k,O){return d.Promise.resolve(C).then(function(N){return l.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new d.Promise(function(D,W){var V=new FileReader;V.onload=function(J){D(J.target.result)},V.onerror=function(J){W(J.target.error)},V.readAsArrayBuffer(N)}):N}).then(function(N){var D=a.getTypeOf(N);return D?(D==="arraybuffer"?N=a.transformTo("uint8array",N):D==="string"&&(O?N=u.decode(N):A&&k!==!0&&(N=function(W){return m(W,l.uint8array?new Uint8Array(W.length):new Array(W.length))}(N))),N):d.Promise.reject(new Error("Can't read the data of '"+E+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,a){var l=t("./reader/readerFor"),u=t("./utils"),h=t("./signature"),d=t("./zipEntry"),p=t("./support");function m(v){this.files=[],this.loadOptions=v}m.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(_)+", expected "+u.pretty(v)+")")}},isSignature:function(v,_){var y=this.reader.index;this.reader.setIndex(v);var S=this.reader.readString(4)===_;return this.reader.setIndex(y),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),_=p.uint8array?"uint8array":"array",y=u.transformTo(_,v);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,_,y,S=this.zip64EndOfCentralSize-44;0<S;)v=this.reader.readInt(2),_=this.reader.readInt(4),y=this.reader.readData(_),this.zip64ExtensibleData[v]={id:v,length:_,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,_;for(v=0;v<this.files.length;v++)_=this.files[v],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(v=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var _=v;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var S=_-y;if(0<S)this.isSignature(_,h.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(v){this.reader=l(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,a){var l=t("./reader/readerFor"),u=t("./utils"),h=t("./compressedObject"),d=t("./crc32"),p=t("./utf8"),m=t("./compressions"),v=t("./support");function _(y,S){this.options=y,this.loadOptions=S}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var S,E;if(y.skip(22),this.fileNameLength=y.readInt(2),E=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(E),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((S=function(C){for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)&&m[A].magic===C)return m[A];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,S,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var S=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(S),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=l(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var S,E,C,A=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<A;)S=y.readInt(2),E=y.readInt(2),C=y.readData(E),this.extraFields[S]={id:S,length:E,value:C};y.setIndex(A)},handleUTF8:function(){var y=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(S!==null)this.fileNameStr=S;else{var E=u.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(E)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var A=u.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var S=l(y.value);return S.readInt(1)!==1||d(this.fileName)!==S.readInt(4)?null:p.utf8decode(S.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var S=l(y.value);return S.readInt(1)!==1||d(this.fileComment)!==S.readInt(4)?null:p.utf8decode(S.readData(y.length-5))}return null}},i.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,a){function l(S,E,C){this.name=S,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=E,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var u=t("./stream/StreamHelper"),h=t("./stream/DataWorker"),d=t("./utf8"),p=t("./compressedObject"),m=t("./stream/GenericWorker");l.prototype={internalStream:function(S){var E=null,C="string";try{if(!S)throw new Error("No output type specified.");var A=(C=S.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),E=this._decompressWorker();var k=!this._dataBinary;k&&!A&&(E=E.pipe(new d.Utf8EncodeWorker)),!k&&A&&(E=E.pipe(new d.Utf8DecodeWorker))}catch(O){(E=new m("error")).error(O)}return new u(E,C,"")},async:function(S,E){return this.internalStream(S).accumulate(E)},nodeStream:function(S,E){return this.internalStream(S||"nodebuffer").toNodejsStream(E)},_compressWorker:function(S,E){if(this._data instanceof p&&this._data.compression.magic===S.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new d.Utf8EncodeWorker)),p.createWorkerFrom(C,S,E)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof m?this._data:new h(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<v.length;y++)l.prototype[v[y]]=_;i.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,a){(function(l){var u,h,d=l.MutationObserver||l.WebKitMutationObserver;if(d){var p=0,m=new d(S),v=l.document.createTextNode("");m.observe(v,{characterData:!0}),u=function(){v.data=p=++p%2}}else if(l.setImmediate||l.MessageChannel===void 0)u="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var E=l.document.createElement("script");E.onreadystatechange=function(){S(),E.onreadystatechange=null,E.parentNode.removeChild(E),E=null},l.document.documentElement.appendChild(E)}:function(){setTimeout(S,0)};else{var _=new l.MessageChannel;_.port1.onmessage=S,u=function(){_.port2.postMessage(0)}}var y=[];function S(){var E,C;h=!0;for(var A=y.length;A;){for(C=y,y=[],E=-1;++E<A;)C[E]();A=y.length}h=!1}i.exports=function(E){y.push(E)!==1||h||u()}}).call(this,typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,a){var l=t("immediate");function u(){}var h={},d=["REJECTED"],p=["FULFILLED"],m=["PENDING"];function v(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,A!==u&&E(this,A)}function _(A,k,O){this.promise=A,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}function y(A,k,O){l(function(){var N;try{N=k(O)}catch(D){return h.reject(A,D)}N===A?h.reject(A,new TypeError("Cannot resolve promise with itself")):h.resolve(A,N)})}function S(A){var k=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof k=="function")return function(){k.apply(A,arguments)}}function E(A,k){var O=!1;function N(V){O||(O=!0,h.reject(A,V))}function D(V){O||(O=!0,h.resolve(A,V))}var W=C(function(){k(D,N)});W.status==="error"&&N(W.value)}function C(A,k){var O={};try{O.value=A(k),O.status="success"}catch(N){O.status="error",O.value=N}return O}(i.exports=v).prototype.finally=function(A){if(typeof A!="function")return this;var k=this.constructor;return this.then(function(O){return k.resolve(A()).then(function(){return O})},function(O){return k.resolve(A()).then(function(){throw O})})},v.prototype.catch=function(A){return this.then(null,A)},v.prototype.then=function(A,k){if(typeof A!="function"&&this.state===p||typeof k!="function"&&this.state===d)return this;var O=new this.constructor(u);return this.state!==m?y(O,this.state===p?A:k,this.outcome):this.queue.push(new _(O,A,k)),O},_.prototype.callFulfilled=function(A){h.resolve(this.promise,A)},_.prototype.otherCallFulfilled=function(A){y(this.promise,this.onFulfilled,A)},_.prototype.callRejected=function(A){h.reject(this.promise,A)},_.prototype.otherCallRejected=function(A){y(this.promise,this.onRejected,A)},h.resolve=function(A,k){var O=C(S,k);if(O.status==="error")return h.reject(A,O.value);var N=O.value;if(N)E(A,N);else{A.state=p,A.outcome=k;for(var D=-1,W=A.queue.length;++D<W;)A.queue[D].callFulfilled(k)}return A},h.reject=function(A,k){A.state=d,A.outcome=k;for(var O=-1,N=A.queue.length;++O<N;)A.queue[O].callRejected(k);return A},v.resolve=function(A){return A instanceof this?A:h.resolve(new this(u),A)},v.reject=function(A){var k=new this(u);return h.reject(k,A)},v.all=function(A){var k=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=A.length,N=!1;if(!O)return this.resolve([]);for(var D=new Array(O),W=0,V=-1,J=new this(u);++V<O;)Y(A[V],V);return J;function Y(ie,ye){k.resolve(ie).then(function(L){D[ye]=L,++W!==O||N||(N=!0,h.resolve(J,D))},function(L){N||(N=!0,h.reject(J,L))})}},v.race=function(A){var k=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=A.length,N=!1;if(!O)return this.resolve([]);for(var D=-1,W=new this(u);++D<O;)V=A[D],k.resolve(V).then(function(J){N||(N=!0,h.resolve(W,J))},function(J){N||(N=!0,h.reject(W,J))});var V;return W}},{immediate:36}],38:[function(t,i,a){var l={};(0,t("./lib/utils/common").assign)(l,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,a){var l=t("./zlib/deflate"),u=t("./utils/common"),h=t("./utils/strings"),d=t("./zlib/messages"),p=t("./zlib/zstream"),m=Object.prototype.toString,v=0,_=-1,y=0,S=8;function E(A){if(!(this instanceof E))return new E(A);this.options=u.assign({level:_,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},A||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var O=l.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(O!==v)throw new Error(d[O]);if(k.header&&l.deflateSetHeader(this.strm,k.header),k.dictionary){var N;if(N=typeof k.dictionary=="string"?h.string2buf(k.dictionary):m.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(O=l.deflateSetDictionary(this.strm,N))!==v)throw new Error(d[O]);this._dict_set=!0}}function C(A,k){var O=new E(k);if(O.push(A,!0),O.err)throw O.msg||d[O.err];return O.result}E.prototype.push=function(A,k){var O,N,D=this.strm,W=this.options.chunkSize;if(this.ended)return!1;N=k===~~k?k:k===!0?4:0,typeof A=="string"?D.input=h.string2buf(A):m.call(A)==="[object ArrayBuffer]"?D.input=new Uint8Array(A):D.input=A,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new u.Buf8(W),D.next_out=0,D.avail_out=W),(O=l.deflate(D,N))!==1&&O!==v)return this.onEnd(O),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(u.shrinkBuf(D.output,D.next_out))):this.onData(u.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&O!==1);return N===4?(O=l.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===v):N!==2||(this.onEnd(v),!(D.avail_out=0))},E.prototype.onData=function(A){this.chunks.push(A)},E.prototype.onEnd=function(A){A===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},a.Deflate=E,a.deflate=C,a.deflateRaw=function(A,k){return(k=k||{}).raw=!0,C(A,k)},a.gzip=function(A,k){return(k=k||{}).gzip=!0,C(A,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,a){var l=t("./zlib/inflate"),u=t("./utils/common"),h=t("./utils/strings"),d=t("./zlib/constants"),p=t("./zlib/messages"),m=t("./zlib/zstream"),v=t("./zlib/gzheader"),_=Object.prototype.toString;function y(E){if(!(this instanceof y))return new y(E);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},E||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||E&&E.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&(15&C.windowBits)==0&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var A=l.inflateInit2(this.strm,C.windowBits);if(A!==d.Z_OK)throw new Error(p[A]);this.header=new v,l.inflateGetHeader(this.strm,this.header)}function S(E,C){var A=new y(C);if(A.push(E,!0),A.err)throw A.msg||p[A.err];return A.result}y.prototype.push=function(E,C){var A,k,O,N,D,W,V=this.strm,J=this.options.chunkSize,Y=this.options.dictionary,ie=!1;if(this.ended)return!1;k=C===~~C?C:C===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof E=="string"?V.input=h.binstring2buf(E):_.call(E)==="[object ArrayBuffer]"?V.input=new Uint8Array(E):V.input=E,V.next_in=0,V.avail_in=V.input.length;do{if(V.avail_out===0&&(V.output=new u.Buf8(J),V.next_out=0,V.avail_out=J),(A=l.inflate(V,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&Y&&(W=typeof Y=="string"?h.string2buf(Y):_.call(Y)==="[object ArrayBuffer]"?new Uint8Array(Y):Y,A=l.inflateSetDictionary(this.strm,W)),A===d.Z_BUF_ERROR&&ie===!0&&(A=d.Z_OK,ie=!1),A!==d.Z_STREAM_END&&A!==d.Z_OK)return this.onEnd(A),!(this.ended=!0);V.next_out&&(V.avail_out!==0&&A!==d.Z_STREAM_END&&(V.avail_in!==0||k!==d.Z_FINISH&&k!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(O=h.utf8border(V.output,V.next_out),N=V.next_out-O,D=h.buf2string(V.output,O),V.next_out=N,V.avail_out=J-N,N&&u.arraySet(V.output,V.output,O,N,0),this.onData(D)):this.onData(u.shrinkBuf(V.output,V.next_out)))),V.avail_in===0&&V.avail_out===0&&(ie=!0)}while((0<V.avail_in||V.avail_out===0)&&A!==d.Z_STREAM_END);return A===d.Z_STREAM_END&&(k=d.Z_FINISH),k===d.Z_FINISH?(A=l.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===d.Z_OK):k!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(V.avail_out=0))},y.prototype.onData=function(E){this.chunks.push(E)},y.prototype.onEnd=function(E){E===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=E,this.msg=this.strm.msg},a.Inflate=y,a.inflate=S,a.inflateRaw=function(E,C){return(C=C||{}).raw=!0,S(E,C)},a.ungzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,a){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(d){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var m=p.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var v in m)m.hasOwnProperty(v)&&(d[v]=m[v])}}return d},a.shrinkBuf=function(d,p){return d.length===p?d:d.subarray?d.subarray(0,p):(d.length=p,d)};var u={arraySet:function(d,p,m,v,_){if(p.subarray&&d.subarray)d.set(p.subarray(m,m+v),_);else for(var y=0;y<v;y++)d[_+y]=p[m+y]},flattenChunks:function(d){var p,m,v,_,y,S;for(p=v=0,m=d.length;p<m;p++)v+=d[p].length;for(S=new Uint8Array(v),p=_=0,m=d.length;p<m;p++)y=d[p],S.set(y,_),_+=y.length;return S}},h={arraySet:function(d,p,m,v,_){for(var y=0;y<v;y++)d[_+y]=p[m+y]},flattenChunks:function(d){return[].concat.apply([],d)}};a.setTyped=function(d){d?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,u)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,h))},a.setTyped(l)},{}],42:[function(t,i,a){var l=t("./common"),u=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var d=new l.Buf8(256),p=0;p<256;p++)d[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function m(v,_){if(_<65537&&(v.subarray&&h||!v.subarray&&u))return String.fromCharCode.apply(null,l.shrinkBuf(v,_));for(var y="",S=0;S<_;S++)y+=String.fromCharCode(v[S]);return y}d[254]=d[254]=1,a.string2buf=function(v){var _,y,S,E,C,A=v.length,k=0;for(E=0;E<A;E++)(64512&(y=v.charCodeAt(E)))==55296&&E+1<A&&(64512&(S=v.charCodeAt(E+1)))==56320&&(y=65536+(y-55296<<10)+(S-56320),E++),k+=y<128?1:y<2048?2:y<65536?3:4;for(_=new l.Buf8(k),E=C=0;C<k;E++)(64512&(y=v.charCodeAt(E)))==55296&&E+1<A&&(64512&(S=v.charCodeAt(E+1)))==56320&&(y=65536+(y-55296<<10)+(S-56320),E++),y<128?_[C++]=y:(y<2048?_[C++]=192|y>>>6:(y<65536?_[C++]=224|y>>>12:(_[C++]=240|y>>>18,_[C++]=128|y>>>12&63),_[C++]=128|y>>>6&63),_[C++]=128|63&y);return _},a.buf2binstring=function(v){return m(v,v.length)},a.binstring2buf=function(v){for(var _=new l.Buf8(v.length),y=0,S=_.length;y<S;y++)_[y]=v.charCodeAt(y);return _},a.buf2string=function(v,_){var y,S,E,C,A=_||v.length,k=new Array(2*A);for(y=S=0;y<A;)if((E=v[y++])<128)k[S++]=E;else if(4<(C=d[E]))k[S++]=65533,y+=C-1;else{for(E&=C===2?31:C===3?15:7;1<C&&y<A;)E=E<<6|63&v[y++],C--;1<C?k[S++]=65533:E<65536?k[S++]=E:(E-=65536,k[S++]=55296|E>>10&1023,k[S++]=56320|1023&E)}return m(k,S)},a.utf8border=function(v,_){var y;for((_=_||v.length)>v.length&&(_=v.length),y=_-1;0<=y&&(192&v[y])==128;)y--;return y<0||y===0?_:y+d[v[y]]>_?y:_}},{"./common":41}],43:[function(t,i,a){i.exports=function(l,u,h,d){for(var p=65535&l|0,m=l>>>16&65535|0,v=0;h!==0;){for(h-=v=2e3<h?2e3:h;m=m+(p=p+u[d++]|0)|0,--v;);p%=65521,m%=65521}return p|m<<16|0}},{}],44:[function(t,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,a){var l=function(){for(var u,h=[],d=0;d<256;d++){u=d;for(var p=0;p<8;p++)u=1&u?3988292384^u>>>1:u>>>1;h[d]=u}return h}();i.exports=function(u,h,d,p){var m=l,v=p+d;u^=-1;for(var _=p;_<v;_++)u=u>>>8^m[255&(u^h[_])];return-1^u}},{}],46:[function(t,i,a){var l,u=t("../utils/common"),h=t("./trees"),d=t("./adler32"),p=t("./crc32"),m=t("./messages"),v=0,_=4,y=0,S=-2,E=-1,C=4,A=2,k=8,O=9,N=286,D=30,W=19,V=2*N+1,J=15,Y=3,ie=258,ye=ie+Y+1,L=42,x=113,T=1,ae=2,P=3,I=4;function he(b,Q){return b.msg=m[Q],Q}function re(b){return(b<<1)-(4<b?9:0)}function U(b){for(var Q=b.length;0<=--Q;)b[Q]=0}function G(b){var Q=b.state,B=Q.pending;B>b.avail_out&&(B=b.avail_out),B!==0&&(u.arraySet(b.output,Q.pending_buf,Q.pending_out,B,b.next_out),b.next_out+=B,Q.pending_out+=B,b.total_out+=B,b.avail_out-=B,Q.pending-=B,Q.pending===0&&(Q.pending_out=0))}function q(b,Q){h._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,Q),b.block_start=b.strstart,G(b.strm)}function Z(b,Q){b.pending_buf[b.pending++]=Q}function ce(b,Q){b.pending_buf[b.pending++]=Q>>>8&255,b.pending_buf[b.pending++]=255&Q}function ue(b,Q){var B,z,M=b.max_chain_length,K=b.strstart,ge=b.prev_length,F=b.nice_match,H=b.strstart>b.w_size-ye?b.strstart-(b.w_size-ye):0,oe=b.window,ve=b.w_mask,de=b.prev,le=b.strstart+ie,be=oe[K+ge-1],Te=oe[K+ge];b.prev_length>=b.good_match&&(M>>=2),F>b.lookahead&&(F=b.lookahead);do if(oe[(B=Q)+ge]===Te&&oe[B+ge-1]===be&&oe[B]===oe[K]&&oe[++B]===oe[K+1]){K+=2,B++;do;while(oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&oe[++K]===oe[++B]&&K<le);if(z=ie-(le-K),K=le-ie,ge<z){if(b.match_start=Q,F<=(ge=z))break;be=oe[K+ge-1],Te=oe[K+ge]}}while((Q=de[Q&ve])>H&&--M!=0);return ge<=b.lookahead?ge:b.lookahead}function Ae(b){var Q,B,z,M,K,ge,F,H,oe,ve,de=b.w_size;do{if(M=b.window_size-b.lookahead-b.strstart,b.strstart>=de+(de-ye)){for(u.arraySet(b.window,b.window,de,de,0),b.match_start-=de,b.strstart-=de,b.block_start-=de,Q=B=b.hash_size;z=b.head[--Q],b.head[Q]=de<=z?z-de:0,--B;);for(Q=B=de;z=b.prev[--Q],b.prev[Q]=de<=z?z-de:0,--B;);M+=de}if(b.strm.avail_in===0)break;if(ge=b.strm,F=b.window,H=b.strstart+b.lookahead,oe=M,ve=void 0,ve=ge.avail_in,oe<ve&&(ve=oe),B=ve===0?0:(ge.avail_in-=ve,u.arraySet(F,ge.input,ge.next_in,ve,H),ge.state.wrap===1?ge.adler=d(ge.adler,F,ve,H):ge.state.wrap===2&&(ge.adler=p(ge.adler,F,ve,H)),ge.next_in+=ve,ge.total_in+=ve,ve),b.lookahead+=B,b.lookahead+b.insert>=Y)for(K=b.strstart-b.insert,b.ins_h=b.window[K],b.ins_h=(b.ins_h<<b.hash_shift^b.window[K+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[K+Y-1])&b.hash_mask,b.prev[K&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=K,K++,b.insert--,!(b.lookahead+b.insert<Y)););}while(b.lookahead<ye&&b.strm.avail_in!==0)}function qe(b,Q){for(var B,z;;){if(b.lookahead<ye){if(Ae(b),b.lookahead<ye&&Q===v)return T;if(b.lookahead===0)break}if(B=0,b.lookahead>=Y&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Y-1])&b.hash_mask,B=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),B!==0&&b.strstart-B<=b.w_size-ye&&(b.match_length=ue(b,B)),b.match_length>=Y)if(z=h._tr_tally(b,b.strstart-b.match_start,b.match_length-Y),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&b.lookahead>=Y){for(b.match_length--;b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Y-1])&b.hash_mask,B=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart,--b.match_length!=0;);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else z=h._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(z&&(q(b,!1),b.strm.avail_out===0))return T}return b.insert=b.strstart<Y-1?b.strstart:Y-1,Q===_?(q(b,!0),b.strm.avail_out===0?P:I):b.last_lit&&(q(b,!1),b.strm.avail_out===0)?T:ae}function De(b,Q){for(var B,z,M;;){if(b.lookahead<ye){if(Ae(b),b.lookahead<ye&&Q===v)return T;if(b.lookahead===0)break}if(B=0,b.lookahead>=Y&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Y-1])&b.hash_mask,B=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),b.prev_length=b.match_length,b.prev_match=b.match_start,b.match_length=Y-1,B!==0&&b.prev_length<b.max_lazy_match&&b.strstart-B<=b.w_size-ye&&(b.match_length=ue(b,B),b.match_length<=5&&(b.strategy===1||b.match_length===Y&&4096<b.strstart-b.match_start)&&(b.match_length=Y-1)),b.prev_length>=Y&&b.match_length<=b.prev_length){for(M=b.strstart+b.lookahead-Y,z=h._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-Y),b.lookahead-=b.prev_length-1,b.prev_length-=2;++b.strstart<=M&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+Y-1])&b.hash_mask,B=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart),--b.prev_length!=0;);if(b.match_available=0,b.match_length=Y-1,b.strstart++,z&&(q(b,!1),b.strm.avail_out===0))return T}else if(b.match_available){if((z=h._tr_tally(b,0,b.window[b.strstart-1]))&&q(b,!1),b.strstart++,b.lookahead--,b.strm.avail_out===0)return T}else b.match_available=1,b.strstart++,b.lookahead--}return b.match_available&&(z=h._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0),b.insert=b.strstart<Y-1?b.strstart:Y-1,Q===_?(q(b,!0),b.strm.avail_out===0?P:I):b.last_lit&&(q(b,!1),b.strm.avail_out===0)?T:ae}function Fe(b,Q,B,z,M){this.good_length=b,this.max_lazy=Q,this.nice_length=B,this.max_chain=z,this.func=M}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*V),this.dyn_dtree=new u.Buf16(2*(2*D+1)),this.bl_tree=new u.Buf16(2*(2*W+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(J+1),this.heap=new u.Buf16(2*N+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*N+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ie(b){var Q;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=A,(Q=b.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?L:x,b.adler=Q.wrap===2?0:1,Q.last_flush=v,h._tr_init(Q),y):he(b,S)}function Be(b){var Q=Ie(b);return Q===y&&function(B){B.window_size=2*B.w_size,U(B.head),B.max_lazy_match=l[B.level].max_lazy,B.good_match=l[B.level].good_length,B.nice_match=l[B.level].nice_length,B.max_chain_length=l[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=Y-1,B.match_available=0,B.ins_h=0}(b.state),Q}function dt(b,Q,B,z,M,K){if(!b)return S;var ge=1;if(Q===E&&(Q=6),z<0?(ge=0,z=-z):15<z&&(ge=2,z-=16),M<1||O<M||B!==k||z<8||15<z||Q<0||9<Q||K<0||C<K)return he(b,S);z===8&&(z=9);var F=new Pe;return(b.state=F).strm=b,F.wrap=ge,F.gzhead=null,F.w_bits=z,F.w_size=1<<F.w_bits,F.w_mask=F.w_size-1,F.hash_bits=M+7,F.hash_size=1<<F.hash_bits,F.hash_mask=F.hash_size-1,F.hash_shift=~~((F.hash_bits+Y-1)/Y),F.window=new u.Buf8(2*F.w_size),F.head=new u.Buf16(F.hash_size),F.prev=new u.Buf16(F.w_size),F.lit_bufsize=1<<M+6,F.pending_buf_size=4*F.lit_bufsize,F.pending_buf=new u.Buf8(F.pending_buf_size),F.d_buf=1*F.lit_bufsize,F.l_buf=3*F.lit_bufsize,F.level=Q,F.strategy=K,F.method=B,Be(b)}l=[new Fe(0,0,0,0,function(b,Q){var B=65535;for(B>b.pending_buf_size-5&&(B=b.pending_buf_size-5);;){if(b.lookahead<=1){if(Ae(b),b.lookahead===0&&Q===v)return T;if(b.lookahead===0)break}b.strstart+=b.lookahead,b.lookahead=0;var z=b.block_start+B;if((b.strstart===0||b.strstart>=z)&&(b.lookahead=b.strstart-z,b.strstart=z,q(b,!1),b.strm.avail_out===0)||b.strstart-b.block_start>=b.w_size-ye&&(q(b,!1),b.strm.avail_out===0))return T}return b.insert=0,Q===_?(q(b,!0),b.strm.avail_out===0?P:I):(b.strstart>b.block_start&&(q(b,!1),b.strm.avail_out),T)}),new Fe(4,4,8,4,qe),new Fe(4,5,16,8,qe),new Fe(4,6,32,32,qe),new Fe(4,4,16,16,De),new Fe(8,16,32,32,De),new Fe(8,16,128,128,De),new Fe(8,32,128,256,De),new Fe(32,128,258,1024,De),new Fe(32,258,258,4096,De)],a.deflateInit=function(b,Q){return dt(b,Q,k,15,8,0)},a.deflateInit2=dt,a.deflateReset=Be,a.deflateResetKeep=Ie,a.deflateSetHeader=function(b,Q){return b&&b.state?b.state.wrap!==2?S:(b.state.gzhead=Q,y):S},a.deflate=function(b,Q){var B,z,M,K;if(!b||!b.state||5<Q||Q<0)return b?he(b,S):S;if(z=b.state,!b.output||!b.input&&b.avail_in!==0||z.status===666&&Q!==_)return he(b,b.avail_out===0?-5:S);if(z.strm=b,B=z.last_flush,z.last_flush=Q,z.status===L)if(z.wrap===2)b.adler=0,Z(z,31),Z(z,139),Z(z,8),z.gzhead?(Z(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),Z(z,255&z.gzhead.time),Z(z,z.gzhead.time>>8&255),Z(z,z.gzhead.time>>16&255),Z(z,z.gzhead.time>>24&255),Z(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),Z(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(Z(z,255&z.gzhead.extra.length),Z(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(b.adler=p(b.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(Z(z,0),Z(z,0),Z(z,0),Z(z,0),Z(z,0),Z(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),Z(z,3),z.status=x);else{var ge=k+(z.w_bits-8<<4)<<8;ge|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(ge|=32),ge+=31-ge%31,z.status=x,ce(z,ge),z.strstart!==0&&(ce(z,b.adler>>>16),ce(z,65535&b.adler)),b.adler=1}if(z.status===69)if(z.gzhead.extra){for(M=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>M&&(b.adler=p(b.adler,z.pending_buf,z.pending-M,M)),G(b),M=z.pending,z.pending!==z.pending_buf_size));)Z(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>M&&(b.adler=p(b.adler,z.pending_buf,z.pending-M,M)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){M=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>M&&(b.adler=p(b.adler,z.pending_buf,z.pending-M,M)),G(b),M=z.pending,z.pending===z.pending_buf_size)){K=1;break}K=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,Z(z,K)}while(K!==0);z.gzhead.hcrc&&z.pending>M&&(b.adler=p(b.adler,z.pending_buf,z.pending-M,M)),K===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){M=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>M&&(b.adler=p(b.adler,z.pending_buf,z.pending-M,M)),G(b),M=z.pending,z.pending===z.pending_buf_size)){K=1;break}K=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,Z(z,K)}while(K!==0);z.gzhead.hcrc&&z.pending>M&&(b.adler=p(b.adler,z.pending_buf,z.pending-M,M)),K===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&G(b),z.pending+2<=z.pending_buf_size&&(Z(z,255&b.adler),Z(z,b.adler>>8&255),b.adler=0,z.status=x)):z.status=x),z.pending!==0){if(G(b),b.avail_out===0)return z.last_flush=-1,y}else if(b.avail_in===0&&re(Q)<=re(B)&&Q!==_)return he(b,-5);if(z.status===666&&b.avail_in!==0)return he(b,-5);if(b.avail_in!==0||z.lookahead!==0||Q!==v&&z.status!==666){var F=z.strategy===2?function(H,oe){for(var ve;;){if(H.lookahead===0&&(Ae(H),H.lookahead===0)){if(oe===v)return T;break}if(H.match_length=0,ve=h._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++,ve&&(q(H,!1),H.strm.avail_out===0))return T}return H.insert=0,oe===_?(q(H,!0),H.strm.avail_out===0?P:I):H.last_lit&&(q(H,!1),H.strm.avail_out===0)?T:ae}(z,Q):z.strategy===3?function(H,oe){for(var ve,de,le,be,Te=H.window;;){if(H.lookahead<=ie){if(Ae(H),H.lookahead<=ie&&oe===v)return T;if(H.lookahead===0)break}if(H.match_length=0,H.lookahead>=Y&&0<H.strstart&&(de=Te[le=H.strstart-1])===Te[++le]&&de===Te[++le]&&de===Te[++le]){be=H.strstart+ie;do;while(de===Te[++le]&&de===Te[++le]&&de===Te[++le]&&de===Te[++le]&&de===Te[++le]&&de===Te[++le]&&de===Te[++le]&&de===Te[++le]&&le<be);H.match_length=ie-(be-le),H.match_length>H.lookahead&&(H.match_length=H.lookahead)}if(H.match_length>=Y?(ve=h._tr_tally(H,1,H.match_length-Y),H.lookahead-=H.match_length,H.strstart+=H.match_length,H.match_length=0):(ve=h._tr_tally(H,0,H.window[H.strstart]),H.lookahead--,H.strstart++),ve&&(q(H,!1),H.strm.avail_out===0))return T}return H.insert=0,oe===_?(q(H,!0),H.strm.avail_out===0?P:I):H.last_lit&&(q(H,!1),H.strm.avail_out===0)?T:ae}(z,Q):l[z.level].func(z,Q);if(F!==P&&F!==I||(z.status=666),F===T||F===P)return b.avail_out===0&&(z.last_flush=-1),y;if(F===ae&&(Q===1?h._tr_align(z):Q!==5&&(h._tr_stored_block(z,0,0,!1),Q===3&&(U(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),G(b),b.avail_out===0))return z.last_flush=-1,y}return Q!==_?y:z.wrap<=0?1:(z.wrap===2?(Z(z,255&b.adler),Z(z,b.adler>>8&255),Z(z,b.adler>>16&255),Z(z,b.adler>>24&255),Z(z,255&b.total_in),Z(z,b.total_in>>8&255),Z(z,b.total_in>>16&255),Z(z,b.total_in>>24&255)):(ce(z,b.adler>>>16),ce(z,65535&b.adler)),G(b),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?y:1)},a.deflateEnd=function(b){var Q;return b&&b.state?(Q=b.state.status)!==L&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==x&&Q!==666?he(b,S):(b.state=null,Q===x?he(b,-3):y):S},a.deflateSetDictionary=function(b,Q){var B,z,M,K,ge,F,H,oe,ve=Q.length;if(!b||!b.state||(K=(B=b.state).wrap)===2||K===1&&B.status!==L||B.lookahead)return S;for(K===1&&(b.adler=d(b.adler,Q,ve,0)),B.wrap=0,ve>=B.w_size&&(K===0&&(U(B.head),B.strstart=0,B.block_start=0,B.insert=0),oe=new u.Buf8(B.w_size),u.arraySet(oe,Q,ve-B.w_size,B.w_size,0),Q=oe,ve=B.w_size),ge=b.avail_in,F=b.next_in,H=b.input,b.avail_in=ve,b.next_in=0,b.input=Q,Ae(B);B.lookahead>=Y;){for(z=B.strstart,M=B.lookahead-(Y-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[z+Y-1])&B.hash_mask,B.prev[z&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=z,z++,--M;);B.strstart=z,B.lookahead=Y-1,Ae(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=Y-1,B.match_available=0,b.next_in=F,b.input=H,b.avail_in=ge,B.wrap=K,y},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,a){i.exports=function(l,u){var h,d,p,m,v,_,y,S,E,C,A,k,O,N,D,W,V,J,Y,ie,ye,L,x,T,ae;h=l.state,d=l.next_in,T=l.input,p=d+(l.avail_in-5),m=l.next_out,ae=l.output,v=m-(u-l.avail_out),_=m+(l.avail_out-257),y=h.dmax,S=h.wsize,E=h.whave,C=h.wnext,A=h.window,k=h.hold,O=h.bits,N=h.lencode,D=h.distcode,W=(1<<h.lenbits)-1,V=(1<<h.distbits)-1;e:do{O<15&&(k+=T[d++]<<O,O+=8,k+=T[d++]<<O,O+=8),J=N[k&W];t:for(;;){if(k>>>=Y=J>>>24,O-=Y,(Y=J>>>16&255)===0)ae[m++]=65535&J;else{if(!(16&Y)){if((64&Y)==0){J=N[(65535&J)+(k&(1<<Y)-1)];continue t}if(32&Y){h.mode=12;break e}l.msg="invalid literal/length code",h.mode=30;break e}ie=65535&J,(Y&=15)&&(O<Y&&(k+=T[d++]<<O,O+=8),ie+=k&(1<<Y)-1,k>>>=Y,O-=Y),O<15&&(k+=T[d++]<<O,O+=8,k+=T[d++]<<O,O+=8),J=D[k&V];n:for(;;){if(k>>>=Y=J>>>24,O-=Y,!(16&(Y=J>>>16&255))){if((64&Y)==0){J=D[(65535&J)+(k&(1<<Y)-1)];continue n}l.msg="invalid distance code",h.mode=30;break e}if(ye=65535&J,O<(Y&=15)&&(k+=T[d++]<<O,(O+=8)<Y&&(k+=T[d++]<<O,O+=8)),y<(ye+=k&(1<<Y)-1)){l.msg="invalid distance too far back",h.mode=30;break e}if(k>>>=Y,O-=Y,(Y=m-v)<ye){if(E<(Y=ye-Y)&&h.sane){l.msg="invalid distance too far back",h.mode=30;break e}if(x=A,(L=0)===C){if(L+=S-Y,Y<ie){for(ie-=Y;ae[m++]=A[L++],--Y;);L=m-ye,x=ae}}else if(C<Y){if(L+=S+C-Y,(Y-=C)<ie){for(ie-=Y;ae[m++]=A[L++],--Y;);if(L=0,C<ie){for(ie-=Y=C;ae[m++]=A[L++],--Y;);L=m-ye,x=ae}}}else if(L+=C-Y,Y<ie){for(ie-=Y;ae[m++]=A[L++],--Y;);L=m-ye,x=ae}for(;2<ie;)ae[m++]=x[L++],ae[m++]=x[L++],ae[m++]=x[L++],ie-=3;ie&&(ae[m++]=x[L++],1<ie&&(ae[m++]=x[L++]))}else{for(L=m-ye;ae[m++]=ae[L++],ae[m++]=ae[L++],ae[m++]=ae[L++],2<(ie-=3););ie&&(ae[m++]=ae[L++],1<ie&&(ae[m++]=ae[L++]))}break}}break}}while(d<p&&m<_);d-=ie=O>>3,k&=(1<<(O-=ie<<3))-1,l.next_in=d,l.next_out=m,l.avail_in=d<p?p-d+5:5-(d-p),l.avail_out=m<_?_-m+257:257-(m-_),h.hold=k,h.bits=O}},{}],49:[function(t,i,a){var l=t("../utils/common"),u=t("./adler32"),h=t("./crc32"),d=t("./inffast"),p=t("./inftrees"),m=1,v=2,_=0,y=-2,S=1,E=852,C=592;function A(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function O(L){var x;return L&&L.state?(x=L.state,L.total_in=L.total_out=x.total=0,L.msg="",x.wrap&&(L.adler=1&x.wrap),x.mode=S,x.last=0,x.havedict=0,x.dmax=32768,x.head=null,x.hold=0,x.bits=0,x.lencode=x.lendyn=new l.Buf32(E),x.distcode=x.distdyn=new l.Buf32(C),x.sane=1,x.back=-1,_):y}function N(L){var x;return L&&L.state?((x=L.state).wsize=0,x.whave=0,x.wnext=0,O(L)):y}function D(L,x){var T,ae;return L&&L.state?(ae=L.state,x<0?(T=0,x=-x):(T=1+(x>>4),x<48&&(x&=15)),x&&(x<8||15<x)?y:(ae.window!==null&&ae.wbits!==x&&(ae.window=null),ae.wrap=T,ae.wbits=x,N(L))):y}function W(L,x){var T,ae;return L?(ae=new k,(L.state=ae).window=null,(T=D(L,x))!==_&&(L.state=null),T):y}var V,J,Y=!0;function ie(L){if(Y){var x;for(V=new l.Buf32(512),J=new l.Buf32(32),x=0;x<144;)L.lens[x++]=8;for(;x<256;)L.lens[x++]=9;for(;x<280;)L.lens[x++]=7;for(;x<288;)L.lens[x++]=8;for(p(m,L.lens,0,288,V,0,L.work,{bits:9}),x=0;x<32;)L.lens[x++]=5;p(v,L.lens,0,32,J,0,L.work,{bits:5}),Y=!1}L.lencode=V,L.lenbits=9,L.distcode=J,L.distbits=5}function ye(L,x,T,ae){var P,I=L.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new l.Buf8(I.wsize)),ae>=I.wsize?(l.arraySet(I.window,x,T-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(ae<(P=I.wsize-I.wnext)&&(P=ae),l.arraySet(I.window,x,T-ae,P,I.wnext),(ae-=P)?(l.arraySet(I.window,x,T-ae,ae,0),I.wnext=ae,I.whave=I.wsize):(I.wnext+=P,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=P))),0}a.inflateReset=N,a.inflateReset2=D,a.inflateResetKeep=O,a.inflateInit=function(L){return W(L,15)},a.inflateInit2=W,a.inflate=function(L,x){var T,ae,P,I,he,re,U,G,q,Z,ce,ue,Ae,qe,De,Fe,Pe,Ie,Be,dt,b,Q,B,z,M=0,K=new l.Buf8(4),ge=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return y;(T=L.state).mode===12&&(T.mode=13),he=L.next_out,P=L.output,U=L.avail_out,I=L.next_in,ae=L.input,re=L.avail_in,G=T.hold,q=T.bits,Z=re,ce=U,Q=_;e:for(;;)switch(T.mode){case S:if(T.wrap===0){T.mode=13;break}for(;q<16;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(2&T.wrap&&G===35615){K[T.check=0]=255&G,K[1]=G>>>8&255,T.check=h(T.check,K,2,0),q=G=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&G)<<8)+(G>>8))%31){L.msg="incorrect header check",T.mode=30;break}if((15&G)!=8){L.msg="unknown compression method",T.mode=30;break}if(q-=4,b=8+(15&(G>>>=4)),T.wbits===0)T.wbits=b;else if(b>T.wbits){L.msg="invalid window size",T.mode=30;break}T.dmax=1<<b,L.adler=T.check=1,T.mode=512&G?10:12,q=G=0;break;case 2:for(;q<16;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(T.flags=G,(255&T.flags)!=8){L.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){L.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=G>>8&1),512&T.flags&&(K[0]=255&G,K[1]=G>>>8&255,T.check=h(T.check,K,2,0)),q=G=0,T.mode=3;case 3:for(;q<32;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}T.head&&(T.head.time=G),512&T.flags&&(K[0]=255&G,K[1]=G>>>8&255,K[2]=G>>>16&255,K[3]=G>>>24&255,T.check=h(T.check,K,4,0)),q=G=0,T.mode=4;case 4:for(;q<16;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}T.head&&(T.head.xflags=255&G,T.head.os=G>>8),512&T.flags&&(K[0]=255&G,K[1]=G>>>8&255,T.check=h(T.check,K,2,0)),q=G=0,T.mode=5;case 5:if(1024&T.flags){for(;q<16;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}T.length=G,T.head&&(T.head.extra_len=G),512&T.flags&&(K[0]=255&G,K[1]=G>>>8&255,T.check=h(T.check,K,2,0)),q=G=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(re<(ue=T.length)&&(ue=re),ue&&(T.head&&(b=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),l.arraySet(T.head.extra,ae,I,ue,b)),512&T.flags&&(T.check=h(T.check,ae,ue,I)),re-=ue,I+=ue,T.length-=ue),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(re===0)break e;for(ue=0;b=ae[I+ue++],T.head&&b&&T.length<65536&&(T.head.name+=String.fromCharCode(b)),b&&ue<re;);if(512&T.flags&&(T.check=h(T.check,ae,ue,I)),re-=ue,I+=ue,b)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(re===0)break e;for(ue=0;b=ae[I+ue++],T.head&&b&&T.length<65536&&(T.head.comment+=String.fromCharCode(b)),b&&ue<re;);if(512&T.flags&&(T.check=h(T.check,ae,ue,I)),re-=ue,I+=ue,b)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;q<16;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(G!==(65535&T.check)){L.msg="header crc mismatch",T.mode=30;break}q=G=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),L.adler=T.check=0,T.mode=12;break;case 10:for(;q<32;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}L.adler=T.check=A(G),q=G=0,T.mode=11;case 11:if(T.havedict===0)return L.next_out=he,L.avail_out=U,L.next_in=I,L.avail_in=re,T.hold=G,T.bits=q,2;L.adler=T.check=1,T.mode=12;case 12:if(x===5||x===6)break e;case 13:if(T.last){G>>>=7&q,q-=7&q,T.mode=27;break}for(;q<3;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}switch(T.last=1&G,q-=1,3&(G>>>=1)){case 0:T.mode=14;break;case 1:if(ie(T),T.mode=20,x!==6)break;G>>>=2,q-=2;break e;case 2:T.mode=17;break;case 3:L.msg="invalid block type",T.mode=30}G>>>=2,q-=2;break;case 14:for(G>>>=7&q,q-=7&q;q<32;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if((65535&G)!=(G>>>16^65535)){L.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&G,q=G=0,T.mode=15,x===6)break e;case 15:T.mode=16;case 16:if(ue=T.length){if(re<ue&&(ue=re),U<ue&&(ue=U),ue===0)break e;l.arraySet(P,ae,I,ue,he),re-=ue,I+=ue,U-=ue,he+=ue,T.length-=ue;break}T.mode=12;break;case 17:for(;q<14;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(T.nlen=257+(31&G),G>>>=5,q-=5,T.ndist=1+(31&G),G>>>=5,q-=5,T.ncode=4+(15&G),G>>>=4,q-=4,286<T.nlen||30<T.ndist){L.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;q<3;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}T.lens[ge[T.have++]]=7&G,G>>>=3,q-=3}for(;T.have<19;)T.lens[ge[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,B={bits:T.lenbits},Q=p(0,T.lens,0,19,T.lencode,0,T.work,B),T.lenbits=B.bits,Q){L.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Fe=(M=T.lencode[G&(1<<T.lenbits)-1])>>>16&255,Pe=65535&M,!((De=M>>>24)<=q);){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(Pe<16)G>>>=De,q-=De,T.lens[T.have++]=Pe;else{if(Pe===16){for(z=De+2;q<z;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(G>>>=De,q-=De,T.have===0){L.msg="invalid bit length repeat",T.mode=30;break}b=T.lens[T.have-1],ue=3+(3&G),G>>>=2,q-=2}else if(Pe===17){for(z=De+3;q<z;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}q-=De,b=0,ue=3+(7&(G>>>=De)),G>>>=3,q-=3}else{for(z=De+7;q<z;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}q-=De,b=0,ue=11+(127&(G>>>=De)),G>>>=7,q-=7}if(T.have+ue>T.nlen+T.ndist){L.msg="invalid bit length repeat",T.mode=30;break}for(;ue--;)T.lens[T.have++]=b}}if(T.mode===30)break;if(T.lens[256]===0){L.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,B={bits:T.lenbits},Q=p(m,T.lens,0,T.nlen,T.lencode,0,T.work,B),T.lenbits=B.bits,Q){L.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,B={bits:T.distbits},Q=p(v,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,B),T.distbits=B.bits,Q){L.msg="invalid distances set",T.mode=30;break}if(T.mode=20,x===6)break e;case 20:T.mode=21;case 21:if(6<=re&&258<=U){L.next_out=he,L.avail_out=U,L.next_in=I,L.avail_in=re,T.hold=G,T.bits=q,d(L,ce),he=L.next_out,P=L.output,U=L.avail_out,I=L.next_in,ae=L.input,re=L.avail_in,G=T.hold,q=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Fe=(M=T.lencode[G&(1<<T.lenbits)-1])>>>16&255,Pe=65535&M,!((De=M>>>24)<=q);){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(Fe&&(240&Fe)==0){for(Ie=De,Be=Fe,dt=Pe;Fe=(M=T.lencode[dt+((G&(1<<Ie+Be)-1)>>Ie)])>>>16&255,Pe=65535&M,!(Ie+(De=M>>>24)<=q);){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}G>>>=Ie,q-=Ie,T.back+=Ie}if(G>>>=De,q-=De,T.back+=De,T.length=Pe,Fe===0){T.mode=26;break}if(32&Fe){T.back=-1,T.mode=12;break}if(64&Fe){L.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Fe,T.mode=22;case 22:if(T.extra){for(z=T.extra;q<z;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}T.length+=G&(1<<T.extra)-1,G>>>=T.extra,q-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Fe=(M=T.distcode[G&(1<<T.distbits)-1])>>>16&255,Pe=65535&M,!((De=M>>>24)<=q);){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if((240&Fe)==0){for(Ie=De,Be=Fe,dt=Pe;Fe=(M=T.distcode[dt+((G&(1<<Ie+Be)-1)>>Ie)])>>>16&255,Pe=65535&M,!(Ie+(De=M>>>24)<=q);){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}G>>>=Ie,q-=Ie,T.back+=Ie}if(G>>>=De,q-=De,T.back+=De,64&Fe){L.msg="invalid distance code",T.mode=30;break}T.offset=Pe,T.extra=15&Fe,T.mode=24;case 24:if(T.extra){for(z=T.extra;q<z;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}T.offset+=G&(1<<T.extra)-1,G>>>=T.extra,q-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){L.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(U===0)break e;if(ue=ce-U,T.offset>ue){if((ue=T.offset-ue)>T.whave&&T.sane){L.msg="invalid distance too far back",T.mode=30;break}Ae=ue>T.wnext?(ue-=T.wnext,T.wsize-ue):T.wnext-ue,ue>T.length&&(ue=T.length),qe=T.window}else qe=P,Ae=he-T.offset,ue=T.length;for(U<ue&&(ue=U),U-=ue,T.length-=ue;P[he++]=qe[Ae++],--ue;);T.length===0&&(T.mode=21);break;case 26:if(U===0)break e;P[he++]=T.length,U--,T.mode=21;break;case 27:if(T.wrap){for(;q<32;){if(re===0)break e;re--,G|=ae[I++]<<q,q+=8}if(ce-=U,L.total_out+=ce,T.total+=ce,ce&&(L.adler=T.check=T.flags?h(T.check,P,ce,he-ce):u(T.check,P,ce,he-ce)),ce=U,(T.flags?G:A(G))!==T.check){L.msg="incorrect data check",T.mode=30;break}q=G=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;q<32;){if(re===0)break e;re--,G+=ae[I++]<<q,q+=8}if(G!==(4294967295&T.total)){L.msg="incorrect length check",T.mode=30;break}q=G=0}T.mode=29;case 29:Q=1;break e;case 30:Q=-3;break e;case 31:return-4;case 32:default:return y}return L.next_out=he,L.avail_out=U,L.next_in=I,L.avail_in=re,T.hold=G,T.bits=q,(T.wsize||ce!==L.avail_out&&T.mode<30&&(T.mode<27||x!==4))&&ye(L,L.output,L.next_out,ce-L.avail_out)?(T.mode=31,-4):(Z-=L.avail_in,ce-=L.avail_out,L.total_in+=Z,L.total_out+=ce,T.total+=ce,T.wrap&&ce&&(L.adler=T.check=T.flags?h(T.check,P,ce,L.next_out-ce):u(T.check,P,ce,L.next_out-ce)),L.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(Z==0&&ce===0||x===4)&&Q===_&&(Q=-5),Q)},a.inflateEnd=function(L){if(!L||!L.state)return y;var x=L.state;return x.window&&(x.window=null),L.state=null,_},a.inflateGetHeader=function(L,x){var T;return L&&L.state?(2&(T=L.state).wrap)==0?y:((T.head=x).done=!1,_):y},a.inflateSetDictionary=function(L,x){var T,ae=x.length;return L&&L.state?(T=L.state).wrap!==0&&T.mode!==11?y:T.mode===11&&u(1,x,ae,0)!==T.check?-3:ye(L,x,ae,ae)?(T.mode=31,-4):(T.havedict=1,_):y},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,a){var l=t("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,v,_,y,S,E,C,A){var k,O,N,D,W,V,J,Y,ie,ye=A.bits,L=0,x=0,T=0,ae=0,P=0,I=0,he=0,re=0,U=0,G=0,q=null,Z=0,ce=new l.Buf16(16),ue=new l.Buf16(16),Ae=null,qe=0;for(L=0;L<=15;L++)ce[L]=0;for(x=0;x<y;x++)ce[v[_+x]]++;for(P=ye,ae=15;1<=ae&&ce[ae]===0;ae--);if(ae<P&&(P=ae),ae===0)return S[E++]=20971520,S[E++]=20971520,A.bits=1,0;for(T=1;T<ae&&ce[T]===0;T++);for(P<T&&(P=T),L=re=1;L<=15;L++)if(re<<=1,(re-=ce[L])<0)return-1;if(0<re&&(m===0||ae!==1))return-1;for(ue[1]=0,L=1;L<15;L++)ue[L+1]=ue[L]+ce[L];for(x=0;x<y;x++)v[_+x]!==0&&(C[ue[v[_+x]]++]=x);if(V=m===0?(q=Ae=C,19):m===1?(q=u,Z-=257,Ae=h,qe-=257,256):(q=d,Ae=p,-1),L=T,W=E,he=x=G=0,N=-1,D=(U=1<<(I=P))-1,m===1&&852<U||m===2&&592<U)return 1;for(;;){for(J=L-he,ie=C[x]<V?(Y=0,C[x]):C[x]>V?(Y=Ae[qe+C[x]],q[Z+C[x]]):(Y=96,0),k=1<<L-he,T=O=1<<I;S[W+(G>>he)+(O-=k)]=J<<24|Y<<16|ie|0,O!==0;);for(k=1<<L-1;G&k;)k>>=1;if(k!==0?(G&=k-1,G+=k):G=0,x++,--ce[L]==0){if(L===ae)break;L=v[_+C[x]]}if(P<L&&(G&D)!==N){for(he===0&&(he=P),W+=T,re=1<<(I=L-he);I+he<ae&&!((re-=ce[I+he])<=0);)I++,re<<=1;if(U+=1<<I,m===1&&852<U||m===2&&592<U)return 1;S[N=G&D]=P<<24|I<<16|W-E|0}}return G!==0&&(S[W+G]=L-he<<24|64<<16|0),A.bits=P,0}},{"../utils/common":41}],51:[function(t,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,a){var l=t("../utils/common"),u=0,h=1;function d(M){for(var K=M.length;0<=--K;)M[K]=0}var p=0,m=29,v=256,_=v+1+m,y=30,S=19,E=2*_+1,C=15,A=16,k=7,O=256,N=16,D=17,W=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],J=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ye=new Array(2*(_+2));d(ye);var L=new Array(2*y);d(L);var x=new Array(512);d(x);var T=new Array(256);d(T);var ae=new Array(m);d(ae);var P,I,he,re=new Array(y);function U(M,K,ge,F,H){this.static_tree=M,this.extra_bits=K,this.extra_base=ge,this.elems=F,this.max_length=H,this.has_stree=M&&M.length}function G(M,K){this.dyn_tree=M,this.max_code=0,this.stat_desc=K}function q(M){return M<256?x[M]:x[256+(M>>>7)]}function Z(M,K){M.pending_buf[M.pending++]=255&K,M.pending_buf[M.pending++]=K>>>8&255}function ce(M,K,ge){M.bi_valid>A-ge?(M.bi_buf|=K<<M.bi_valid&65535,Z(M,M.bi_buf),M.bi_buf=K>>A-M.bi_valid,M.bi_valid+=ge-A):(M.bi_buf|=K<<M.bi_valid&65535,M.bi_valid+=ge)}function ue(M,K,ge){ce(M,ge[2*K],ge[2*K+1])}function Ae(M,K){for(var ge=0;ge|=1&M,M>>>=1,ge<<=1,0<--K;);return ge>>>1}function qe(M,K,ge){var F,H,oe=new Array(C+1),ve=0;for(F=1;F<=C;F++)oe[F]=ve=ve+ge[F-1]<<1;for(H=0;H<=K;H++){var de=M[2*H+1];de!==0&&(M[2*H]=Ae(oe[de]++,de))}}function De(M){var K;for(K=0;K<_;K++)M.dyn_ltree[2*K]=0;for(K=0;K<y;K++)M.dyn_dtree[2*K]=0;for(K=0;K<S;K++)M.bl_tree[2*K]=0;M.dyn_ltree[2*O]=1,M.opt_len=M.static_len=0,M.last_lit=M.matches=0}function Fe(M){8<M.bi_valid?Z(M,M.bi_buf):0<M.bi_valid&&(M.pending_buf[M.pending++]=M.bi_buf),M.bi_buf=0,M.bi_valid=0}function Pe(M,K,ge,F){var H=2*K,oe=2*ge;return M[H]<M[oe]||M[H]===M[oe]&&F[K]<=F[ge]}function Ie(M,K,ge){for(var F=M.heap[ge],H=ge<<1;H<=M.heap_len&&(H<M.heap_len&&Pe(K,M.heap[H+1],M.heap[H],M.depth)&&H++,!Pe(K,F,M.heap[H],M.depth));)M.heap[ge]=M.heap[H],ge=H,H<<=1;M.heap[ge]=F}function Be(M,K,ge){var F,H,oe,ve,de=0;if(M.last_lit!==0)for(;F=M.pending_buf[M.d_buf+2*de]<<8|M.pending_buf[M.d_buf+2*de+1],H=M.pending_buf[M.l_buf+de],de++,F===0?ue(M,H,K):(ue(M,(oe=T[H])+v+1,K),(ve=V[oe])!==0&&ce(M,H-=ae[oe],ve),ue(M,oe=q(--F),ge),(ve=J[oe])!==0&&ce(M,F-=re[oe],ve)),de<M.last_lit;);ue(M,O,K)}function dt(M,K){var ge,F,H,oe=K.dyn_tree,ve=K.stat_desc.static_tree,de=K.stat_desc.has_stree,le=K.stat_desc.elems,be=-1;for(M.heap_len=0,M.heap_max=E,ge=0;ge<le;ge++)oe[2*ge]!==0?(M.heap[++M.heap_len]=be=ge,M.depth[ge]=0):oe[2*ge+1]=0;for(;M.heap_len<2;)oe[2*(H=M.heap[++M.heap_len]=be<2?++be:0)]=1,M.depth[H]=0,M.opt_len--,de&&(M.static_len-=ve[2*H+1]);for(K.max_code=be,ge=M.heap_len>>1;1<=ge;ge--)Ie(M,oe,ge);for(H=le;ge=M.heap[1],M.heap[1]=M.heap[M.heap_len--],Ie(M,oe,1),F=M.heap[1],M.heap[--M.heap_max]=ge,M.heap[--M.heap_max]=F,oe[2*H]=oe[2*ge]+oe[2*F],M.depth[H]=(M.depth[ge]>=M.depth[F]?M.depth[ge]:M.depth[F])+1,oe[2*ge+1]=oe[2*F+1]=H,M.heap[1]=H++,Ie(M,oe,1),2<=M.heap_len;);M.heap[--M.heap_max]=M.heap[1],function(Te,Re){var He,Je,yt,Ve,at,$t,Ht=Re.dyn_tree,Xn=Re.max_code,ss=Re.stat_desc.static_tree,as=Re.stat_desc.has_stree,os=Re.stat_desc.extra_bits,Fi=Re.stat_desc.extra_base,zn=Re.stat_desc.max_length,ls=0;for(Ve=0;Ve<=C;Ve++)Te.bl_count[Ve]=0;for(Ht[2*Te.heap[Te.heap_max]+1]=0,He=Te.heap_max+1;He<E;He++)zn<(Ve=Ht[2*Ht[2*(Je=Te.heap[He])+1]+1]+1)&&(Ve=zn,ls++),Ht[2*Je+1]=Ve,Xn<Je||(Te.bl_count[Ve]++,at=0,Fi<=Je&&(at=os[Je-Fi]),$t=Ht[2*Je],Te.opt_len+=$t*(Ve+at),as&&(Te.static_len+=$t*(ss[2*Je+1]+at)));if(ls!==0){do{for(Ve=zn-1;Te.bl_count[Ve]===0;)Ve--;Te.bl_count[Ve]--,Te.bl_count[Ve+1]+=2,Te.bl_count[zn]--,ls-=2}while(0<ls);for(Ve=zn;Ve!==0;Ve--)for(Je=Te.bl_count[Ve];Je!==0;)Xn<(yt=Te.heap[--He])||(Ht[2*yt+1]!==Ve&&(Te.opt_len+=(Ve-Ht[2*yt+1])*Ht[2*yt],Ht[2*yt+1]=Ve),Je--)}}(M,K),qe(oe,be,M.bl_count)}function b(M,K,ge){var F,H,oe=-1,ve=K[1],de=0,le=7,be=4;for(ve===0&&(le=138,be=3),K[2*(ge+1)+1]=65535,F=0;F<=ge;F++)H=ve,ve=K[2*(F+1)+1],++de<le&&H===ve||(de<be?M.bl_tree[2*H]+=de:H!==0?(H!==oe&&M.bl_tree[2*H]++,M.bl_tree[2*N]++):de<=10?M.bl_tree[2*D]++:M.bl_tree[2*W]++,oe=H,be=(de=0)===ve?(le=138,3):H===ve?(le=6,3):(le=7,4))}function Q(M,K,ge){var F,H,oe=-1,ve=K[1],de=0,le=7,be=4;for(ve===0&&(le=138,be=3),F=0;F<=ge;F++)if(H=ve,ve=K[2*(F+1)+1],!(++de<le&&H===ve)){if(de<be)for(;ue(M,H,M.bl_tree),--de!=0;);else H!==0?(H!==oe&&(ue(M,H,M.bl_tree),de--),ue(M,N,M.bl_tree),ce(M,de-3,2)):de<=10?(ue(M,D,M.bl_tree),ce(M,de-3,3)):(ue(M,W,M.bl_tree),ce(M,de-11,7));oe=H,be=(de=0)===ve?(le=138,3):H===ve?(le=6,3):(le=7,4)}}d(re);var B=!1;function z(M,K,ge,F){ce(M,(p<<1)+(F?1:0),3),function(H,oe,ve,de){Fe(H),Z(H,ve),Z(H,~ve),l.arraySet(H.pending_buf,H.window,oe,ve,H.pending),H.pending+=ve}(M,K,ge)}a._tr_init=function(M){B||(function(){var K,ge,F,H,oe,ve=new Array(C+1);for(H=F=0;H<m-1;H++)for(ae[H]=F,K=0;K<1<<V[H];K++)T[F++]=H;for(T[F-1]=H,H=oe=0;H<16;H++)for(re[H]=oe,K=0;K<1<<J[H];K++)x[oe++]=H;for(oe>>=7;H<y;H++)for(re[H]=oe<<7,K=0;K<1<<J[H]-7;K++)x[256+oe++]=H;for(ge=0;ge<=C;ge++)ve[ge]=0;for(K=0;K<=143;)ye[2*K+1]=8,K++,ve[8]++;for(;K<=255;)ye[2*K+1]=9,K++,ve[9]++;for(;K<=279;)ye[2*K+1]=7,K++,ve[7]++;for(;K<=287;)ye[2*K+1]=8,K++,ve[8]++;for(qe(ye,_+1,ve),K=0;K<y;K++)L[2*K+1]=5,L[2*K]=Ae(K,5);P=new U(ye,V,v+1,_,C),I=new U(L,J,0,y,C),he=new U(new Array(0),Y,0,S,k)}(),B=!0),M.l_desc=new G(M.dyn_ltree,P),M.d_desc=new G(M.dyn_dtree,I),M.bl_desc=new G(M.bl_tree,he),M.bi_buf=0,M.bi_valid=0,De(M)},a._tr_stored_block=z,a._tr_flush_block=function(M,K,ge,F){var H,oe,ve=0;0<M.level?(M.strm.data_type===2&&(M.strm.data_type=function(de){var le,be=4093624447;for(le=0;le<=31;le++,be>>>=1)if(1&be&&de.dyn_ltree[2*le]!==0)return u;if(de.dyn_ltree[18]!==0||de.dyn_ltree[20]!==0||de.dyn_ltree[26]!==0)return h;for(le=32;le<v;le++)if(de.dyn_ltree[2*le]!==0)return h;return u}(M)),dt(M,M.l_desc),dt(M,M.d_desc),ve=function(de){var le;for(b(de,de.dyn_ltree,de.l_desc.max_code),b(de,de.dyn_dtree,de.d_desc.max_code),dt(de,de.bl_desc),le=S-1;3<=le&&de.bl_tree[2*ie[le]+1]===0;le--);return de.opt_len+=3*(le+1)+5+5+4,le}(M),H=M.opt_len+3+7>>>3,(oe=M.static_len+3+7>>>3)<=H&&(H=oe)):H=oe=ge+5,ge+4<=H&&K!==-1?z(M,K,ge,F):M.strategy===4||oe===H?(ce(M,2+(F?1:0),3),Be(M,ye,L)):(ce(M,4+(F?1:0),3),function(de,le,be,Te){var Re;for(ce(de,le-257,5),ce(de,be-1,5),ce(de,Te-4,4),Re=0;Re<Te;Re++)ce(de,de.bl_tree[2*ie[Re]+1],3);Q(de,de.dyn_ltree,le-1),Q(de,de.dyn_dtree,be-1)}(M,M.l_desc.max_code+1,M.d_desc.max_code+1,ve+1),Be(M,M.dyn_ltree,M.dyn_dtree)),De(M),F&&Fe(M)},a._tr_tally=function(M,K,ge){return M.pending_buf[M.d_buf+2*M.last_lit]=K>>>8&255,M.pending_buf[M.d_buf+2*M.last_lit+1]=255&K,M.pending_buf[M.l_buf+M.last_lit]=255&ge,M.last_lit++,K===0?M.dyn_ltree[2*ge]++:(M.matches++,K--,M.dyn_ltree[2*(T[ge]+v+1)]++,M.dyn_dtree[2*q(K)]++),M.last_lit===M.lit_bufsize-1},a._tr_align=function(M){ce(M,2,3),ue(M,O,ye),function(K){K.bi_valid===16?(Z(K,K.bi_buf),K.bi_buf=0,K.bi_valid=0):8<=K.bi_valid&&(K.pending_buf[K.pending++]=255&K.bi_buf,K.bi_buf>>=8,K.bi_valid-=8)}(M)}},{"../utils/common":41}],53:[function(t,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,a){(function(l){(function(u,h){if(!u.setImmediate){var d,p,m,v,_=1,y={},S=!1,E=u.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(u);C=C&&C.setTimeout?C:u,d={}.toString.call(u.process)==="[object process]"?function(N){process.nextTick(function(){k(N)})}:function(){if(u.postMessage&&!u.importScripts){var N=!0,D=u.onmessage;return u.onmessage=function(){N=!1},u.postMessage("","*"),u.onmessage=D,N}}()?(v="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",O,!1):u.attachEvent("onmessage",O),function(N){u.postMessage(v+N,"*")}):u.MessageChannel?((m=new MessageChannel).port1.onmessage=function(N){k(N.data)},function(N){m.port2.postMessage(N)}):E&&"onreadystatechange"in E.createElement("script")?(p=E.documentElement,function(N){var D=E.createElement("script");D.onreadystatechange=function(){k(N),D.onreadystatechange=null,p.removeChild(D),D=null},p.appendChild(D)}):function(N){setTimeout(k,0,N)},C.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var D=new Array(arguments.length-1),W=0;W<D.length;W++)D[W]=arguments[W+1];var V={callback:N,args:D};return y[_]=V,d(_),_++},C.clearImmediate=A}function A(N){delete y[N]}function k(N){if(S)setTimeout(k,0,N);else{var D=y[N];if(D){S=!0;try{(function(W){var V=W.callback,J=W.args;switch(J.length){case 0:V();break;case 1:V(J[0]);break;case 2:V(J[0],J[1]);break;case 3:V(J[0],J[1],J[2]);break;default:V.apply(h,J)}})(D)}finally{A(N),S=!1}}}}function O(N){N.source===u&&typeof N.data=="string"&&N.data.indexOf(v)===0&&k(+N.data.slice(v.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof wu<"u"?wu:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(uf)),uf.exports}var OR=xR();const By=tp(OR),LR=()=>{};var Fy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee=function(r,e){if(!r)throw ga(e)},ga=function(r){return new Error("Firebase Database ("+j0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},MR=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],h=r[t++],d=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const l=r[t++],u=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},cp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,h=u?r[a+1]:0,d=a+2<r.length,p=d?r[a+2]:0,m=l>>2,v=(l&3)<<4|h>>4;let _=(h&15)<<2|p>>6,y=p&63;d||(y=64,u||(_=64)),i.push(t[m],t[v],t[_],t[y])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(q0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],h=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const v=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||h==null||p==null||v==null)throw new UR;const _=l<<2|h>>4;if(i.push(_),p!==64){const y=h<<4&240|p>>2;if(i.push(y),v!==64){const S=p<<6&192|v;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class UR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V0=function(r){const e=q0(r);return cp.encodeByteArray(e,!0)},Gu=function(r){return V0(r).replace(/\./g,"")},Bu=function(r){try{return cp.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(r){return W0(void 0,r)}function W0(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!PR(t)||(r[t]=W0(r[t],e[t]));return r}function PR(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=()=>GR().__FIREBASE_DEFAULTS__,FR=()=>{if(typeof process>"u"||typeof Fy>"u")return;const r=Fy.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},HR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Bu(r[1]);return e&&JSON.parse(e)},hp=()=>{try{return LR()||BR()||FR()||HR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$0=r=>{var e,t;return(t=(e=hp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},jR=r=>{const e=$0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Y0=()=>{var r;return(r=hp())===null||r===void 0?void 0:r.config},K0=r=>{var e;return(e=hp())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(r){return r.endsWith(".cloudworkstations.dev")}async function Z0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Gu(JSON.stringify(t)),Gu(JSON.stringify(u)),""].join(".")}const Lo={};function VR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Lo))Lo[e]?r.emulator.push(e):r.prod.push(e);return r}function WR(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Hy=!1;function X0(r,e){if(typeof window>"u"||typeof document>"u"||!ma(window.location.host)||Lo[r]===e||Lo[r]||Hy)return;Lo[r]=e;function t(_){return`__firebase__banner__${_}`}const i="__firebase__banner",l=VR().prod.length>0;function u(){const _=document.getElementById(i);_&&_.remove()}function h(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function d(_,y){_.setAttribute("width","24"),_.setAttribute("id",y),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function p(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Hy=!0,u()},_}function m(_,y){_.setAttribute("id",y),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function v(){const _=WR(i),y=t("text"),S=document.getElementById(y)||document.createElement("span"),E=t("learnmore"),C=document.getElementById(E)||document.createElement("a"),A=t("preprendIcon"),k=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const O=_.element;h(O),m(C,E);const N=p();d(k,A),O.append(k,S,C,N),document.body.appendChild(O)}l?(S.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function $R(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q0(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function J0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YR(){const r=nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function KR(){return j0.NODE_ADMIN===!0}function eE(){try{return typeof indexedDB=="object"}catch{return!1}}function tE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function ZR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="FirebaseError";class ai extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=XR,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ns.prototype.create)}}class ns{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?QR(l,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new ai(a,h,i)}}function QR(r,e){return r.replace(JR,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const JR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(r){return JSON.parse(r)}function xt(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=function(r){let e={},t={},i={},a="";try{const l=r.split(".");e=Ho(Bu(l[0])||""),t=Ho(Bu(l[1])||""),a=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},e2=function(r){const e=nE(r),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},t2=function(r){const e=nE(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function la(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function Of(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Fu(r,e,t){const i={};for(const a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=e.call(t,r[a],a,r));return i}function br(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],u=e[a];if(jy(l)&&jy(u)){if(!br(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function jy(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Io(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function xo(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const _=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(_<<1|_>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p,m;for(let v=0;v<80;v++){v<40?v<20?(p=h^l&(u^h),m=1518500249):(p=l^u^h,m=1859775393):v<60?(p=l&u|h&(l|u),m=2400959708):(p=l^u^h,m=3395469782);const _=(a<<5|a>>>27)+p+d+m+i[v]&4294967295;d=h,h=u,u=(l<<30|l>>>2)&4294967295,l=a,a=_}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<t;)if(l[u]=e[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function i2(r,e){const t=new r2(r,e);return t.subscribe.bind(t)}class r2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");s2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=cf),a.error===void 0&&(a.error=cf),a.complete===void 0&&(a.complete=cf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function s2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function cf(){}function fp(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,Ee(i<r.length,"Surrogate pair missing trail surrogate.");const u=r.charCodeAt(i)-56320;a=65536+(l<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},pc=function(r){let e=0;for(let t=0;t<r.length;t++){const i=r.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=1e3,l2=2,u2=4*60*60*1e3,c2=.5;function qy(r,e=o2,t=l2){const i=e*Math.pow(t,r),a=Math.round(c2*i*(Math.random()-.5)*2);return Math.min(u2,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r){return r&&r._delegate?r._delegate:r}class Zn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new fc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f2(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:d2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d2(r){return r===jr?void 0:r}function f2(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new h2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ct||(ct={}));const g2={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},m2=ct.INFO,v2={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},_2=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=v2[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gc{constructor(e){this.name=e,this._logLevel=m2,this._logHandler=_2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const y2=(r,e)=>e.some(t=>r instanceof t);let Vy,Wy;function b2(){return Vy||(Vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E2(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iE=new WeakMap,Lf=new WeakMap,rE=new WeakMap,hf=new WeakMap,pp=new WeakMap;function w2(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(mr(r.result)),a()},u=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&iE.set(t,r)}).catch(()=>{}),pp.set(e,r),e}function S2(r){if(Lf.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Lf.set(r,e)}let Mf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Lf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||rE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mr(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function T2(r){Mf=r(Mf)}function C2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(df(this),e,...t);return rE.set(i,e.sort?e.sort():[e]),mr(i)}:E2().includes(r)?function(...e){return r.apply(df(this),e),mr(iE.get(this))}:function(...e){return mr(r.apply(df(this),e))}}function A2(r){return typeof r=="function"?C2(r):(r instanceof IDBTransaction&&S2(r),y2(r,b2())?new Proxy(r,Mf):r)}function mr(r){if(r instanceof IDBRequest)return w2(r);if(hf.has(r))return hf.get(r);const e=A2(r);return e!==r&&(hf.set(r,e),pp.set(e,r)),e}const df=r=>pp.get(r);function sE(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),h=mr(u);return i&&u.addEventListener("upgradeneeded",d=>{i(mr(u.result),d.oldVersion,d.newVersion,mr(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const R2=["get","getKey","getAll","getAllKeys","count"],k2=["put","add","delete","clear"],ff=new Map;function $y(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=k2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||R2.includes(t)))return;const l=async function(u,...h){const d=this.transaction(u,a?"readwrite":"readonly");let p=d.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&d.done]))[0]};return ff.set(e,l),l}T2(r=>({...r,get:(e,t,i)=>$y(e,t)||r.get(e,t,i),has:(e,t)=>!!$y(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N2(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function N2(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uf="@firebase/app",Yy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new gc("@firebase/app"),I2="@firebase/app-compat",x2="@firebase/analytics-compat",O2="@firebase/analytics",L2="@firebase/app-check-compat",M2="@firebase/app-check",U2="@firebase/auth",z2="@firebase/auth-compat",P2="@firebase/database",G2="@firebase/data-connect",B2="@firebase/database-compat",F2="@firebase/functions",H2="@firebase/functions-compat",j2="@firebase/installations",q2="@firebase/installations-compat",V2="@firebase/messaging",W2="@firebase/messaging-compat",$2="@firebase/performance",Y2="@firebase/performance-compat",K2="@firebase/remote-config",Z2="@firebase/remote-config-compat",X2="@firebase/storage",Q2="@firebase/storage-compat",J2="@firebase/firestore",ek="@firebase/ai",tk="@firebase/firestore-compat",nk="firebase",ik="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="[DEFAULT]",rk={[Uf]:"fire-core",[I2]:"fire-core-compat",[O2]:"fire-analytics",[x2]:"fire-analytics-compat",[M2]:"fire-app-check",[L2]:"fire-app-check-compat",[U2]:"fire-auth",[z2]:"fire-auth-compat",[P2]:"fire-rtdb",[G2]:"fire-data-connect",[B2]:"fire-rtdb-compat",[F2]:"fire-fn",[H2]:"fire-fn-compat",[j2]:"fire-iid",[q2]:"fire-iid-compat",[V2]:"fire-fcm",[W2]:"fire-fcm-compat",[$2]:"fire-perf",[Y2]:"fire-perf-compat",[K2]:"fire-rc",[Z2]:"fire-rc-compat",[X2]:"fire-gcs",[Q2]:"fire-gcs-compat",[J2]:"fire-fst",[tk]:"fire-fst-compat",[ek]:"fire-vertex","fire-js":"fire-js",[nk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Map,sk=new Map,Pf=new Map;function Ky(r,e){try{r.container.addComponent(e)}catch(t){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ri(r){const e=r.name;if(Pf.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,r);for(const t of Hu.values())Ky(t,r);for(const t of sk.values())Ky(t,r);return!0}function is(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function bn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vr=new ns("app","Firebase",ak);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=ik;function aE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i=Object.assign({name:zf,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw vr.create("bad-app-name",{appName:String(a)});if(t||(t=Y0()),!t)throw vr.create("no-options");const l=Hu.get(a);if(l){if(br(t,l.options)&&br(i,l.config))return l;throw vr.create("duplicate-app",{appName:a})}const u=new p2(a);for(const d of Pf.values())u.addComponent(d);const h=new ok(t,i,u);return Hu.set(a,h),h}function gp(r=zf){const e=Hu.get(r);if(!e&&r===zf&&Y0())return aE();if(!e)throw vr.create("no-app",{appName:r});return e}function On(r,e,t){var i;let a=(i=rk[r])!==null&&i!==void 0?i:r;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${a}" with version "${e}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(h.join(" "));return}ri(new Zn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="firebase-heartbeat-database",uk=1,jo="firebase-heartbeat-store";let pf=null;function oE(){return pf||(pf=sE(lk,uk,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(jo)}catch(t){console.warn(t)}}}}).catch(r=>{throw vr.create("idb-open",{originalErrorMessage:r.message})})),pf}async function ck(r){try{const t=(await oE()).transaction(jo),i=await t.objectStore(jo).get(lE(r));return await t.done,i}catch(e){if(e instanceof ai)xi.warn(e.message);else{const t=vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(t.message)}}}async function Zy(r,e){try{const i=(await oE()).transaction(jo,"readwrite");await i.objectStore(jo).put(e,lE(r)),await i.done}catch(t){if(t instanceof ai)xi.warn(t.message);else{const i=vr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xi.warn(i.message)}}}function lE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=1024,dk=30;class fk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Xy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>dk){const u=mk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xy(),{heartbeatsToSend:i,unsentEntries:a}=pk(this._heartbeatsCache.heartbeats),l=Gu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xi.warn(t),""}}}function Xy(){return new Date().toISOString().substring(0,10)}function pk(r,e=hk){const t=[];let i=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Qy(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Qy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class gk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eE()?tE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ck(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Qy(r){return Gu(JSON.stringify({version:2,heartbeats:r})).length}function mk(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(r){ri(new Zn("platform-logger",e=>new D2(e),"PRIVATE")),ri(new Zn("heartbeat",e=>new fk(e),"PRIVATE")),On(Uf,Yy,r),On(Uf,Yy,"esm2017"),On("fire-js","")}vk("");var _k="firebase",yk="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On(_k,yk,"app");var Jy={};const eb="@firebase/database",tb="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uE="";function bk(r){uE=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),xt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ho(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ek(e)}}catch{}return new wk},Vr=cE("localStorage"),Sk=cE("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new gc("@firebase/database"),Tk=function(){let r=1;return function(){return r++}}(),hE=function(r){const e=a2(r),t=new n2;t.update(e);const i=t.digest();return cp.encodeByteArray(i)},nl=function(...r){let e="";for(let t=0;t<r.length;t++){const i=r[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=nl.apply(null,i):typeof i=="object"?e+=xt(i):e+=i,e+=" "}return e};let Mo=null,nb=!0;const Ck=function(r,e){Ee(!0,"Can't turn on custom loggers persistently."),ta.logLevel=ct.VERBOSE,Mo=ta.log.bind(ta)},Xt=function(...r){if(nb===!0&&(nb=!1,Mo===null&&Sk.get("logging_enabled")===!0&&Ck()),Mo){const e=nl.apply(null,r);Mo(e)}},il=function(r){return function(...e){Xt(r,...e)}},Gf=function(...r){const e="FIREBASE INTERNAL ERROR: "+nl(...r);ta.error(e)},Oi=function(...r){const e=`FIREBASE FATAL ERROR: ${nl(...r)}`;throw ta.error(e),new Error(e)},cn=function(...r){const e="FIREBASE WARNING: "+nl(...r);ta.warn(e)},Ak=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&cn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},dE=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},Rk=function(r){if(document.readyState==="complete")r();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ua="[MIN_NAME]",Kr="[MAX_NAME]",ya=function(r,e){if(r===e)return 0;if(r===ua||e===Kr)return-1;if(e===ua||r===Kr)return 1;{const t=ib(r),i=ib(e);return t!==null?i!==null?t-i===0?r.length-e.length:t-i:-1:i!==null?1:r<e?-1:1}},kk=function(r,e){return r===e?0:r<e?-1:1},Ro=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+xt(e))},mp=function(r){if(typeof r!="object"||r===null)return xt(r);const e=[];for(const i in r)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=xt(e[i]),t+=":",t+=mp(r[e[i]]);return t+="}",t},fE=function(r,e){const t=r.length;if(t<=e)return[r];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(r.substring(a,t)):i.push(r.substring(a,a+e));return i};function dn(r,e){for(const t in r)r.hasOwnProperty(t)&&e(t,r[t])}const pE=function(r){Ee(!dE(r),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,l,u,h,d;r===0?(l=0,u=0,a=1/r===-1/0?1:0):(a=r<0,r=Math.abs(r),r>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(r)/Math.LN2),i),l=h+i,u=Math.round(r*Math.pow(2,t-h)-Math.pow(2,t))):(l=0,u=Math.round(r/Math.pow(2,1-i-t))));const p=[];for(d=t;d;d-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(d=e;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);p.push(a?1:0),p.reverse();const m=p.join("");let v="";for(d=0;d<64;d+=8){let _=parseInt(m.substr(d,8),2).toString(16);_.length===1&&(_="0"+_),v=v+_}return v.toLowerCase()},Dk=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Nk=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ik(r,e){let t="Unknown Error";r==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?t="Client doesn't have permission to access the desired data.":r==="unavailable"&&(t="The service is unavailable");const i=new Error(r+" at "+e._path.toString()+": "+t);return i.code=r.toUpperCase(),i}const xk=new RegExp("^-?(0*)\\d{1,10}$"),Ok=-2147483648,Lk=2147483647,ib=function(r){if(xk.test(r)){const e=Number(r);if(e>=Ok&&e<=Lk)return e}return null},ba=function(r){try{r()}catch(e){setTimeout(()=>{const t=e.stack||"";throw cn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Mk=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Uo=function(r,e){const t=setTimeout(r,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,bn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){cn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Xt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cn(e)}}class Lu{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Lu.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="5",gE="v",mE="s",vE="r",_E="f",yE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bE="ls",EE="p",Bf="ac",wE="websocket",SE="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t,i,a,l=!1,u="",h=!1,d=!1,p=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=d,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Pk(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function CE(r,e,t){Ee(typeof e=="string","typeof type must == string"),Ee(typeof t=="object","typeof params must == object");let i;if(e===wE)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===SE)i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Pk(r)&&(t.ns=r.namespace);const a=[];return dn(t,(l,u)=>{a.push(l+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.counters_={}}incrementCounter(e,t=1){Ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return zR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf={},mf={};function _p(r){const e=r.toString();return gf[e]||(gf[e]=new Gk),gf[e]}function Bk(r,e){const t=r.toString();return mf[t]||(mf[t]=e()),mf[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&ba(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="start",Hk="close",jk="pLPCommand",qk="pRTLPCB",AE="id",RE="pw",kE="ser",Vk="cb",Wk="seg",$k="ts",Yk="d",Kk="dframe",DE=1870,NE=30,Zk=DE-NE,Xk=25e3,Qk=3e4;class Js{constructor(e,t,i,a,l,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=il(e),this.stats_=_p(t),this.urlFn=d=>(this.appCheckToken&&(d[Bf]=this.appCheckToken),CE(t,SE,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Fk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Qk)),Rk(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yp((...l)=>{const[u,h,d,p,m]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===rb)this.id=h,this.password=d;else if(u===Hk)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[rb]="t",i[kE]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Vk]=this.scriptTagHolder.uniqueCallbackIdentifier),i[gE]=vp,this.transportSessionId&&(i[mE]=this.transportSessionId),this.lastSessionId&&(i[bE]=this.lastSessionId),this.applicationId&&(i[EE]=this.applicationId),this.appCheckToken&&(i[Bf]=this.appCheckToken),typeof location<"u"&&location.hostname&&yE.test(location.hostname)&&(i[vE]=_E);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Js.forceAllow_=!0}static forceDisallow(){Js.forceDisallow_=!0}static isAvailable(){return Js.forceAllow_?!0:!Js.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Dk()&&!Nk()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=V0(t),a=fE(i,Zk);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[Kk]="t",i[AE]=e,i[RE]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=xt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class yp{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Tk(),window[jk+this.uniqueCallbackIdentifier]=e,window[qk+this.uniqueCallbackIdentifier]=t,this.myIFrame=yp.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Xt("frame writing exception"),h.stack&&Xt(h.stack),Xt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[AE]=this.myID,e[RE]=this.myPW,e[kE]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+NE+i.length<=DE;){const u=this.pendingSegs.shift();i=i+"&"+Wk+a+"="+u.seg+"&"+$k+a+"="+u.ts+"&"+Yk+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(Xk)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Xt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=16384,eD=45e3;let ju=null;typeof MozWebSocket<"u"?ju=MozWebSocket:typeof WebSocket<"u"&&(ju=WebSocket);class qn{constructor(e,t,i,a,l,u,h){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=il(this.connId),this.stats_=_p(t),this.connURL=qn.connectionURL_(t,u,h,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,l){const u={};return u[gE]=vp,typeof location<"u"&&location.hostname&&yE.test(location.hostname)&&(u[vE]=_E),t&&(u[mE]=t),i&&(u[bE]=i),a&&(u[Bf]=a),l&&(u[EE]=l),CE(e,wE,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vr.set("previous_websocket_failure",!0);try{let i;KR(),this.mySock=new ju(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){qn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&ju!==null&&!qn.forceDisallow_}static previouslyFailed(){return Vr.isInMemoryStorage||Vr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Ho(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ee(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=fE(t,Jk);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(eD))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}qn.responsesRequiredToBeHealthy=2;qn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static get ALL_TRANSPORTS(){return[Js,qn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=qn&&qn.isAvailable();let i=t&&!qn.previouslyFailed();if(e.webSocketOnly&&(t||cn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qn];else{const a=this.transports_=[];for(const l of qo.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);qo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}qo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=6e4,nD=5e3,iD=10*1024,rD=100*1024,vf="t",sb="d",sD="s",ab="r",aD="e",ob="o",lb="a",ub="n",cb="p",oD="h";class lD{constructor(e,t,i,a,l,u,h,d,p,m){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=il("c:"+this.id+":"),this.transportManager_=new qo(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Uo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>rD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>iD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(vf in e){const t=e[vf];t===lb?this.upgradeIfSecondaryHealthy_():t===ab?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===ob&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ro("t",e),i=Ro("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:cb,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:lb,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ub,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ro("t",e),i=Ro("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ro(vf,e);if(sb in e){const i=e[sb];if(t===oD){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===ub){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===sD?this.onConnectionShutdown_(i):t===ab?this.onReset_(i):t===aD?Gf("Server Error: "+i):t===ob?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gf("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),vp!==i&&cn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Uo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(tD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Uo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(nD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:cb,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.allowedEvents_=e,this.listeners_={},Ee(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){Ee(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends xE{static getInstance(){return new qu}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!dp()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Ee(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=32,db=768;class gt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function nt(){return new gt("")}function Ye(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function Er(r){return r.pieces_.length-r.pieceNum_}function vt(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new gt(r.pieces_,e)}function OE(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function uD(r){let e="";for(let t=r.pieceNum_;t<r.pieces_.length;t++)r.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[t])));return e||"/"}function LE(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function ME(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let t=r.pieceNum_;t<r.pieces_.length-1;t++)e.push(r.pieces_[t]);return new gt(e,0)}function Ot(r,e){const t=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)t.push(r.pieces_[i]);if(e instanceof gt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new gt(t,0)}function Qe(r){return r.pieceNum_>=r.pieces_.length}function tn(r,e){const t=Ye(r),i=Ye(e);if(t===null)return e;if(t===i)return tn(vt(r),vt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function bp(r,e){if(Er(r)!==Er(e))return!1;for(let t=r.pieceNum_,i=e.pieceNum_;t<=r.pieces_.length;t++,i++)if(r.pieces_[t]!==e.pieces_[i])return!1;return!0}function Vn(r,e){let t=r.pieceNum_,i=e.pieceNum_;if(Er(r)>Er(e))return!1;for(;t<r.pieces_.length;){if(r.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class cD{constructor(e,t){this.errorPrefix_=t,this.parts_=LE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=pc(this.parts_[i]);UE(this)}}function hD(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=pc(e),UE(r)}function dD(r){const e=r.parts_.pop();r.byteLength_-=pc(e),r.parts_.length>0&&(r.byteLength_-=1)}function UE(r){if(r.byteLength_>db)throw new Error(r.errorPrefix_+"has a key path longer than "+db+" bytes ("+r.byteLength_+").");if(r.parts_.length>hb)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hb+") or object contains a cycle "+qr(r))}function qr(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends xE{static getInstance(){return new Ep}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return Ee(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=1e3,fD=60*5*1e3,fb=30*1e3,pD=1.3,gD=3e4,mD="server_kill",pb=3;class Ni extends IE{constructor(e,t,i,a,l,u,h,d){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=d,this.id=Ni.nextPersistentConnectionId_++,this.log_=il("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ko,this.maxReconnectDelay_=fD,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ep.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&qu.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(xt(l)),Ee(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new fc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,a){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ee(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(l,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,h=>{const d=h.d,p=h.s;Ni.warnOnListenWarnings_(d,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(p,d))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Ui(e,"w")){const i=la(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();cn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||t2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fb)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=e2(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const l=a.s,u=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),Ee(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";a&&(l.q=i,l.t=a),this.sendRequest(u,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,l){this.initConnection_();const u={p:t,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+xt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Gf("Unrecognized action received from server: "+xt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ee(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ko,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ko,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>gD&&(this.reconnectDelay_=ko),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*pD)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Ni.nextConnectionId_++,l=this.lastSessionId;let u=!1,h=null;const d=function(){h?h.close():(u=!0,i())},p=function(v){Ee(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:d,sendRequest:p};const m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,_]=await Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);u?Xt("getToken() completed but was canceled"):(Xt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=_&&_.token,h=new lD(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,y=>{cn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(mD)},l))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&cn(v),d())}}}interrupt(e){Xt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Of(this.interruptReasons_)&&(this.reconnectDelay_=ko,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>mp(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new gt(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){Xt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=pb&&(this.reconnectDelay_=fb,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Xt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=pb&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+uE.replace(/\./g,"-")]=1,dp()?e["framework.cordova"]=1:J0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=qu.getInstance().currentlyOnline();return Of(this.interruptReasons_)&&e}}Ni.nextPersistentConnectionId_=0;Ni.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ke(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ke(ua,e),a=new Ke(ua,t);return this.compare(i,a)!==0}minPost(){return Ke.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu;class zE extends mc{static get __EMPTY_NODE(){return Nu}static set __EMPTY_NODE(e){Nu=e}compare(e,t){return ya(e.name,t.name)}isDefinedOn(e){throw ga("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ke.MIN}maxPost(){return new Ke(Kr,Nu)}makePost(e,t){return Ee(typeof e=="string","KeyIndex indexValue must always be a string."),new Ke(e,Nu)}toString(){return".key"}}const na=new zE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,t,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Gt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Gt.RED,this.left=a??un.EMPTY_NODE,this.right=l??un.EMPTY_NODE}copy(e,t,i,a,l){return new Gt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return un.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Gt.RED=!0;Gt.BLACK=!1;class vD{copy(e,t,i,a,l){return this}insert(e,t,i){return new Gt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class un{constructor(e,t=un.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new un(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Gt.BLACK,null,null))}remove(e){return new un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Iu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Iu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Iu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Iu(this.root_,null,this.comparator_,!0,e)}}un.EMPTY_NODE=new vD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(r,e){return ya(r.name,e.name)}function wp(r,e){return ya(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff;function yD(r){Ff=r}const PE=function(r){return typeof r=="number"?"number:"+pE(r):"string:"+r},GE=function(r){if(r.isLeafNode()){const e=r.val();Ee(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ui(e,".sv"),"Priority must be a string or number.")}else Ee(r===Ff||r.isEmpty(),"priority of unexpected type.");Ee(r===Ff||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gb;class Pt{static set __childrenNodeConstructor(e){gb=e}static get __childrenNodeConstructor(){return gb}constructor(e,t=Pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Ee(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),GE(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Qe(e)?this:Ye(e)===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ye(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(Ee(i!==".priority"||Er(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(vt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+PE(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=pE(this.value_):e+=this.value_,this.lazyHash_=hE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pt.__childrenNodeConstructor?-1:(Ee(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=Pt.VALUE_TYPE_ORDER.indexOf(t),l=Pt.VALUE_TYPE_ORDER.indexOf(i);return Ee(a>=0,"Unknown leaf type: "+t),Ee(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BE,FE;function bD(r){BE=r}function ED(r){FE=r}class wD extends mc{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),l=i.compareTo(a);return l===0?ya(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ke.MIN}maxPost(){return new Ke(Kr,new Pt("[PRIORITY-POST]",FE))}makePost(e,t){const i=BE(e);return new Ke(t,new Pt("[PRIORITY-POST]",i))}toString(){return".priority"}}const Tt=new wD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=Math.log(2);class TD{constructor(e){const t=l=>parseInt(Math.log(l)/SD,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Vu=function(r,e,t,i){r.sort(e);const a=function(d,p){const m=p-d;let v,_;if(m===0)return null;if(m===1)return v=r[d],_=t?t(v):v,new Gt(_,v.node,Gt.BLACK,null,null);{const y=parseInt(m/2,10)+d,S=a(d,y),E=a(y+1,p);return v=r[y],_=t?t(v):v,new Gt(_,v.node,Gt.BLACK,S,E)}},l=function(d){let p=null,m=null,v=r.length;const _=function(S,E){const C=v-S,A=v;v-=S;const k=a(C+1,A),O=r[C],N=t?t(O):O;y(new Gt(N,O.node,E,null,k))},y=function(S){p?(p.left=S,p=S):(m=S,p=S)};for(let S=0;S<d.count;++S){const E=d.nextBitIsOne(),C=Math.pow(2,d.count-(S+1));E?_(C,Gt.BLACK):(_(C,Gt.BLACK),_(C,Gt.RED))}return m},u=new TD(r.length),h=l(u);return new un(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f;const Ks={};class Ai{static get Default(){return Ee(Ks&&Tt,"ChildrenNode.ts has not been loaded"),_f=_f||new Ai({".priority":Ks},{".priority":Tt}),_f}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=la(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof un?t:null}hasIndex(e){return Ui(this.indexSet_,e.toString())}addIndex(e,t){Ee(e!==na,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=t.getIterator(Ke.Wrap);let u=l.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let h;a?h=Vu(i,e.getCompare()):h=Ks;const d=e.toString(),p=Object.assign({},this.indexSet_);p[d]=e;const m=Object.assign({},this.indexes_);return m[d]=h,new Ai(m,p)}addToIndexes(e,t){const i=Fu(this.indexes_,(a,l)=>{const u=la(this.indexSet_,l);if(Ee(u,"Missing index implementation for "+l),a===Ks)if(u.isDefinedOn(e.node)){const h=[],d=t.getIterator(Ke.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&h.push(p),p=d.getNext();return h.push(e),Vu(h,u.getCompare())}else return Ks;else{const h=t.get(e.name);let d=a;return h&&(d=d.remove(new Ke(e.name,h))),d.insert(e,e.node)}});return new Ai(i,this.indexSet_)}removeFromIndexes(e,t){const i=Fu(this.indexes_,a=>{if(a===Ks)return a;{const l=t.get(e.name);return l?a.remove(new Ke(e.name,l)):a}});return new Ai(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do;class ze{static get EMPTY_NODE(){return Do||(Do=new ze(new un(wp),null,Ai.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&GE(this.priorityNode_),this.children_.isEmpty()&&Ee(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Do}updatePriority(e){return this.children_.isEmpty()?this:new ze(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Do:t}}getChild(e){const t=Ye(e);return t===null?this:this.getImmediateChild(t).getChild(vt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(Ee(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ke(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?Do:this.priorityNode_;return new ze(a,u,l)}}updateChild(e,t){const i=Ye(e);if(i===null)return t;{Ee(Ye(e)!==".priority"||Er(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(vt(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,l=!0;if(this.forEachChild(Tt,(u,h)=>{t[u]=h.val(e),i++,l&&ze.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!e&&l&&a<2*i){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+PE(this.getPriority().val())+":"),this.forEachChild(Tt,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":hE(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Ke(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ke(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ke(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Ke.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Ke.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rl?-1:0}withIndex(e){if(e===na||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new ze(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===na||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Tt),a=t.getIterator(Tt);let l=i.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===na?null:this.indexMap_.get(e.toString())}}ze.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class CD extends ze{constructor(){super(new un(wp),ze.EMPTY_NODE,Ai.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ze.EMPTY_NODE}isEmpty(){return!1}}const rl=new CD;Object.defineProperties(Ke,{MIN:{value:new Ke(ua,ze.EMPTY_NODE)},MAX:{value:new Ke(Kr,rl)}});zE.__EMPTY_NODE=ze.EMPTY_NODE;Pt.__childrenNodeConstructor=ze;yD(rl);ED(rl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=!0;function Bt(r,e=null){if(r===null)return ze.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),Ee(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const t=r;return new Pt(t,Bt(e))}if(!(r instanceof Array)&&AD){const t=[];let i=!1;if(dn(r,(u,h)=>{if(u.substring(0,1)!=="."){const d=Bt(h);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),t.push(new Ke(u,d)))}}),t.length===0)return ze.EMPTY_NODE;const l=Vu(t,_D,u=>u.name,wp);if(i){const u=Vu(t,Tt.getCompare());return new ze(l,Bt(e),new Ai({".priority":u},{".priority":Tt}))}else return new ze(l,Bt(e),Ai.Default)}else{let t=ze.EMPTY_NODE;return dn(r,(i,a)=>{if(Ui(r,i)&&i.substring(0,1)!=="."){const l=Bt(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(Bt(e))}}bD(Bt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD extends mc{constructor(e){super(),this.indexPath_=e,Ee(!Qe(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),l=i.compareTo(a);return l===0?ya(e.name,t.name):l}makePost(e,t){const i=Bt(e),a=ze.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ke(t,a)}maxPost(){const e=ze.EMPTY_NODE.updateChild(this.indexPath_,rl);return new Ke(Kr,e)}toString(){return LE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD extends mc{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ya(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ke.MIN}maxPost(){return Ke.MAX}makePost(e,t){const i=Bt(e);return new Ke(t,i)}toString(){return".value"}}const DD=new kD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(r){return{type:"value",snapshotNode:r}}function ca(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Vo(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Wo(r,e,t){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:t}}function ND(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.index_=e}updateChild(e,t,i,a,l,u){Ee(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Vo(t,h)):Ee(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(ca(t,i)):u.trackChildChange(Wo(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Tt,(a,l)=>{t.hasChild(a)||i.trackChildChange(Vo(a,l))}),t.isLeafNode()||t.forEachChild(Tt,(a,l)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(l)||i.trackChildChange(Wo(a,l,u))}else i.trackChildChange(ca(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ze.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.indexedFilter_=new Sp(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$o.getStartPost_(e),this.endPost_=$o.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,l,u){return this.matches(new Ke(t,i))||(i=ze.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,l,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=ze.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(ze.EMPTY_NODE);const l=this;return t.forEachChild(Tt,(u,h)=>{l.matches(new Ke(u,h))||(a=a.updateImmediateChild(u,ze.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new $o(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,l,u){return this.rangedFilter_.matches(new Ke(t,i))||(i=ze.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,l,u):this.fullLimitUpdateChild_(e,t,i,l,u)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=ze.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=ze.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(ze.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let u=0;for(;l.hasNext();){const h=l.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:a=a.updateImmediateChild(h.name,ze.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,l){let u;if(this.reverse_){const v=this.index_.getCompare();u=(_,y)=>v(y,_)}else u=this.index_.getCompare();const h=e;Ee(h.numChildren()===this.limit_,"");const d=new Ke(t,i),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),m=this.rangedFilter_.matches(d);if(h.hasChild(t)){const v=h.getImmediateChild(t);let _=a.getChildAfterChild(this.index_,p,this.reverse_);for(;_!=null&&(_.name===t||h.hasChild(_.name));)_=a.getChildAfterChild(this.index_,_,this.reverse_);const y=_==null?1:u(_,d);if(m&&!i.isEmpty()&&y>=0)return l!=null&&l.trackChildChange(Wo(t,i,v)),h.updateImmediateChild(t,i);{l!=null&&l.trackChildChange(Vo(t,v));const E=h.updateImmediateChild(t,ze.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(l!=null&&l.trackChildChange(ca(_.name,_.node)),E.updateImmediateChild(_.name,_.node)):E}}else return i.isEmpty()?e:m&&u(p,d)>=0?(l!=null&&(l.trackChildChange(Vo(p.name,p.node)),l.trackChildChange(ca(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(p.name,ze.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ee(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ee(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ua}hasEnd(){return this.endSet_}getIndexEndValue(){return Ee(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ee(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ee(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tt}copy(){const e=new Tp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xD(r){return r.loadsAllData()?new Sp(r.getIndex()):r.hasLimit()?new ID(r):new $o(r)}function mb(r){const e={};if(r.isDefault())return e;let t;if(r.index_===Tt?t="$priority":r.index_===DD?t="$value":r.index_===na?t="$key":(Ee(r.index_ instanceof RD,"Unrecognized index type!"),t=r.index_.toString()),e.orderBy=xt(t),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";e[i]=xt(r.indexStartValue_),r.startNameSet_&&(e[i]+=","+xt(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";e[i]=xt(r.indexEndValue_),r.endNameSet_&&(e[i]+=","+xt(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function vb(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let t=r.viewFrom_;t===""&&(r.isViewFromLeft()?t="l":t="r"),e.vf=t}return r.index_!==Tt&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends IE{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Ee(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=il("p:rest:"),this.listens_={}}listen(e,t,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=Wu.getListenId_(e,i),h={};this.listens_[u]=h;const d=mb(e._queryParams);this.restRequest_(l+".json",d,(p,m)=>{let v=m;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(l,v,!1,i),la(this.listens_,u)===h){let _;p?p===401?_="permission_denied":_="rest_error:"+p:_="ok",a(_,null)}})}unlisten(e,t){const i=Wu.getListenId_(e,t);delete this.listens_[i]}get(e){const t=mb(e._queryParams),i=e._path.toString(),a=new fc;return this.restRequest_(i+".json",t,(l,u)=>{let h=u;l===404&&(h=null,l=null),l===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+va(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let d=null;if(h.status>=200&&h.status<300){try{d=Ho(h.responseText)}catch{cn("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,d)}else h.status!==401&&h.status!==404&&cn("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.rootNode_=ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(){return{value:null,children:new Map}}function jE(r,e,t){if(Qe(e))r.value=t,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,t);else{const i=Ye(e);r.children.has(i)||r.children.set(i,$u());const a=r.children.get(i);e=vt(e),jE(a,e,t)}}function Hf(r,e,t){r.value!==null?t(e,r.value):LD(r,(i,a)=>{const l=new gt(e.toString()+"/"+i);Hf(a,l,t)})}function LD(r,e){r.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&dn(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=10*1e3,UD=30*1e3,zD=5*60*1e3;class PD{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new MD(e);const i=_b+(UD-_b)*Math.random();Uo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;dn(e,(a,l)=>{l>0&&Ui(this.statsToReport_,a)&&(t[a]=l,i=!0)}),i&&this.server_.reportStats(t),Uo(this.reportStats_.bind(this),Math.floor(Math.random()*2*zD))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Wn||(Wn={}));function qE(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Cp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ap(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Wn.ACK_USER_WRITE,this.source=qE()}operationForChild(e){if(Qe(this.path)){if(this.affectedTree.value!=null)return Ee(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new gt(e));return new Yu(nt(),t,this.revert)}}else return Ee(Ye(this.path)===e,"operationForChild called for unrelated child."),new Yu(vt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.source=e,this.path=t,this.type=Wn.LISTEN_COMPLETE}operationForChild(e){return Qe(this.path)?new Yo(this.source,nt()):new Yo(this.source,vt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Wn.OVERWRITE}operationForChild(e){return Qe(this.path)?new Zr(this.source,nt(),this.snap.getImmediateChild(e)):new Zr(this.source,vt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Wn.MERGE}operationForChild(e){if(Qe(this.path)){const t=this.children.subtree(new gt(e));return t.isEmpty()?null:t.value?new Zr(this.source,nt(),t.value):new Ko(this.source,nt(),t)}else return Ee(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ko(this.source,vt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Qe(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ye(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function BD(r,e,t,i){const a=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&r.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(ND(u.childName,u.snapshotNode))}),No(r,a,"child_removed",e,i,t),No(r,a,"child_added",e,i,t),No(r,a,"child_moved",l,i,t),No(r,a,"child_changed",e,i,t),No(r,a,"value",e,i,t),a}function No(r,e,t,i,a,l){const u=i.filter(h=>h.type===t);u.sort((h,d)=>HD(r,h,d)),u.forEach(h=>{const d=FD(r,h,l);a.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(d,r.query_))})})}function FD(r,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function HD(r,e,t){if(e.childName==null||t.childName==null)throw ga("Should only compare child_ events.");const i=new Ke(e.childName,e.snapshotNode),a=new Ke(t.childName,t.snapshotNode);return r.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(r,e){return{eventCache:r,serverCache:e}}function zo(r,e,t,i){return vc(new wr(e,t,i),r.serverCache)}function VE(r,e,t,i){return vc(r.eventCache,new wr(e,t,i))}function Ku(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Xr(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf;const jD=()=>(yf||(yf=new un(kk)),yf);class _t{static fromObject(e){let t=new _t(null);return dn(e,(i,a)=>{t=t.set(new gt(i),a)}),t}constructor(e,t=jD()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:nt(),value:this.value};if(Qe(e))return null;{const i=Ye(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(vt(e),t);return l!=null?{path:Ot(new gt(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Qe(e))return this;{const t=Ye(e),i=this.children.get(t);return i!==null?i.subtree(vt(e)):new _t(null)}}set(e,t){if(Qe(e))return new _t(t,this.children);{const i=Ye(e),l=(this.children.get(i)||new _t(null)).set(vt(e),t),u=this.children.insert(i,l);return new _t(this.value,u)}}remove(e){if(Qe(e))return this.children.isEmpty()?new _t(null):new _t(null,this.children);{const t=Ye(e),i=this.children.get(t);if(i){const a=i.remove(vt(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new _t(null):new _t(this.value,l)}else return this}}get(e){if(Qe(e))return this.value;{const t=Ye(e),i=this.children.get(t);return i?i.get(vt(e)):null}}setTree(e,t){if(Qe(e))return t;{const i=Ye(e),l=(this.children.get(i)||new _t(null)).setTree(vt(e),t);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new _t(this.value,u)}}fold(e){return this.fold_(nt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(Ot(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,nt(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(Qe(e))return null;{const l=Ye(e),u=this.children.get(l);return u?u.findOnPath_(vt(e),Ot(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nt(),t)}foreachOnPath_(e,t,i){if(Qe(e))return this;{this.value&&i(t,this.value);const a=Ye(e),l=this.children.get(a);return l?l.foreachOnPath_(vt(e),Ot(t,a),i):new _t(null)}}foreach(e){this.foreach_(nt(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(Ot(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.writeTree_=e}static empty(){return new Yn(new _t(null))}}function Po(r,e,t){if(Qe(e))return new Yn(new _t(t));{const i=r.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const u=tn(a,e);return l=l.updateChild(u,t),new Yn(r.writeTree_.set(a,l))}else{const a=new _t(t),l=r.writeTree_.setTree(e,a);return new Yn(l)}}}function yb(r,e,t){let i=r;return dn(t,(a,l)=>{i=Po(i,Ot(e,a),l)}),i}function bb(r,e){if(Qe(e))return Yn.empty();{const t=r.writeTree_.setTree(e,new _t(null));return new Yn(t)}}function jf(r,e){return rs(r,e)!=null}function rs(r,e){const t=r.writeTree_.findRootMostValueAndPath(e);return t!=null?r.writeTree_.get(t.path).getChild(tn(t.path,e)):null}function Eb(r){const e=[],t=r.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Tt,(i,a)=>{e.push(new Ke(i,a))}):r.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Ke(i,a.value))}),e}function _r(r,e){if(Qe(e))return r;{const t=rs(r,e);return t!=null?new Yn(new _t(t)):new Yn(r.writeTree_.subtree(e))}}function qf(r){return r.writeTree_.isEmpty()}function ha(r,e){return WE(nt(),r.writeTree_,e)}function WE(r,e,t){if(e.value!=null)return t.updateChild(r,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(Ee(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=WE(Ot(r,a),l,t)}),!t.getChild(r).isEmpty()&&i!==null&&(t=t.updateChild(Ot(r,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(r,e){return ZE(e,r)}function qD(r,e,t,i,a){Ee(i>r.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),r.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(r.visibleWrites=Po(r.visibleWrites,e,t)),r.lastWriteId=i}function VD(r,e){for(let t=0;t<r.allWrites.length;t++){const i=r.allWrites[t];if(i.writeId===e)return i}return null}function WD(r,e){const t=r.allWrites.findIndex(h=>h.writeId===e);Ee(t>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[t];r.allWrites.splice(t,1);let a=i.visible,l=!1,u=r.allWrites.length-1;for(;a&&u>=0;){const h=r.allWrites[u];h.visible&&(u>=t&&$D(h,i.path)?a=!1:Vn(i.path,h.path)&&(l=!0)),u--}if(a){if(l)return YD(r),!0;if(i.snap)r.visibleWrites=bb(r.visibleWrites,i.path);else{const h=i.children;dn(h,d=>{r.visibleWrites=bb(r.visibleWrites,Ot(i.path,d))})}return!0}else return!1}function $D(r,e){if(r.snap)return Vn(r.path,e);for(const t in r.children)if(r.children.hasOwnProperty(t)&&Vn(Ot(r.path,t),e))return!0;return!1}function YD(r){r.visibleWrites=$E(r.allWrites,KD,nt()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function KD(r){return r.visible}function $E(r,e,t){let i=Yn.empty();for(let a=0;a<r.length;++a){const l=r[a];if(e(l)){const u=l.path;let h;if(l.snap)Vn(t,u)?(h=tn(t,u),i=Po(i,h,l.snap)):Vn(u,t)&&(h=tn(u,t),i=Po(i,nt(),l.snap.getChild(h)));else if(l.children){if(Vn(t,u))h=tn(t,u),i=yb(i,h,l.children);else if(Vn(u,t))if(h=tn(u,t),Qe(h))i=yb(i,nt(),l.children);else{const d=la(l.children,Ye(h));if(d){const p=d.getChild(vt(h));i=Po(i,nt(),p)}}}else throw ga("WriteRecord should have .snap or .children")}}return i}function YE(r,e,t,i,a){if(!i&&!a){const l=rs(r.visibleWrites,e);if(l!=null)return l;{const u=_r(r.visibleWrites,e);if(qf(u))return t;if(t==null&&!jf(u,nt()))return null;{const h=t||ze.EMPTY_NODE;return ha(u,h)}}}else{const l=_r(r.visibleWrites,e);if(!a&&qf(l))return t;if(!a&&t==null&&!jf(l,nt()))return null;{const u=function(p){return(p.visible||a)&&(!i||!~i.indexOf(p.writeId))&&(Vn(p.path,e)||Vn(e,p.path))},h=$E(r.allWrites,u,e),d=t||ze.EMPTY_NODE;return ha(h,d)}}}function ZD(r,e,t){let i=ze.EMPTY_NODE;const a=rs(r.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Tt,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=_r(r.visibleWrites,e);return t.forEachChild(Tt,(u,h)=>{const d=ha(_r(l,new gt(u)),h);i=i.updateImmediateChild(u,d)}),Eb(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=_r(r.visibleWrites,e);return Eb(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function XD(r,e,t,i,a){Ee(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=Ot(e,t);if(jf(r.visibleWrites,l))return null;{const u=_r(r.visibleWrites,l);return qf(u)?a.getChild(t):ha(u,a.getChild(t))}}function QD(r,e,t,i){const a=Ot(e,t),l=rs(r.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(t)){const u=_r(r.visibleWrites,a);return ha(u,i.getNode().getImmediateChild(t))}else return null}function JD(r,e){return rs(r.visibleWrites,e)}function eN(r,e,t,i,a,l,u){let h;const d=_r(r.visibleWrites,e),p=rs(d,nt());if(p!=null)h=p;else if(t!=null)h=ha(d,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const m=[],v=u.getCompare(),_=l?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let y=_.getNext();for(;y&&m.length<a;)v(y,i)!==0&&m.push(y),y=_.getNext();return m}else return[]}function tN(){return{visibleWrites:Yn.empty(),allWrites:[],lastWriteId:-1}}function Zu(r,e,t,i){return YE(r.writeTree,r.treePath,e,t,i)}function Rp(r,e){return ZD(r.writeTree,r.treePath,e)}function wb(r,e,t,i){return XD(r.writeTree,r.treePath,e,t,i)}function Xu(r,e){return JD(r.writeTree,Ot(r.treePath,e))}function nN(r,e,t,i,a,l){return eN(r.writeTree,r.treePath,e,t,i,a,l)}function kp(r,e,t){return QD(r.writeTree,r.treePath,e,t)}function KE(r,e){return ZE(Ot(r.treePath,e),r.writeTree)}function ZE(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;Ee(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Ee(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,Wo(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,Vo(i,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,ca(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,Wo(i,e.snapshotNode,a.oldSnap));else throw ga("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const XE=new rN;class Dp{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new wr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kp(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Xr(this.viewCache_),l=nN(this.writes_,a,t,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(r){return{filter:r}}function aN(r,e){Ee(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),Ee(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function oN(r,e,t,i,a){const l=new iN;let u,h;if(t.type===Wn.OVERWRITE){const p=t;p.source.fromUser?u=Vf(r,e,p.path,p.snap,i,a,l):(Ee(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!Qe(p.path),u=Qu(r,e,p.path,p.snap,i,a,h,l))}else if(t.type===Wn.MERGE){const p=t;p.source.fromUser?u=uN(r,e,p.path,p.children,i,a,l):(Ee(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),u=Wf(r,e,p.path,p.children,i,a,h,l))}else if(t.type===Wn.ACK_USER_WRITE){const p=t;p.revert?u=dN(r,e,p.path,i,a,l):u=cN(r,e,p.path,p.affectedTree,i,a,l)}else if(t.type===Wn.LISTEN_COMPLETE)u=hN(r,e,t.path,i,l);else throw ga("Unknown operation type: "+t.type);const d=l.getChanges();return lN(e,u,d),{viewCache:u,changes:d}}function lN(r,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=Ku(r);(t.length>0||!r.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(HE(Ku(e)))}}function QE(r,e,t,i,a,l){const u=e.eventCache;if(Xu(i,t)!=null)return e;{let h,d;if(Qe(t))if(Ee(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Xr(e),m=p instanceof ze?p:ze.EMPTY_NODE,v=Rp(i,m);h=r.filter.updateFullNode(e.eventCache.getNode(),v,l)}else{const p=Zu(i,Xr(e));h=r.filter.updateFullNode(e.eventCache.getNode(),p,l)}else{const p=Ye(t);if(p===".priority"){Ee(Er(t)===1,"Can't have a priority with additional path components");const m=u.getNode();d=e.serverCache.getNode();const v=wb(i,t,m,d);v!=null?h=r.filter.updatePriority(m,v):h=u.getNode()}else{const m=vt(t);let v;if(u.isCompleteForChild(p)){d=e.serverCache.getNode();const _=wb(i,t,u.getNode(),d);_!=null?v=u.getNode().getImmediateChild(p).updateChild(m,_):v=u.getNode().getImmediateChild(p)}else v=kp(i,p,e.serverCache);v!=null?h=r.filter.updateChild(u.getNode(),p,v,m,a,l):h=u.getNode()}}return zo(e,h,u.isFullyInitialized()||Qe(t),r.filter.filtersNodes())}}function Qu(r,e,t,i,a,l,u,h){const d=e.serverCache;let p;const m=u?r.filter:r.filter.getIndexedFilter();if(Qe(t))p=m.updateFullNode(d.getNode(),i,null);else if(m.filtersNodes()&&!d.isFiltered()){const y=d.getNode().updateChild(t,i);p=m.updateFullNode(d.getNode(),y,null)}else{const y=Ye(t);if(!d.isCompleteForPath(t)&&Er(t)>1)return e;const S=vt(t),C=d.getNode().getImmediateChild(y).updateChild(S,i);y===".priority"?p=m.updatePriority(d.getNode(),C):p=m.updateChild(d.getNode(),y,C,S,XE,null)}const v=VE(e,p,d.isFullyInitialized()||Qe(t),m.filtersNodes()),_=new Dp(a,v,l);return QE(r,v,t,a,_,h)}function Vf(r,e,t,i,a,l,u){const h=e.eventCache;let d,p;const m=new Dp(a,e,l);if(Qe(t))p=r.filter.updateFullNode(e.eventCache.getNode(),i,u),d=zo(e,p,!0,r.filter.filtersNodes());else{const v=Ye(t);if(v===".priority")p=r.filter.updatePriority(e.eventCache.getNode(),i),d=zo(e,p,h.isFullyInitialized(),h.isFiltered());else{const _=vt(t),y=h.getNode().getImmediateChild(v);let S;if(Qe(_))S=i;else{const E=m.getCompleteChild(v);E!=null?OE(_)===".priority"&&E.getChild(ME(_)).isEmpty()?S=E:S=E.updateChild(_,i):S=ze.EMPTY_NODE}if(y.equals(S))d=e;else{const E=r.filter.updateChild(h.getNode(),v,S,_,m,u);d=zo(e,E,h.isFullyInitialized(),r.filter.filtersNodes())}}}return d}function Sb(r,e){return r.eventCache.isCompleteForChild(e)}function uN(r,e,t,i,a,l,u){let h=e;return i.foreach((d,p)=>{const m=Ot(t,d);Sb(e,Ye(m))&&(h=Vf(r,h,m,p,a,l,u))}),i.foreach((d,p)=>{const m=Ot(t,d);Sb(e,Ye(m))||(h=Vf(r,h,m,p,a,l,u))}),h}function Tb(r,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function Wf(r,e,t,i,a,l,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let d=e,p;Qe(t)?p=i:p=new _t(null).setTree(t,i);const m=e.serverCache.getNode();return p.children.inorderTraversal((v,_)=>{if(m.hasChild(v)){const y=e.serverCache.getNode().getImmediateChild(v),S=Tb(r,y,_);d=Qu(r,d,new gt(v),S,a,l,u,h)}}),p.children.inorderTraversal((v,_)=>{const y=!e.serverCache.isCompleteForChild(v)&&_.value===null;if(!m.hasChild(v)&&!y){const S=e.serverCache.getNode().getImmediateChild(v),E=Tb(r,S,_);d=Qu(r,d,new gt(v),E,a,l,u,h)}}),d}function cN(r,e,t,i,a,l,u){if(Xu(a,t)!=null)return e;const h=e.serverCache.isFiltered(),d=e.serverCache;if(i.value!=null){if(Qe(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Qu(r,e,t,d.getNode().getChild(t),a,l,h,u);if(Qe(t)){let p=new _t(null);return d.getNode().forEachChild(na,(m,v)=>{p=p.set(new gt(m),v)}),Wf(r,e,t,p,a,l,h,u)}else return e}else{let p=new _t(null);return i.foreach((m,v)=>{const _=Ot(t,m);d.isCompleteForPath(_)&&(p=p.set(m,d.getNode().getChild(_)))}),Wf(r,e,t,p,a,l,h,u)}}function hN(r,e,t,i,a){const l=e.serverCache,u=VE(e,l.getNode(),l.isFullyInitialized()||Qe(t),l.isFiltered());return QE(r,u,t,i,XE,a)}function dN(r,e,t,i,a,l){let u;if(Xu(i,t)!=null)return e;{const h=new Dp(i,e,a),d=e.eventCache.getNode();let p;if(Qe(t)||Ye(t)===".priority"){let m;if(e.serverCache.isFullyInitialized())m=Zu(i,Xr(e));else{const v=e.serverCache.getNode();Ee(v instanceof ze,"serverChildren would be complete if leaf node"),m=Rp(i,v)}m=m,p=r.filter.updateFullNode(d,m,l)}else{const m=Ye(t);let v=kp(i,m,e.serverCache);v==null&&e.serverCache.isCompleteForChild(m)&&(v=d.getImmediateChild(m)),v!=null?p=r.filter.updateChild(d,m,v,vt(t),h,l):e.eventCache.getNode().hasChild(m)?p=r.filter.updateChild(d,m,ze.EMPTY_NODE,vt(t),h,l):p=d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Zu(i,Xr(e)),u.isLeafNode()&&(p=r.filter.updateFullNode(p,u,l)))}return u=e.serverCache.isFullyInitialized()||Xu(i,nt())!=null,zo(e,p,u,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new Sp(i.getIndex()),l=xD(i);this.processor_=sN(l);const u=t.serverCache,h=t.eventCache,d=a.updateFullNode(ze.EMPTY_NODE,u.getNode(),null),p=l.updateFullNode(ze.EMPTY_NODE,h.getNode(),null),m=new wr(d,u.isFullyInitialized(),a.filtersNodes()),v=new wr(p,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=vc(v,m),this.eventGenerator_=new GD(this.query_)}get query(){return this.query_}}function pN(r){return r.viewCache_.serverCache.getNode()}function gN(r){return Ku(r.viewCache_)}function mN(r,e){const t=Xr(r.viewCache_);return t&&(r.query._queryParams.loadsAllData()||!Qe(e)&&!t.getImmediateChild(Ye(e)).isEmpty())?t.getChild(e):null}function Cb(r){return r.eventRegistrations_.length===0}function vN(r,e){r.eventRegistrations_.push(e)}function Ab(r,e,t){const i=[];if(t){Ee(e==null,"A cancel should cancel all event registrations.");const a=r.query._path;r.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,a);u&&i.push(u)})}if(e){let a=[];for(let l=0;l<r.eventRegistrations_.length;++l){const u=r.eventRegistrations_[l];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(r.eventRegistrations_.slice(l+1));break}}r.eventRegistrations_=a}else r.eventRegistrations_=[];return i}function Rb(r,e,t,i){e.type===Wn.MERGE&&e.source.queryId!==null&&(Ee(Xr(r.viewCache_),"We should always have a full cache before handling merges"),Ee(Ku(r.viewCache_),"Missing event cache, even though we have a server cache"));const a=r.viewCache_,l=oN(r.processor_,a,e,t,i);return aN(r.processor_,l.viewCache),Ee(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=l.viewCache,JE(r,l.changes,l.viewCache.eventCache.getNode(),null)}function _N(r,e){const t=r.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Tt,(l,u)=>{i.push(ca(l,u))}),t.isFullyInitialized()&&i.push(HE(t.getNode())),JE(r,i,t.getNode(),e)}function JE(r,e,t,i){const a=i?[i]:r.eventRegistrations_;return BD(r.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ju;class ew{constructor(){this.views=new Map}}function yN(r){Ee(!Ju,"__referenceConstructor has already been defined"),Ju=r}function bN(){return Ee(Ju,"Reference.ts has not been loaded"),Ju}function EN(r){return r.views.size===0}function Np(r,e,t,i){const a=e.source.queryId;if(a!==null){const l=r.views.get(a);return Ee(l!=null,"SyncTree gave us an op for an invalid query."),Rb(l,e,t,i)}else{let l=[];for(const u of r.views.values())l=l.concat(Rb(u,e,t,i));return l}}function tw(r,e,t,i,a){const l=e._queryIdentifier,u=r.views.get(l);if(!u){let h=Zu(t,a?i:null),d=!1;h?d=!0:i instanceof ze?(h=Rp(t,i),d=!1):(h=ze.EMPTY_NODE,d=!1);const p=vc(new wr(h,d,!1),new wr(i,a,!1));return new fN(e,p)}return u}function wN(r,e,t,i,a,l){const u=tw(r,e,i,a,l);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,u),vN(u,t),_N(u,t)}function SN(r,e,t,i){const a=e._queryIdentifier,l=[];let u=[];const h=Sr(r);if(a==="default")for(const[d,p]of r.views.entries())u=u.concat(Ab(p,t,i)),Cb(p)&&(r.views.delete(d),p.query._queryParams.loadsAllData()||l.push(p.query));else{const d=r.views.get(a);d&&(u=u.concat(Ab(d,t,i)),Cb(d)&&(r.views.delete(a),d.query._queryParams.loadsAllData()||l.push(d.query)))}return h&&!Sr(r)&&l.push(new(bN())(e._repo,e._path)),{removed:l,events:u}}function nw(r){const e=[];for(const t of r.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yr(r,e){let t=null;for(const i of r.views.values())t=t||mN(i,e);return t}function iw(r,e){if(e._queryParams.loadsAllData())return yc(r);{const i=e._queryIdentifier;return r.views.get(i)}}function rw(r,e){return iw(r,e)!=null}function Sr(r){return yc(r)!=null}function yc(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ec;function TN(r){Ee(!ec,"__referenceConstructor has already been defined"),ec=r}function CN(){return Ee(ec,"Reference.ts has not been loaded"),ec}let AN=1;class kb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _t(null),this.pendingWriteTree_=tN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sw(r,e,t,i,a){return qD(r.pendingWriteTree_,e,t,i,a),a?al(r,new Zr(qE(),e,t)):[]}function Wr(r,e,t=!1){const i=VD(r.pendingWriteTree_,e);if(WD(r.pendingWriteTree_,e)){let l=new _t(null);return i.snap!=null?l=l.set(nt(),!0):dn(i.children,u=>{l=l.set(new gt(u),!0)}),al(r,new Yu(i.path,l,t))}else return[]}function sl(r,e,t){return al(r,new Zr(Cp(),e,t))}function RN(r,e,t){const i=_t.fromObject(t);return al(r,new Ko(Cp(),e,i))}function kN(r,e){return al(r,new Yo(Cp(),e))}function DN(r,e,t){const i=xp(r,t);if(i){const a=Op(i),l=a.path,u=a.queryId,h=tn(l,e),d=new Yo(Ap(u),h);return Lp(r,l,d)}else return[]}function tc(r,e,t,i,a=!1){const l=e._path,u=r.syncPointTree_.get(l);let h=[];if(u&&(e._queryIdentifier==="default"||rw(u,e))){const d=SN(u,e,t,i);EN(u)&&(r.syncPointTree_=r.syncPointTree_.remove(l));const p=d.removed;if(h=d.events,!a){const m=p.findIndex(_=>_._queryParams.loadsAllData())!==-1,v=r.syncPointTree_.findOnPath(l,(_,y)=>Sr(y));if(m&&!v){const _=r.syncPointTree_.subtree(l);if(!_.isEmpty()){const y=xN(_);for(let S=0;S<y.length;++S){const E=y[S],C=E.query,A=uw(r,E);r.listenProvider_.startListening(Go(C),Zo(r,C),A.hashFn,A.onComplete)}}}!v&&p.length>0&&!i&&(m?r.listenProvider_.stopListening(Go(e),null):p.forEach(_=>{const y=r.queryToTagMap.get(bc(_));r.listenProvider_.stopListening(Go(_),y)}))}ON(r,p)}return h}function aw(r,e,t,i){const a=xp(r,i);if(a!=null){const l=Op(a),u=l.path,h=l.queryId,d=tn(u,e),p=new Zr(Ap(h),d,t);return Lp(r,u,p)}else return[]}function NN(r,e,t,i){const a=xp(r,i);if(a){const l=Op(a),u=l.path,h=l.queryId,d=tn(u,e),p=_t.fromObject(t),m=new Ko(Ap(h),d,p);return Lp(r,u,m)}else return[]}function $f(r,e,t,i=!1){const a=e._path;let l=null,u=!1;r.syncPointTree_.foreachOnPath(a,(_,y)=>{const S=tn(_,a);l=l||yr(y,S),u=u||Sr(y)});let h=r.syncPointTree_.get(a);h?(u=u||Sr(h),l=l||yr(h,nt())):(h=new ew,r.syncPointTree_=r.syncPointTree_.set(a,h));let d;l!=null?d=!0:(d=!1,l=ze.EMPTY_NODE,r.syncPointTree_.subtree(a).foreachChild((y,S)=>{const E=yr(S,nt());E&&(l=l.updateImmediateChild(y,E))}));const p=rw(h,e);if(!p&&!e._queryParams.loadsAllData()){const _=bc(e);Ee(!r.queryToTagMap.has(_),"View does not exist, but we have a tag");const y=LN();r.queryToTagMap.set(_,y),r.tagToQueryMap.set(y,_)}const m=_c(r.pendingWriteTree_,a);let v=wN(h,e,t,m,l,d);if(!p&&!u&&!i){const _=iw(h,e);v=v.concat(MN(r,e,_))}return v}function Ip(r,e,t){const a=r.pendingWriteTree_,l=r.syncPointTree_.findOnPath(e,(u,h)=>{const d=tn(u,e),p=yr(h,d);if(p)return p});return YE(a,e,l,t,!0)}function IN(r,e){const t=e._path;let i=null;r.syncPointTree_.foreachOnPath(t,(p,m)=>{const v=tn(p,t);i=i||yr(m,v)});let a=r.syncPointTree_.get(t);a?i=i||yr(a,nt()):(a=new ew,r.syncPointTree_=r.syncPointTree_.set(t,a));const l=i!=null,u=l?new wr(i,!0,!1):null,h=_c(r.pendingWriteTree_,e._path),d=tw(a,e,h,l?u.getNode():ze.EMPTY_NODE,l);return gN(d)}function al(r,e){return ow(e,r.syncPointTree_,null,_c(r.pendingWriteTree_,nt()))}function ow(r,e,t,i){if(Qe(r.path))return lw(r,e,t,i);{const a=e.get(nt());t==null&&a!=null&&(t=yr(a,nt()));let l=[];const u=Ye(r.path),h=r.operationForChild(u),d=e.children.get(u);if(d&&h){const p=t?t.getImmediateChild(u):null,m=KE(i,u);l=l.concat(ow(h,d,p,m))}return a&&(l=l.concat(Np(a,r,i,t))),l}}function lw(r,e,t,i){const a=e.get(nt());t==null&&a!=null&&(t=yr(a,nt()));let l=[];return e.children.inorderTraversal((u,h)=>{const d=t?t.getImmediateChild(u):null,p=KE(i,u),m=r.operationForChild(u);m&&(l=l.concat(lw(m,h,d,p)))}),a&&(l=l.concat(Np(a,r,i,t))),l}function uw(r,e){const t=e.query,i=Zo(r,t);return{hashFn:()=>(pN(e)||ze.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?DN(r,t._path,i):kN(r,t._path);{const l=Ik(a,t);return tc(r,t,null,l)}}}}function Zo(r,e){const t=bc(e);return r.queryToTagMap.get(t)}function bc(r){return r._path.toString()+"$"+r._queryIdentifier}function xp(r,e){return r.tagToQueryMap.get(e)}function Op(r){const e=r.indexOf("$");return Ee(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new gt(r.substr(0,e))}}function Lp(r,e,t){const i=r.syncPointTree_.get(e);Ee(i,"Missing sync point for query tag that we're tracking");const a=_c(r.pendingWriteTree_,e);return Np(i,t,a,null)}function xN(r){return r.fold((e,t,i)=>{if(t&&Sr(t))return[yc(t)];{let a=[];return t&&(a=nw(t)),dn(i,(l,u)=>{a=a.concat(u)}),a}})}function Go(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(CN())(r._repo,r._path):r}function ON(r,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=bc(i),l=r.queryToTagMap.get(a);r.queryToTagMap.delete(a),r.tagToQueryMap.delete(l)}}}function LN(){return AN++}function MN(r,e,t){const i=e._path,a=Zo(r,e),l=uw(r,t),u=r.listenProvider_.startListening(Go(e),a,l.hashFn,l.onComplete),h=r.syncPointTree_.subtree(i);if(a)Ee(!Sr(h.value),"If we're adding a query, it shouldn't be shadowed");else{const d=h.fold((p,m,v)=>{if(!Qe(p)&&m&&Sr(m))return[yc(m).query];{let _=[];return m&&(_=_.concat(nw(m).map(y=>y.query))),dn(v,(y,S)=>{_=_.concat(S)}),_}});for(let p=0;p<d.length;++p){const m=d[p];r.listenProvider_.stopListening(Go(m),Zo(r,m))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Mp(t)}node(){return this.node_}}class Up{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ot(this.path_,e);return new Up(this.syncTree_,t)}node(){return Ip(this.syncTree_,this.path_)}}const UN=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Db=function(r,e,t){if(!r||typeof r!="object")return r;if(Ee(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return zN(r[".sv"],e,t);if(typeof r[".sv"]=="object")return PN(r[".sv"],e);Ee(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},zN=function(r,e,t){switch(r){case"timestamp":return t.timestamp;default:Ee(!1,"Unexpected server value: "+r)}},PN=function(r,e,t){r.hasOwnProperty("increment")||Ee(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;typeof i!="number"&&Ee(!1,"Unexpected increment value: "+i);const a=e.node();if(Ee(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},GN=function(r,e,t,i){return zp(e,new Up(t,r),i)},cw=function(r,e,t){return zp(r,new Mp(e),t)};function zp(r,e,t){const i=r.getPriority().val(),a=Db(i,e.getImmediateChild(".priority"),t);let l;if(r.isLeafNode()){const u=r,h=Db(u.getValue(),e,t);return h!==u.getValue()||a!==u.getPriority().val()?new Pt(h,Bt(a)):r}else{const u=r;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new Pt(a))),u.forEachChild(Tt,(h,d)=>{const p=zp(d,e.getImmediateChild(h),t);p!==d&&(l=l.updateImmediateChild(h,p))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Gp(r,e){let t=e instanceof gt?e:new gt(e),i=r,a=Ye(t);for(;a!==null;){const l=la(i.node.children,a)||{children:{},childCount:0};i=new Pp(a,i,l),t=vt(t),a=Ye(t)}return i}function Ea(r){return r.node.value}function hw(r,e){r.node.value=e,Yf(r)}function dw(r){return r.node.childCount>0}function BN(r){return Ea(r)===void 0&&!dw(r)}function Ec(r,e){dn(r.node.children,(t,i)=>{e(new Pp(t,r,i))})}function fw(r,e,t,i){t&&e(r),Ec(r,a=>{fw(a,e,!0)})}function FN(r,e,t){let i=r.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ol(r){return new gt(r.parent===null?r.name:ol(r.parent)+"/"+r.name)}function Yf(r){r.parent!==null&&HN(r.parent,r.name,r)}function HN(r,e,t){const i=BN(t),a=Ui(r.node.children,e);i&&a?(delete r.node.children[e],r.node.childCount--,Yf(r)):!i&&!a&&(r.node.children[e]=t.node,r.node.childCount++,Yf(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=/[\[\].#$\/\u0000-\u001F\u007F]/,qN=/[\[\].#$\u0000-\u001F\u007F]/,bf=10*1024*1024,pw=function(r){return typeof r=="string"&&r.length!==0&&!jN.test(r)},gw=function(r){return typeof r=="string"&&r.length!==0&&!qN.test(r)},VN=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),gw(r)},mw=function(r,e,t,i){i&&e===void 0||Bp(fp(r,"value"),e,t)},Bp=function(r,e,t){const i=t instanceof gt?new cD(t,r):t;if(e===void 0)throw new Error(r+"contains undefined "+qr(i));if(typeof e=="function")throw new Error(r+"contains a function "+qr(i)+" with contents = "+e.toString());if(dE(e))throw new Error(r+"contains "+e.toString()+" "+qr(i));if(typeof e=="string"&&e.length>bf/3&&pc(e)>bf)throw new Error(r+"contains a string greater than "+bf+" utf8 bytes "+qr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(dn(e,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!pw(u)))throw new Error(r+" contains an invalid key ("+u+") "+qr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);hD(i,u),Bp(r,h,i),dD(i)}),a&&l)throw new Error(r+' contains ".value" child '+qr(i)+" in addition to actual children.")}},vw=function(r,e,t,i){if(!gw(t))throw new Error(fp(r,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},WN=function(r,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vw(r,e,t)},Fp=function(r,e){if(Ye(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},$N=function(r,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!VN(t))throw new Error(fp(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Hp(r,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();t!==null&&!bp(l,t.path)&&(r.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&r.eventLists_.push(t)}function _w(r,e,t){Hp(r,t),yw(r,i=>bp(i,e))}function si(r,e,t){Hp(r,t),yw(r,i=>Vn(i,e)||Vn(e,i))}function yw(r,e){r.recursionDepth_++;let t=!0;for(let i=0;i<r.eventLists_.length;i++){const a=r.eventLists_[i];if(a){const l=a.path;e(l)?(KN(r.eventLists_[i]),r.eventLists_[i]=null):t=!1}}t&&(r.eventLists_=[]),r.recursionDepth_--}function KN(r){for(let e=0;e<r.events.length;e++){const t=r.events[e];if(t!==null){r.events[e]=null;const i=t.getEventRunner();Mo&&Xt("event: "+t.toString()),ba(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="repo_interrupt",XN=25;class QN{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new YN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$u(),this.transactionQueueTree_=new Pp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function JN(r,e,t){if(r.stats_=_p(r.repoInfo_),r.forceRestClient_||Mk())r.server_=new Wu(r.repoInfo_,(i,a,l,u)=>{Nb(r,i,a,l,u)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Ib(r,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{xt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Ni(r.repoInfo_,e,(i,a,l,u)=>{Nb(r,i,a,l,u)},i=>{Ib(r,i)},i=>{eI(r,i)},r.authTokenProvider_,r.appCheckProvider_,t),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=Bk(r.repoInfo_,()=>new PD(r.stats_,r.server_)),r.infoData_=new OD,r.infoSyncTree_=new kb({startListening:(i,a,l,u)=>{let h=[];const d=r.infoData_.getNode(i._path);return d.isEmpty()||(h=sl(r.infoSyncTree_,i._path,d),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),qp(r,"connected",!1),r.serverSyncTree_=new kb({startListening:(i,a,l,u)=>(r.server_.listen(i,l,a,(h,d)=>{const p=u(h,d);si(r.eventQueue_,i._path,p)}),[]),stopListening:(i,a)=>{r.server_.unlisten(i,a)}})}function bw(r){const t=r.infoData_.getNode(new gt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function jp(r){return UN({timestamp:bw(r)})}function Nb(r,e,t,i,a){r.dataUpdateCount++;const l=new gt(e);t=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const d=Fu(t,p=>Bt(p));u=NN(r.serverSyncTree_,l,d,a)}else{const d=Bt(t);u=aw(r.serverSyncTree_,l,d,a)}else if(i){const d=Fu(t,p=>Bt(p));u=RN(r.serverSyncTree_,l,d)}else{const d=Bt(t);u=sl(r.serverSyncTree_,l,d)}let h=l;u.length>0&&(h=Sc(r,l)),si(r.eventQueue_,h,u)}function Ib(r,e){qp(r,"connected",e),e===!1&&iI(r)}function eI(r,e){dn(e,(t,i)=>{qp(r,t,i)})}function qp(r,e,t){const i=new gt("/.info/"+e),a=Bt(t);r.infoData_.updateSnapshot(i,a);const l=sl(r.infoSyncTree_,i,a);si(r.eventQueue_,i,l)}function Ew(r){return r.nextWriteId_++}function tI(r,e,t){const i=IN(r.serverSyncTree_,e);return i!=null?Promise.resolve(i):r.server_.get(e).then(a=>{const l=Bt(a).withIndex(e._queryParams.getIndex());$f(r.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=sl(r.serverSyncTree_,e._path,l);else{const h=Zo(r.serverSyncTree_,e);u=aw(r.serverSyncTree_,e._path,l,h)}return si(r.eventQueue_,e._path,u),tc(r.serverSyncTree_,e,t,null,!0),l},a=>(wc(r,"get for query "+xt(e)+" failed: "+a),Promise.reject(new Error(a))))}function nI(r,e,t,i,a){wc(r,"set",{path:e.toString(),value:t,priority:i});const l=jp(r),u=Bt(t,i),h=Ip(r.serverSyncTree_,e),d=cw(u,h,l),p=Ew(r),m=sw(r.serverSyncTree_,e,d,p,!0);Hp(r.eventQueue_,m),r.server_.put(e.toString(),u.val(!0),(_,y)=>{const S=_==="ok";S||cn("set at "+e+" failed: "+_);const E=Wr(r.serverSyncTree_,p,!S);si(r.eventQueue_,e,E),oI(r,a,_,y)});const v=Aw(r,e);Sc(r,v),si(r.eventQueue_,v,[])}function iI(r){wc(r,"onDisconnectEvents");const e=jp(r),t=$u();Hf(r.onDisconnect_,nt(),(a,l)=>{const u=GN(a,l,r.serverSyncTree_,e);jE(t,a,u)});let i=[];Hf(t,nt(),(a,l)=>{i=i.concat(sl(r.serverSyncTree_,a,l));const u=Aw(r,a);Sc(r,u)}),r.onDisconnect_=$u(),si(r.eventQueue_,nt(),i)}function rI(r,e,t){let i;Ye(e._path)===".info"?i=$f(r.infoSyncTree_,e,t):i=$f(r.serverSyncTree_,e,t),_w(r.eventQueue_,e._path,i)}function sI(r,e,t){let i;Ye(e._path)===".info"?i=tc(r.infoSyncTree_,e,t):i=tc(r.serverSyncTree_,e,t),_w(r.eventQueue_,e._path,i)}function aI(r){r.persistentConnection_&&r.persistentConnection_.interrupt(ZN)}function wc(r,...e){let t="";r.persistentConnection_&&(t=r.persistentConnection_.id+":"),Xt(t,...e)}function oI(r,e,t,i){e&&ba(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;i&&(l+=": "+i);const u=new Error(l);u.code=a,e(u)}})}function ww(r,e,t){return Ip(r.serverSyncTree_,e,t)||ze.EMPTY_NODE}function Vp(r,e=r.transactionQueueTree_){if(e||Tc(r,e),Ea(e)){const t=Tw(r,e);Ee(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&lI(r,ol(e),t)}else dw(e)&&Ec(e,t=>{Vp(r,t)})}function lI(r,e,t){const i=t.map(p=>p.currentWriteId),a=ww(r,e,i);let l=a;const u=a.hash();for(let p=0;p<t.length;p++){const m=t[p];Ee(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;const v=tn(e,m.path);l=l.updateChild(v,m.currentOutputSnapshotRaw)}const h=l.val(!0),d=e;r.server_.put(d.toString(),h,p=>{wc(r,"transaction put response",{path:d.toString(),status:p});let m=[];if(p==="ok"){const v=[];for(let _=0;_<t.length;_++)t[_].status=2,m=m.concat(Wr(r.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&v.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();Tc(r,Gp(r.transactionQueueTree_,e)),Vp(r,r.transactionQueueTree_),si(r.eventQueue_,e,m);for(let _=0;_<v.length;_++)ba(v[_])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{cn("transaction at "+d.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}Sc(r,e)}},u)}function Sc(r,e){const t=Sw(r,e),i=ol(t),a=Tw(r,t);return uI(r,a,i),i}function uI(r,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const d=e[h],p=tn(t,d.path);let m=!1,v;if(Ee(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),d.status===4)m=!0,v=d.abortReason,a=a.concat(Wr(r.serverSyncTree_,d.currentWriteId,!0));else if(d.status===0)if(d.retryCount>=XN)m=!0,v="maxretry",a=a.concat(Wr(r.serverSyncTree_,d.currentWriteId,!0));else{const _=ww(r,d.path,u);d.currentInputSnapshot=_;const y=e[h].update(_.val());if(y!==void 0){Bp("transaction failed: Data returned ",y,d.path);let S=Bt(y);typeof y=="object"&&y!=null&&Ui(y,".priority")||(S=S.updatePriority(_.getPriority()));const C=d.currentWriteId,A=jp(r),k=cw(S,_,A);d.currentOutputSnapshotRaw=S,d.currentOutputSnapshotResolved=k,d.currentWriteId=Ew(r),u.splice(u.indexOf(C),1),a=a.concat(sw(r.serverSyncTree_,d.path,k,d.currentWriteId,d.applyLocally)),a=a.concat(Wr(r.serverSyncTree_,C,!0))}else m=!0,v="nodata",a=a.concat(Wr(r.serverSyncTree_,d.currentWriteId,!0))}si(r.eventQueue_,t,a),a=[],m&&(e[h].status=2,function(_){setTimeout(_,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(v),!1,null))))}Tc(r,r.transactionQueueTree_);for(let h=0;h<i.length;h++)ba(i[h]);Vp(r,r.transactionQueueTree_)}function Sw(r,e){let t,i=r.transactionQueueTree_;for(t=Ye(e);t!==null&&Ea(i)===void 0;)i=Gp(i,t),e=vt(e),t=Ye(e);return i}function Tw(r,e){const t=[];return Cw(r,e,t),t.sort((i,a)=>i.order-a.order),t}function Cw(r,e,t){const i=Ea(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Ec(e,a=>{Cw(r,a,t)})}function Tc(r,e){const t=Ea(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,hw(e,t.length>0?t:void 0)}Ec(e,i=>{Tc(r,i)})}function Aw(r,e){const t=ol(Sw(r,e)),i=Gp(r.transactionQueueTree_,e);return FN(i,a=>{Ef(r,a)}),Ef(r,i),fw(i,a=>{Ef(r,a)}),t}function Ef(r,e){const t=Ea(e);if(t){const i=[];let a=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(Ee(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(Ee(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(Wr(r.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?hw(e,void 0):t.length=l+1,si(r.eventQueue_,ol(e),a);for(let u=0;u<i.length;u++)ba(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(r){let e="";const t=r.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function hI(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const t of r.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):cn(`Invalid query segment '${t}' in query '${r}'`)}return e}const xb=function(r,e){const t=dI(r),i=t.namespace;t.domain==="firebase.com"&&Oi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Oi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||Ak();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new TE(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new gt(t.pathString)}},dI=function(r){let e="",t="",i="",a="",l="",u=!0,h="https",d=443;if(typeof r=="string"){let p=r.indexOf("//");p>=0&&(h=r.substring(0,p-1),r=r.substring(p+2));let m=r.indexOf("/");m===-1&&(m=r.length);let v=r.indexOf("?");v===-1&&(v=r.length),e=r.substring(0,Math.min(m,v)),m<v&&(a=cI(r.substring(m,v)));const _=hI(r.substring(Math.min(r.length,v)));p=e.indexOf(":"),p>=0?(u=h==="https"||h==="wss",d=parseInt(e.substring(p+1),10)):p=e.length;const y=e.slice(0,p);if(y.toLowerCase()==="localhost")t="localhost";else if(y.split(".").length<=2)t=y;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),t=e.substring(S+1),l=i}"ns"in _&&(l=_.ns)}return{host:e,port:d,domain:t,subdomain:i,secure:u,scheme:h,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fI=function(){let r=0;const e=[];return function(t){const i=t===r;r=t;let a;const l=new Array(8);for(a=7;a>=0;a--)l[a]=Ob.charAt(t%64),t=Math.floor(t/64);Ee(t===0,"Cannot push at time == 0");let u=l.join("");if(i){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)u+=Ob.charAt(e[a]);return Ee(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+xt(this.snapshot.exportVal())}}class gI{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Ee(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return Qe(this._path)?null:OE(this._path)}get ref(){return new zi(this._repo,this._path)}get _queryIdentifier(){const e=vb(this._queryParams),t=mp(e);return t==="{}"?"default":t}get _queryObject(){return vb(this._queryParams)}isEqual(e){if(e=Ft(e),!(e instanceof Wp))return!1;const t=this._repo===e._repo,i=bp(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+uD(this._path)}}class zi extends Wp{constructor(e,t){super(e,t,new Tp,!1)}get parent(){const e=ME(this._path);return e===null?null:new zi(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Xo{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new gt(e),i=Qo(this.ref,e);return new Xo(this._node.getChild(t),i,Tt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new Xo(a,Qo(this.ref,i),Tt)))}hasChild(e){const t=new gt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zs(r,e){return r=Ft(r),r._checkNotDeleted("ref"),e!==void 0?Qo(r._root,e):r._root}function Qo(r,e){return r=Ft(r),Ye(r._path)===null?WN("child","path",e):vw("child","path",e),new zi(r._repo,Ot(r._path,e))}function mI(r,e){r=Ft(r),Fp("push",r._path),mw("push",e,r._path,!0);const t=bw(r._repo),i=fI(t),a=Qo(r,i),l=Qo(r,i);let u;return u=Promise.resolve(l),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function vI(r){return Fp("remove",r._path),Kf(r,null)}function Kf(r,e){r=Ft(r),Fp("set",r._path),mw("set",e,r._path,!1);const t=new fc;return nI(r._repo,r._path,e,null,t.wrapCallback(()=>{})),t.promise}function Lb(r){r=Ft(r);const e=new Rw(()=>{}),t=new Cc(e);return tI(r._repo,r,t).then(i=>new Xo(i,new zi(r._repo,r._path),r._queryParams.getIndex()))}class Cc{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new pI("value",this,new Xo(e.snapshotNode,new zi(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new gI(this,e,t):null}matches(e){return e instanceof Cc?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function _I(r,e,t,i,a){const l=new Rw(t,void 0),u=new Cc(l);return rI(r._repo,r,u),()=>sI(r._repo,r,u)}function yI(r,e,t,i){return _I(r,"value",e)}yN(zi);TN(zi);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI="FIREBASE_DATABASE_EMULATOR_HOST",Zf={};let EI=!1;function wI(r,e,t,i){const a=e.lastIndexOf(":"),l=e.substring(0,a),u=ma(l);r.repoInfo_=new TE(e,u,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(r.authTokenProvider_=i)}function SI(r,e,t,i,a){let l=i||r.options.databaseURL;l===void 0&&(r.options.projectId||Oi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xt("Using default host for project ",r.options.projectId),l=`${r.options.projectId}-default-rtdb.firebaseio.com`);let u=xb(l,a),h=u.repoInfo,d;typeof process<"u"&&Jy&&(d=Jy[bI]),d?(l=`http://${d}?ns=${h.namespace}`,u=xb(l,a),h=u.repoInfo):u.repoInfo.secure;const p=new zk(r.name,r.options,e);$N("Invalid Firebase Database URL",u),Qe(u.path)||Oi("Database URL must point to the root of a Firebase Database (not including a child path).");const m=CI(h,r,p,new Uk(r,t));return new AI(m,r)}function TI(r,e){const t=Zf[e];(!t||t[r.key]!==r)&&Oi(`Database ${e}(${r.repoInfo_}) has already been deleted.`),aI(r),delete t[r.key]}function CI(r,e,t,i){let a=Zf[e.name];a||(a={},Zf[e.name]=a);let l=a[r.toURLString()];return l&&Oi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new QN(r,EI,t,i),a[r.toURLString()]=l,l}class AI{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zi(this._repo,nt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(TI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Oi("Cannot call "+e+" on a deleted database.")}}function RI(r=gp(),e){const t=is(r,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=jR("database");i&&kI(t,...i)}return t}function kI(r,e,t,i={}){r=Ft(r),r._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=r._repoInternal;if(r._instanceStarted){if(a===r._repoInternal.repoInfo_.host&&br(i,l.repoInfo_.emulatorOptions))return;Oi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&Oi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Lu(Lu.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:qR(i.mockUserToken,r.app.options.projectId);u=new Lu(h)}ma(e)&&(Z0(e),X0("Database",!0)),wI(l,a,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(r){bk(_a),ri(new Zn("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return SI(i,a,l,t)},"PUBLIC").setMultipleInstances(!0)),On(eb,tb,r),On(eb,tb,"esm2017")}Ni.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};Ni.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};DI();function $p(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(r);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(r,i[a])&&(t[i[a]]=r[i[a]]);return t}function kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NI=kw,Dw=new ns("auth","Firebase",kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new gc("@firebase/auth");function II(r,...e){nc.logLevel<=ct.WARN&&nc.warn(`Auth (${_a}): ${r}`,...e)}function Mu(r,...e){nc.logLevel<=ct.ERROR&&nc.error(`Auth (${_a}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(r,...e){throw Kp(r,...e)}function Kn(r,...e){return Kp(r,...e)}function Yp(r,e,t){const i=Object.assign(Object.assign({},NI()),{[e]:t});return new ns("auth","Firebase",i).create(e,{appName:r.name})}function Ii(r){return Yp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xI(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ln(r,"argument-error"),Yp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Dw.create(r,...e)}function Ue(r,e,...t){if(!r)throw Kp(e,...t)}function Ri(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mu(e),new Error(e)}function Li(r,e){r||Ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function OI(){return Mb()==="http:"||Mb()==="https:"}function Mb(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OI()||Q0()||"connection"in navigator)?navigator.onLine:!0}function MI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this.shortDelay=e,this.longDelay=t,Li(t>e,"Short delay should be less than long delay!"),this.isMobile=dp()||J0()}get(){return LI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(r,e){Li(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PI=new ll(3e4,6e4);function Pi(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Gi(r,e,t,i,a={}){return Iw(r,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const h=va(Object.assign({key:r.config.apiKey},u)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const p=Object.assign({method:e,headers:d},l);return $R()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&ma(r.emulatorConfig.host)&&(p.credentials="include"),Nw.fetch()(await xw(r,r.config.apiHost,t,h),p)})}async function Iw(r,e,t){r._canInitEmulator=!1;const i=Object.assign(Object.assign({},UI),e);try{const a=new BI(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw xu(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const h=l.ok?u.errorMessage:u.error.message,[d,p]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw xu(r,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw xu(r,"email-already-in-use",u);if(d==="USER_DISABLED")throw xu(r,"user-disabled",u);const m=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Yp(r,m,p);Ln(r,m)}}catch(a){if(a instanceof ai)throw a;Ln(r,"network-request-failed",{message:String(a)})}}async function ul(r,e,t,i,a={}){const l=await Gi(r,e,t,i,a);return"mfaPendingCredential"in l&&Ln(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function xw(r,e,t,i){const a=`${e}${t}?${i}`,l=r,u=l.config.emulator?Zp(r.config,a):`${r.config.apiScheme}://${a}`;return zI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function GI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Kn(this.auth,"network-request-failed")),PI.get())})}}function xu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Kn(r,e,i);return a.customData._tokenResponse=t,a}function Ub(r){return r!==void 0&&r.enterprise!==void 0}class FI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HI(r,e){return Gi(r,"GET","/v2/recaptchaConfig",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(r,e){return Gi(r,"POST","/v1/accounts:delete",e)}async function ic(r,e){return Gi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qI(r,e=!1){const t=Ft(r),i=await t.getIdToken(e),a=Xp(i);Ue(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Bo(wf(a.auth_time)),issuedAtTime:Bo(wf(a.iat)),expirationTime:Bo(wf(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function wf(r){return Number(r)*1e3}function Xp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const a=Bu(t);return a?JSON.parse(a):(Mu("Failed to decode base64 JWT payload"),null)}catch(a){return Mu("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function zb(r){const e=Xp(r);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ai&&VI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function VI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(r){var e;const t=r.auth,i=await r.getIdToken(),a=await Jo(r,ic(t,{idToken:i}));Ue(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];r._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Ow(l.providerUserInfo):[],h=YI(r.providerData,u),d=r.isAnonymous,p=!(r.email&&l.passwordHash)&&!(h!=null&&h.length),m=d?p:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Qf(l.createdAt,l.lastLoginAt),isAnonymous:m};Object.assign(r,v)}async function $I(r){const e=Ft(r);await rc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YI(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Ow(r){return r.map(e=>{var{providerId:t}=e,i=$p(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(r,e){const t=await Iw(r,{},async()=>{const i=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await xw(r,a,"/v1/token",`key=${l}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return r.emulatorConfig&&ma(r.emulatorConfig.host)&&(d.credentials="include"),Nw.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZI(r,e){return Gi(r,"POST","/v2/accounts:revokeToken",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=zb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await KI(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new ia;return i&&(Ue(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Ue(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Ue(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return Ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(r,e){Ue(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $n{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=$p(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Qf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Jo(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qI(this,e)}reload(){return $I(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await rc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await Jo(this,jI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,u,h,d,p,m;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,_=(a=t.email)!==null&&a!==void 0?a:void 0,y=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,S=(u=t.photoURL)!==null&&u!==void 0?u:void 0,E=(h=t.tenantId)!==null&&h!==void 0?h:void 0,C=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,A=(p=t.createdAt)!==null&&p!==void 0?p:void 0,k=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:O,emailVerified:N,isAnonymous:D,providerData:W,stsTokenManager:V}=t;Ue(O&&V,e,"internal-error");const J=ia.fromJSON(this.name,V);Ue(typeof O=="string",e,"internal-error"),dr(v,e.name),dr(_,e.name),Ue(typeof N=="boolean",e,"internal-error"),Ue(typeof D=="boolean",e,"internal-error"),dr(y,e.name),dr(S,e.name),dr(E,e.name),dr(C,e.name),dr(A,e.name),dr(k,e.name);const Y=new $n({uid:O,auth:e,email:_,emailVerified:N,displayName:v,isAnonymous:D,photoURL:S,phoneNumber:y,tenantId:E,stsTokenManager:J,createdAt:A,lastLoginAt:k});return W&&Array.isArray(W)&&(Y.providerData=W.map(ie=>Object.assign({},ie))),C&&(Y._redirectEventId=C),Y}static async _fromIdTokenResponse(e,t,i=!1){const a=new ia;a.updateFromServerResponse(t);const l=new $n({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await rc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ue(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Ow(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),h=new ia;h.updateFromIdToken(i);const d=new $n({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Qf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Map;function ki(r){Li(r instanceof Function,"Expected a class definition");let e=Pb.get(r);return e?(Li(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Pb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Lw.type="NONE";const Gb=Lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(r,e,t){return`firebase:${r}:${e}:${t}`}class ra{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Uu(this.userKey,a.apiKey,l),this.fullPersistenceKey=Uu("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ic(this.auth,{idToken:e}).catch(()=>{});return t?$n._fromGetAccountInfoResponse(this.auth,t,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ra(ki(Gb),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ki(Gb);const u=Uu(i,e.config.apiKey,e.name);let h=null;for(const p of t)try{const m=await p._get(u);if(m){let v;if(typeof m=="string"){const _=await ic(e,{idToken:m}).catch(()=>{});if(!_)break;v=await $n._fromGetAccountInfoResponse(e,_,m)}else v=$n._fromJSON(e,m);p!==l&&(h=v),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new ra(l,e,i):(l=d[0],h&&await l._set(u,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new ra(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Bw(e))return"Blackberry";if(Fw(e))return"Webos";if(Uw(e))return"Safari";if((e.includes("chrome/")||zw(e))&&!e.includes("edge/"))return"Chrome";if(Gw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Mw(r=nn()){return/firefox\//i.test(r)}function Uw(r=nn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zw(r=nn()){return/crios\//i.test(r)}function Pw(r=nn()){return/iemobile/i.test(r)}function Gw(r=nn()){return/android/i.test(r)}function Bw(r=nn()){return/blackberry/i.test(r)}function Fw(r=nn()){return/webos/i.test(r)}function Qp(r=nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function XI(r=nn()){var e;return Qp(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QI(){return YR()&&document.documentMode===10}function Hw(r=nn()){return Qp(r)||Gw(r)||Fw(r)||Bw(r)||/windows phone/i.test(r)||Pw(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(r,e=[]){let t;switch(r){case"Browser":t=Bb(nn());break;case"Worker":t=`${Bb(nn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_a}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,h)=>{try{const d=e(l);u(d)}catch(d){h(d)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(r,e={}){return Gi(r,"GET","/v2/passwordPolicy",Pi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=6;class nx{constructor(e){var t,i,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:tx,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fb(this),this.idTokenSubscription=new Fb(this),this.beforeStateQueue=new JI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await ra.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ic(this,{idToken:e}),i=await $n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&(d!=null&&d.user)&&(a=d.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(Ii(this));const t=e?Ft(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ex(this),t=new nx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ns("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await ra.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(h,this,"internal-error"),h.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,i,a);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&II(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Bi(r){return Ft(r)}class Fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=i2(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rx(r){Ac=r}function qw(r){return Ac.loadJS(r)}function sx(){return Ac.recaptchaEnterpriseScript}function ax(){return Ac.gapiScript}function ox(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class lx{constructor(){this.enterprise=new ux}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ux{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cx="recaptcha-enterprise",Vw="NO_RECAPTCHA";class hx{constructor(e){this.type=cx,this.auth=Bi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,h)=>{HI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new FI(d);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(d=>{h(d)})})}function a(l,u,h){const d=window.grecaptcha;Ub(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(Vw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lx().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(h=>{if(!t&&Ub(window.grecaptcha))a(h,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=sx();d.length!==0&&(d+=h),qw(d).then(()=>{a(h,l,u)}).catch(p=>{u(p)})}}).catch(h=>{u(h)})})}}async function Hb(r,e,t,i=!1,a=!1){const l=new hx(r);let u;if(a)u=Vw;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function sc(r,e,t,i,a){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Hb(r,e,t,t==="getOobCode");return i(r,u)}else return i(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Hb(r,e,t,t==="getOobCode");return i(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(r,e){const t=is(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(br(l,e??{}))return a;Ln(a,"already-initialized")}return t.initialize({options:e})}function fx(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ki);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function px(r,e,t){const i=Bi(r);Ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=Ww(e),{host:u,port:h}=gx(e),d=h===null?"":`:${h}`,p={url:`${l}//${u}${d}/`},m=Object.freeze({host:u,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ue(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ue(br(p,i.config.emulator)&&br(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,ma(u)?(Z0(`${l}//${u}${d}`),X0("Auth",!0)):mx()}function Ww(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function gx(r){const e=Ww(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:jb(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:jb(u)}}}function jb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function mx(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,t){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function vx(r,e){return Gi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _x(r,e){return ul(r,"POST","/v1/accounts:signInWithPassword",Pi(r,e))}async function yx(r,e){return Gi(r,"POST","/v1/accounts:sendOobCode",Pi(r,e))}async function bx(r,e){return yx(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ex(r,e){return ul(r,"POST","/v1/accounts:signInWithEmailLink",Pi(r,e))}async function wx(r,e){return ul(r,"POST","/v1/accounts:signInWithEmailLink",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Jp{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new el(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new el(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(e,t,"signInWithPassword",_x);case"emailLink":return Ex(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(e,i,"signUpPassword",vx);case"emailLink":return wx(e,{idToken:t,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(r,e){return ul(r,"POST","/v1/accounts:signInWithIdp",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="http://localhost";class Qr extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=$p(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new Qr(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return sa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,sa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sa(e,t)}buildRequest(){const e={requestUri:Sx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=va(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Cx(r){const e=Io(xo(r)).link,t=e?Io(xo(e)).deep_link_id:null,i=Io(xo(r)).deep_link_id;return(i?Io(xo(i)).link:null)||i||t||e||r}class eg{constructor(e){var t,i,a,l,u,h;const d=Io(xo(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,m=(i=d.oobCode)!==null&&i!==void 0?i:null,v=Tx((a=d.mode)!==null&&a!==void 0?a:null);Ue(p&&m&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=m,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=Cx(e);try{return new eg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.providerId=wa.PROVIDER_ID}static credential(e,t){return el._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=eg.parseLink(t);return Ue(i,"argument-error"),el._fromEmailAndCode(e,i.code,i.tenantId)}}wa.PROVIDER_ID="password";wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends tg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends cl{constructor(){super("facebook.com")}static credential(e){return Qr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";fr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qr._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ci.credential(t,i)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends cl{constructor(){super("github.com")}static credential(e){return Qr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends cl{constructor(){super("twitter.com")}static credential(e,t){return Qr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gr.credential(t,i)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(r,e){return ul(r,"POST","/v1/accounts:signUp",Pi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await $n._fromIdTokenResponse(e,i,a),u=qb(i);return new Jr({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=qb(i);return new Jr({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function qb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends ai{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new ac(e,t,i,a)}}function $w(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(r,l,e,i):l})}async function Rx(r,e,t=!1){const i=await Jo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Jr._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(r,e,t=!1){const{auth:i}=r;if(bn(i.app))return Promise.reject(Ii(i));const a="reauthenticate";try{const l=await Jo(r,$w(i,a,e,r),t);Ue(l.idToken,i,"internal-error");const u=Xp(l.idToken);Ue(u,i,"internal-error");const{sub:h}=u;return Ue(r.uid===h,i,"user-mismatch"),Jr._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ln(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(r,e,t=!1){if(bn(r.app))return Promise.reject(Ii(r));const i="signIn",a=await $w(r,i,e),l=await Jr._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}async function Dx(r,e){return Yw(Bi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(r){const e=Bi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Nx(r,e,t){const i=Bi(r);await sc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bx)}async function Ix(r,e,t){if(bn(r.app))return Promise.reject(Ii(r));const i=Bi(r),u=await sc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ax).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&Kw(r),d}),h=await Jr._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function xx(r,e,t){return bn(r.app)?Promise.reject(Ii(r)):Dx(Ft(r),wa.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Kw(r),i})}function Ox(r,e,t,i){return Ft(r).onIdTokenChanged(e,t,i)}function Lx(r,e,t){return Ft(r).beforeAuthStateChanged(e,t)}function Mx(r,e,t,i){return Ft(r).onAuthStateChanged(e,t,i)}function Ux(r){return Ft(r).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=1e3,Px=10;class Xw extends Zw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);QI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Px):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},zx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xw.type="LOCAL";const Gx=Xw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw extends Zw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qw.type="SESSION";const Jw=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Rc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async p=>p(t.origin,l)),d=await Bx(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((h,d)=>{const p=ng("",20);a.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const _=v;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(m),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(_.data.response);break;default:clearTimeout(m),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(){return window}function Hx(r){ii().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(){return typeof ii().WorkerGlobalScope<"u"&&typeof ii().importScripts=="function"}async function jx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qx(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function Vx(){return eS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firebaseLocalStorageDb",Wx=1,lc="firebaseLocalStorage",nS="fbase_key";class hl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kc(r,e){return r.transaction([lc],e?"readwrite":"readonly").objectStore(lc)}function $x(){const r=indexedDB.deleteDatabase(tS);return new hl(r).toPromise()}function Jf(){const r=indexedDB.open(tS,Wx);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(lc,{keyPath:nS})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(lc)?e(i):(i.close(),await $x(),e(await Jf()))})})}async function Vb(r,e,t){const i=kc(r,!0).put({[nS]:e,value:t});return new hl(i).toPromise()}async function Yx(r,e){const t=kc(r,!1).get(e),i=await new hl(t).toPromise();return i===void 0?null:i.value}function Wb(r,e){const t=kc(r,!0).delete(e);return new hl(t).toPromise()}const Kx=800,Zx=3;class iS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Zx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rc._getInstance(Vx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jx(),!this.activeServiceWorker)return;this.sender=new Fx(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jf();return await Vb(e,oc,"1"),await Wb(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Vb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Yx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=kc(a,!1).getAll();return new hl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iS.type="LOCAL";const Xx=iS;new ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(r,e){return e?ki(e):(Ue(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qx(r){return Yw(r.auth,new ig(r),r.bypassAuthState)}function Jx(r){const{auth:e,user:t}=r;return Ue(t,e,"internal-error"),kx(t,new ig(r),r.bypassAuthState)}async function eO(r){const{auth:e,user:t}=r;return Ue(t,e,"internal-error"),Rx(t,new ig(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qx;case"linkViaPopup":case"linkViaRedirect":return eO;case"reauthViaPopup":case"reauthViaRedirect":return Jx;default:Ln(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new ll(2e3,1e4);async function nO(r,e,t){if(bn(r.app))return Promise.reject(Kn(r,"operation-not-supported-in-this-environment"));const i=Bi(r);xI(r,e,tg);const a=rS(i,t);return new $r(i,"signInViaPopup",e,a).executeNotNull()}class $r extends sS{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tO.get())};e()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="pendingRedirect",zu=new Map;class rO extends sS{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zu.get(this.auth._key());if(!e){try{const i=await sO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zu.set(this.auth._key(),e)}return this.bypassAuthState||zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sO(r,e){const t=lO(e),i=oO(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function aO(r,e){zu.set(r._key(),e)}function oO(r){return ki(r._redirectPersistence)}function lO(r){return Uu(iO,r.config.apiKey,r.name)}async function uO(r,e,t=!1){if(bn(r.app))return Promise.reject(Ii(r));const i=Bi(r),a=rS(i,e),u=await new rO(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=10*60*1e3;class hO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!aS(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Kn(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cO&&this.cachedEventUids.clear(),this.cachedEventUids.has($b(e))}saveEventToCache(e){this.cachedEventUids.add($b(e)),this.lastProcessedEventTime=Date.now()}}function $b(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function aS({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dO(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(r,e={}){return Gi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gO=/^https?/;async function mO(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fO(r);for(const t of e)try{if(vO(t))return}catch{}Ln(r,"unauthorized-domain")}function vO(r){const e=Xf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!gO.test(t))return!1;if(pO.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=new ll(3e4,6e4);function Yb(){const r=ii().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function yO(r){return new Promise((e,t)=>{var i,a,l;function u(){Yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yb(),t(Kn(r,"network-request-failed"))},timeout:_O.get()})}if(!((a=(i=ii().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=ii().gapi)===null||l===void 0)&&l.load)u();else{const h=ox("iframefcb");return ii()[h]=()=>{gapi.load?u():t(Kn(r,"network-request-failed"))},qw(`${ax()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw Pu=null,e})}let Pu=null;function bO(r){return Pu=Pu||yO(r),Pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=new ll(5e3,15e3),wO="__/auth/iframe",SO="emulator/auth/iframe",TO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AO(r){const e=r.config;Ue(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Zp(e,SO):`https://${r.config.authDomain}/${wO}`,i={apiKey:e.apiKey,appName:r.name,v:_a},a=CO.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${va(i).slice(1)}`}async function RO(r){const e=await bO(r),t=ii().gapi;return Ue(t,r,"internal-error"),e.open({where:document.body,url:AO(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TO,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Kn(r,"network-request-failed"),h=ii().setTimeout(()=>{l(u)},EO.get());function d(){ii().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DO=500,NO=600,IO="_blank",xO="http://localhost";class Kb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OO(r,e,t,i=DO,a=NO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},kO),{width:i.toString(),height:a.toString(),top:l,left:u}),p=nn().toLowerCase();t&&(h=zw(p)?IO:t),Mw(p)&&(e=e||xO,d.scrollbars="yes");const m=Object.entries(d).reduce((_,[y,S])=>`${_}${y}=${S},`,"");if(XI(p)&&h!=="_self")return LO(e||"",h),new Kb(null);const v=window.open(e||"",h,m);Ue(v,r,"popup-blocked");try{v.focus()}catch{}return new Kb(v)}function LO(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="__/auth/handler",UO="emulator/auth/handler",zO=encodeURIComponent("fac");async function Zb(r,e,t,i,a,l){Ue(r.config.authDomain,r,"auth-domain-config-required"),Ue(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:_a,eventId:a};if(e instanceof tg){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",Of(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))u[m]=v}if(e instanceof cl){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(u.scopes=m.join(","))}r.tenantId&&(u.tid=r.tenantId);const h=u;for(const m of Object.keys(h))h[m]===void 0&&delete h[m];const d=await r._getAppCheckToken(),p=d?`#${zO}=${encodeURIComponent(d)}`:"";return`${PO(r)}?${va(h).slice(1)}${p}`}function PO({config:r}){return r.emulator?Zp(r,UO):`https://${r.authDomain}/${MO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="webStorageSupport";class GO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=uO,this._overrideRedirectResult=aO}async _openPopup(e,t,i,a){var l;Li((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Zb(e,t,i,Xf(),a);return OO(e,u,ng())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await Zb(e,t,i,Xf(),a);return Hx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Li(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RO(e),i=new hO(e);return t.register("authEvent",a=>(Ue(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sf,{type:Sf},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[Sf];u!==void 0&&t(!!u),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hw()||Uw()||Qp()}}const BO=GO;var Xb="@firebase/auth",Qb="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jO(r){ri(new Zn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Ue(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:u,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jw(r)},p=new ix(i,a,l,d);return fx(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ri(new Zn("auth-internal",e=>{const t=Bi(e.getProvider("auth").getImmediate());return(i=>new FO(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),On(Xb,Qb,HO(r)),On(Xb,Qb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=5*60,VO=K0("authIdTokenMaxAge")||qO;let Jb=null;const WO=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>VO)return;const a=t==null?void 0:t.token;Jb!==a&&(Jb=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function $O(r=gp()){const e=is(r,"auth");if(e.isInitialized())return e.getImmediate();const t=dx(r,{popupRedirectResolver:BO,persistence:[Xx,Gx,Jw]}),i=K0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=WO(l.toString());Lx(t,u,()=>u(t.currentUser)),Ox(t,h=>u(h))}}const a=$0("auth");return a&&px(t,`http://${a}`),t}function YO(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}rx({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Kn("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",YO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jO("Browser");const oS="@firebase/installations",rg="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=1e4,uS=`w:${rg}`,cS="FIS_v2",KO="https://firebaseinstallations.googleapis.com/v1",ZO=60*60*1e3,XO="installations",QO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},es=new ns(XO,QO,JO);function hS(r){return r instanceof ai&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS({projectId:r}){return`${KO}/projects/${r}/installations`}function fS(r){return{token:r.token,requestStatus:2,expiresIn:tL(r.expiresIn),creationTime:Date.now()}}async function pS(r,e){const i=(await e.json()).error;return es.create("request-failed",{requestName:r,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function gS({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function eL(r,{refreshToken:e}){const t=gS(r);return t.append("Authorization",nL(e)),t}async function mS(r){const e=await r();return e.status>=500&&e.status<600?r():e}function tL(r){return Number(r.replace("s","000"))}function nL(r){return`${cS} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const i=dS(r),a=gS(r),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={fid:t,authVersion:cS,appId:r.appId,sdkVersion:uS},h={method:"POST",headers:a,body:JSON.stringify(u)},d=await mS(()=>fetch(i,h));if(d.ok){const p=await d.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:fS(p.authToken)}}else throw await pS("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=/^[cdef][\w-]{21}$/,ep="";function aL(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=oL(r);return sL.test(t)?t:ep}catch{return ep}}function oL(r){return rL(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Map;function yS(r,e){const t=Dc(r);bS(t,e),lL(t,e)}function bS(r,e){const t=_S.get(r);if(t)for(const i of t)i(e)}function lL(r,e){const t=uL();t&&t.postMessage({key:r,fid:e}),cL()}let Yr=null;function uL(){return!Yr&&"BroadcastChannel"in self&&(Yr=new BroadcastChannel("[Firebase] FID Change"),Yr.onmessage=r=>{bS(r.data.key,r.data.fid)}),Yr}function cL(){_S.size===0&&Yr&&(Yr.close(),Yr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="firebase-installations-database",dL=1,ts="firebase-installations-store";let Tf=null;function sg(){return Tf||(Tf=sE(hL,dL,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(ts)}}})),Tf}async function uc(r,e){const t=Dc(r),a=(await sg()).transaction(ts,"readwrite"),l=a.objectStore(ts),u=await l.get(t);return await l.put(e,t),await a.done,(!u||u.fid!==e.fid)&&yS(r,e.fid),e}async function ES(r){const e=Dc(r),i=(await sg()).transaction(ts,"readwrite");await i.objectStore(ts).delete(e),await i.done}async function Nc(r,e){const t=Dc(r),a=(await sg()).transaction(ts,"readwrite"),l=a.objectStore(ts),u=await l.get(t),h=e(u);return h===void 0?await l.delete(t):await l.put(h,t),await a.done,h&&(!u||u.fid!==h.fid)&&yS(r,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ag(r){let e;const t=await Nc(r.appConfig,i=>{const a=fL(i),l=pL(r,a);return e=l.registrationPromise,l.installationEntry});return t.fid===ep?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function fL(r){const e=r||{fid:aL(),registrationStatus:0};return wS(e)}function pL(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(es.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=gL(r,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mL(r)}:{installationEntry:e}}async function gL(r,e){try{const t=await iL(r,e);return uc(r.appConfig,t)}catch(t){throw hS(t)&&t.customData.serverCode===409?await ES(r.appConfig):await uc(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function mL(r){let e=await e0(r.appConfig);for(;e.registrationStatus===1;)await vS(100),e=await e0(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await ag(r);return i||t}return e}function e0(r){return Nc(r,e=>{if(!e)throw es.create("installation-not-found");return wS(e)})}function wS(r){return vL(r)?{fid:r.fid,registrationStatus:0}:r}function vL(r){return r.registrationStatus===1&&r.registrationTime+lS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L({appConfig:r,heartbeatServiceProvider:e},t){const i=yL(r,t),a=eL(r,t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const u={installation:{sdkVersion:uS,appId:r.appId}},h={method:"POST",headers:a,body:JSON.stringify(u)},d=await mS(()=>fetch(i,h));if(d.ok){const p=await d.json();return fS(p)}else throw await pS("Generate Auth Token",d)}function yL(r,{fid:e}){return`${dS(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(r,e=!1){let t;const i=await Nc(r.appConfig,l=>{if(!SS(l))throw es.create("not-registered");const u=l.authToken;if(!e&&wL(u))return l;if(u.requestStatus===1)return t=bL(r,e),l;{if(!navigator.onLine)throw es.create("app-offline");const h=TL(l);return t=EL(r,h),h}});return t?await t:i.authToken}async function bL(r,e){let t=await t0(r.appConfig);for(;t.authToken.requestStatus===1;)await vS(100),t=await t0(r.appConfig);const i=t.authToken;return i.requestStatus===0?og(r,e):i}function t0(r){return Nc(r,e=>{if(!SS(e))throw es.create("not-registered");const t=e.authToken;return CL(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function EL(r,e){try{const t=await _L(r,e),i=Object.assign(Object.assign({},e),{authToken:t});return await uc(r.appConfig,i),t}catch(t){if(hS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await ES(r.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await uc(r.appConfig,i)}throw t}}function SS(r){return r!==void 0&&r.registrationStatus===2}function wL(r){return r.requestStatus===2&&!SL(r)}function SL(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+ZO}function TL(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function CL(r){return r.requestStatus===1&&r.requestTime+lS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(r){const e=r,{installationEntry:t,registrationPromise:i}=await ag(e);return i?i.catch(console.error):og(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(r,e=!1){const t=r;return await kL(t),(await og(t,e)).token}async function kL(r){const{registrationPromise:e}=await ag(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(r){if(!r||!r.options)throw Cf("App Configuration");if(!r.name)throw Cf("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Cf(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Cf(r){return es.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="installations",NL="installations-internal",IL=r=>{const e=r.getProvider("app").getImmediate(),t=DL(e),i=is(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},xL=r=>{const e=r.getProvider("app").getImmediate(),t=is(e,TS).getImmediate();return{getId:()=>AL(t),getToken:a=>RL(t,a)}};function OL(){ri(new Zn(TS,IL,"PUBLIC")),ri(new Zn(NL,xL,"PRIVATE"))}OL();On(oS,rg);On(oS,rg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc="analytics",LL="firebase_id",ML="origin",UL=60*1e3,zL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new gc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new ns("analytics","Analytics",PL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(r){if(!r.startsWith(lg)){const e=En.create("invalid-gtag-resource",{gtagURL:r});return hn.warn(e.message),""}return r}function CS(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function BL(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function FL(r,e){const t=BL("firebase-js-sdk-policy",{createScriptURL:GL}),i=document.createElement("script"),a=`${lg}?l=${r}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function HL(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function jL(r,e,t,i,a,l){const u=i[a];try{if(u)await e[u];else{const d=(await CS(t)).find(p=>p.measurementId===a);d&&await e[d.appId]}}catch(h){hn.error(h)}r("config",a,l)}async function qL(r,e,t,i,a){try{let l=[];if(a&&a.send_to){let u=a.send_to;Array.isArray(u)||(u=[u]);const h=await CS(t);for(const d of u){const p=h.find(v=>v.measurementId===d),m=p&&e[p.appId];if(m)l.push(m);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),r("event",i,a||{})}catch(l){hn.error(l)}}function VL(r,e,t,i){async function a(l,...u){try{if(l==="event"){const[h,d]=u;await qL(r,e,t,h,d)}else if(l==="config"){const[h,d]=u;await jL(r,e,t,i,h,d)}else if(l==="consent"){const[h,d]=u;r("consent",h,d)}else if(l==="get"){const[h,d,p]=u;r("get",h,d,p)}else if(l==="set"){const[h]=u;r("set",h)}else r(l,...u)}catch(h){hn.error(h)}}return a}function WL(r,e,t,i,a){let l=function(...u){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=VL(l,r,e,t),{gtagCore:l,wrappedGtag:window[a]}}function $L(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(lg)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=30,KL=1e3;class ZL{constructor(e={},t=KL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const AS=new ZL;function XL(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function QL(r){var e;const{appId:t,apiKey:i}=r,a={method:"GET",headers:XL(i)},l=zL.replace("{app-id}",t),u=await fetch(l,a);if(u.status!==200&&u.status!==304){let h="";try{const d=await u.json();!((e=d.error)===null||e===void 0)&&e.message&&(h=d.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()}async function JL(r,e=AS,t){const{appId:i,apiKey:a,measurementId:l}=r.options;if(!i)throw En.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw En.create("no-api-key")}const u=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new n3;return setTimeout(async()=>{h.abort()},UL),RS({appId:i,apiKey:a,measurementId:l},u,h,e)}async function RS(r,{throttleEndTimeMillis:e,backoffCount:t},i,a=AS){var l;const{appId:u,measurementId:h}=r;try{await e3(i,e)}catch(d){if(h)return hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:u,measurementId:h};throw d}try{const d=await QL(r);return a.deleteThrottleMetadata(u),d}catch(d){const p=d;if(!t3(p)){if(a.deleteThrottleMetadata(u),h)return hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:u,measurementId:h};throw d}const m=Number((l=p==null?void 0:p.customData)===null||l===void 0?void 0:l.httpStatus)===503?qy(t,a.intervalMillis,YL):qy(t,a.intervalMillis),v={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return a.setThrottleMetadata(u,v),hn.debug(`Calling attemptFetch again in ${m} millis`),RS(r,v,i,a)}}function e3(r,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);r.addEventListener(()=>{clearTimeout(l),i(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function t3(r){if(!(r instanceof ai)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class n3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function i3(r,e,t,i,a){if(a&&a.global){r("event",t,i);return}else{const l=await e,u=Object.assign(Object.assign({},i),{send_to:l});r("event",t,u)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r3(){if(eE())try{await tE()}catch(r){return hn.warn(En.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return hn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function s3(r,e,t,i,a,l,u){var h;const d=JL(r);d.then(y=>{t[y.measurementId]=y.appId,r.options.measurementId&&y.measurementId!==r.options.measurementId&&hn.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>hn.error(y)),e.push(d);const p=r3().then(y=>{if(y)return i.getId()}),[m,v]=await Promise.all([d,p]);$L(l)||FL(l,m.measurementId),a("js",new Date);const _=(h=u==null?void 0:u.config)!==null&&h!==void 0?h:{};return _[ML]="firebase",_.update=!0,v!=null&&(_[LL]=v),a("config",m.measurementId,_),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.app=e}_delete(){return delete Fo[this.app.options.appId],Promise.resolve()}}let Fo={},n0=[];const i0={};let Af="dataLayer",o3="gtag",r0,kS,s0=!1;function l3(){const r=[];if(Q0()&&r.push("This is a browser extension environment."),ZR()||r.push("Cookies are not available."),r.length>0){const e=r.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=En.create("invalid-analytics-context",{errorInfo:e});hn.warn(t.message)}}function u3(r,e,t){l3();const i=r.options.appId;if(!i)throw En.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Fo[i]!=null)throw En.create("already-exists",{id:i});if(!s0){HL(Af);const{wrappedGtag:l,gtagCore:u}=WL(Fo,n0,i0,Af,o3);kS=l,r0=u,s0=!0}return Fo[i]=s3(r,n0,i0,e,r0,Af,t),new a3(r)}function c3(r=gp()){r=Ft(r);const e=is(r,cc);return e.isInitialized()?e.getImmediate():h3(r)}function h3(r,e={}){const t=is(r,cc);if(t.isInitialized()){const a=t.getImmediate();if(br(e,t.getOptions()))return a;throw En.create("already-initialized")}return t.initialize({options:e})}function d3(r,e,t,i){r=Ft(r),i3(kS,Fo[r.app.options.appId],e,t,i).catch(a=>hn.error(a))}const a0="@firebase/analytics",o0="0.10.16";function f3(){ri(new Zn(cc,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return u3(i,a,t)},"PUBLIC")),ri(new Zn("analytics-internal",r,"PRIVATE")),On(a0,o0),On(a0,o0,"esm2017");function r(e){try{const t=e.getProvider(cc).getImmediate();return{logEvent:(i,a,l)=>d3(t,i,a,l)}}catch(t){throw En.create("interop-component-reg-failed",{reason:t})}}}f3();const p3={apiKey:"AIzaSyDo1_TU1q5R3cK1H1C-Lfy7zZSdNtbrBVA",authDomain:"graph-tool-2.firebaseapp.com",projectId:"graph-tool-2",storageBucket:"graph-tool-2.firebasestorage.app",messagingSenderId:"382333212143",appId:"1:382333212143:web:99a1028548d5e1a923d21a",measurementId:"G-5EJYDEGT9B",databaseURL:"https://graph-tool-2-default-rtdb.europe-west1.firebasedatabase.app"},ug=aE(p3),Xs=RI(ug),Hr=$O(ug);c3(ug);class Rf{static saveGraph(e,t){return Kf(Zs(Xs,`graphs/${e}`),{...t,updatedAt:new Date().toISOString()})}static createNewGraph(e){const t=Zs(Xs,"graphs"),i=mI(t);return Kf(i,{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}).then(()=>i.key)}static getGraph(e){return Lb(Zs(Xs,`graphs/${e}`)).then(t=>{if(t.exists())return t.val();throw new Error("Graph not found")})}static deleteGraph(e){return vI(Zs(Xs,`graphs/${e}`))}static getGraphList(){return Lb(Zs(Xs,"graphs")).then(e=>{if(e.exists()){const t=[];return e.forEach(i=>{t.push({id:i.key,...i.val()})}),t}else return[]})}static subscribeToGraph(e,t){const i=Zs(Xs,`graphs/${e}`);return yI(i,l=>{l.exists()?t(l.val()):t(null)})}}const Qs={signUp:(r,e)=>Ix(Hr,r,e),signIn:(r,e)=>xx(Hr,r,e),signInWithGoogle:()=>{const r=new Ci;return nO(Hr,r)},signOut:()=>Ux(Hr),resetPassword:r=>Nx(Hr,r),getCurrentUser:()=>Hr.currentUser,onAuthStateChanged:r=>Mx(Hr,r)},g3=pt.createContext();function m3({children:r}){const[e,t]=pt.useState(null),[i,a]=pt.useState(!0),l=(v,_)=>Qs.signUp(v,_),u=(v,_)=>Qs.signIn(v,_),h=()=>Qs.signInWithGoogle(),d=()=>Qs.signOut(),p=v=>Qs.resetPassword(v);pt.useEffect(()=>Qs.onAuthStateChanged(_=>{t(_),a(!1)}),[]);const m={currentUser:e,signup:l,login:u,signInWithGoogle:h,logout:d,resetPassword:p};return Se.jsx(g3.Provider,{value:m,children:!i&&r})}function v3(){const r=pt.useRef(null),e=pt.useRef(null),t=pt.useRef(null),[i,a]=pt.useState(null),[l,u]=pt.useState(""),[h,d]=pt.useState(""),[p,m]=pt.useState("#3b82f6"),[v,_]=pt.useState(15),[y,S]=pt.useState("circle"),[E,C]=pt.useState(!1),[A,k]=pt.useState(null),[O,N]=pt.useState(!0),[D,W]=pt.useState("#ffffff"),[V,J]=pt.useState("Untitled Graph"),[Y,ie]=pt.useState(!1),[ye,L]=pt.useState(""),[x,T]=pt.useState("default-graph"),ae=pt.useRef(E),P=pt.useRef(A);pt.useEffect(()=>{ae.current=E},[E]),pt.useEffect(()=>{P.current=A},[A]),pt.useEffect(()=>{if(!r.current)return;const F=new ht;t.current=F,x?(L("loading"),Rf.getGraph(x).then(le=>{le&&(J(le.title||"Untitled Graph"),F.clear(),le.nodes&&Array.isArray(le.nodes)&&le.nodes.forEach(be=>{const{id:Te,...Re}=be;F.addNode(Te,Re)}),le.edges&&Array.isArray(le.edges)&&le.edges.forEach(be=>{const{source:Te,target:Re,...He}=be;if(F.hasNode(Te)&&F.hasNode(Re))try{F.addEdge(Te,Re,He)}catch(Je){console.log("Error importing edge:",Je)}}),L(""))}).catch(le=>{console.error("Error loading graph:",le),L("error"),M(F)})):M(F);const H=new CR(F,r.current,{renderLabels:!0,labelFont:"Arial",labelSize:12,labelWeight:"bold",labelColor:{color:"#000000"},defaultNodeColor:"#3b82f6",defaultEdgeColor:"#64748b",minCameraRatio:.1,maxCameraRatio:10,enableEdgeClickEvents:!0,enableEdgeWheelEvents:!0,enableEdgeHoverEvents:!0,enableCameraInteraction:!0});H.getContainer().style.backgroundColor=D,lf.assign(F,{iterations:50}),H.setSetting("defaultDrawNodeFunction",(le,be,Te)=>{const Re=Te.getNodeDisplaySize(be)||be.size||15,He=be.x,Je=be.y,yt=be.color||"#3b82f6",Ve=be.shape||"circle";if(le.fillStyle=yt,le.strokeStyle="#000000",le.lineWidth=1.5,Ve==="square"){const at=Re/2;le.fillRect(He-at,Je-at,Re,Re),le.strokeRect(He-at,Je-at,Re,Re)}else Ve==="triangle"?(le.beginPath(),le.moveTo(He,Je-Re/2),le.lineTo(He-Re/2,Je+Re/2),le.lineTo(He+Re/2,Je+Re/2),le.closePath(),le.fill(),le.stroke()):(le.beginPath(),le.arc(He,Je,Re/2,0,2*Math.PI),le.fill(),le.stroke())}),e.current=H;let oe=null,ve=!1;H.on("downNode",le=>{ve=!0,oe=le.node,F.setNodeAttribute(oe,"highlighted",!0),H.getCustomBBox()||H.setCustomBBox(H.getBBox())}),H.on("moveBody",({event:le})=>{if(!ve||!oe)return;const be=H.viewportToGraph(le);F.setNodeAttribute(oe,"x",be.x),F.setNodeAttribute(oe,"y",be.y),le.preventSigmaDefault&&le.preventSigmaDefault(),le.original&&le.original.preventDefault&&le.original.preventDefault(),le.original&&le.original.stopPropagation&&le.original.stopPropagation()});const de=()=>{oe&&F.removeNodeAttribute(oe,"highlighted"),ve=!1,oe=null};return H.on("upNode",de),H.on("upStage",de),H.on("clickNode",le=>{const be=le.node,Te=F.getNodeAttributes(be);if(console.log("Node clicked:",be),console.log("isCreatingEdge:",ae.current),console.log("firstNodeForEdge:",P.current),ae.current)if(console.log("In edge creation mode"),!P.current)console.log("Setting first node:",be),k(be);else{if(console.log("Second node clicked:",be,"First was:",P.current),P.current!==be)try{F.hasEdge(P.current,be)?console.log("Edge already exists between these nodes"):(console.log("Creating edge between:",P.current,"and",be),F.addEdge(P.current,be,{size:2,color:"#64748b"}),console.log("Edge created successfully"))}catch(Re){console.log("Error creating edge:",Re)}else console.log("Same node clicked twice, not creating edge");console.log("Exiting edge creation mode"),C(!1),k(null)}else console.log("Normal node selection mode, selecting node:",be),a(be),u(Te.label),d(Te.description||""),m(Te.color),_(Te.size||15),S(Te.shape||"circle")}),H.on("clickStage",()=>{ae.current?(C(!1),k(null)):(a(null),u(""))}),()=>{H.kill()}},[D,x]);const I=()=>{const F=t.current;if(!F)return;const H=`node_${Date.now()}`;F.addNode(H,{x:Math.random()*2-1,y:Math.random()*2-1,size:15,label:"New Node",description:"",color:"#3b82f6",shape:"circle",attachedFile:null})},he=()=>{const F=t.current;!F||!i||(F.dropNode(i),a(null),u(""),d(""))},re=()=>{const F=t.current;!F||!i||!l.trim()||F.setNodeAttribute(i,"label",l.trim())},U=()=>{const F=t.current;!F||!i||F.setNodeAttribute(i,"description",h)},G=F=>{const H=F.target.files[0];if(!H||!i)return;const oe=t.current;if(oe){if(H.size<5*1024*1024){const ve=new FileReader;ve.onload=de=>{const le={name:H.name,data:de.target.result,size:H.size,type:H.type,uploadDate:new Date().toISOString()};oe.setNodeAttribute(i,"attachedFile",le)},ve.readAsDataURL(H)}else{const ve=URL.createObjectURL(H),de={name:H.name,data:ve,size:H.size,type:H.type,uploadDate:new Date().toISOString(),isBlob:!0};oe.setNodeAttribute(i,"attachedFile",de)}F.target.value=""}},q=()=>{const F=t.current;if(!F||!i)return;const H=F.getNodeAttribute(i,"attachedFile");if(H){if(H.isBlob){window.open(H.data,"_blank");return}const oe=document.createElement("a");oe.href=H.data,oe.download=H.name,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)}},Z=()=>{const F=t.current;!F||!i||F.setNodeAttribute(i,"attachedFile",null)},ce=F=>{const H=t.current;!H||!i||(H.setNodeAttribute(i,"color",F),m(F))},ue=F=>{const H=t.current;!H||!i||(H.setNodeAttribute(i,"size",F),_(F))},Ae=F=>{const H=t.current;!H||!i||(H.setNodeAttribute(i,"shape",F),S(F))},qe=F=>{W(F),e.current&&(e.current.getContainer().style.backgroundColor=F)},De=()=>{const F=t.current;if(!F)return;const H={nodes:[],edges:[]};F.forEachNode((be,Te)=>{H.nodes.push({id:be,...Te})}),F.forEachEdge((be,Te,Re,He)=>{H.edges.push({id:be,source:Re,target:He,...Te})});const oe=JSON.stringify(H,null,2),ve=new Blob([oe],{type:"application/json"}),de=URL.createObjectURL(ve),le=document.createElement("a");le.href=de,le.download=`graph-export-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(de)},Fe=F=>{const H=F.target.files[0];if(!H)return;const oe=new FileReader;oe.onload=ve=>{try{const de=JSON.parse(ve.target.result),le=t.current;if(!le)return;le.clear(),de.nodes.forEach(be=>{const{id:Te,...Re}=be;le.addNode(Te,Re)}),de.edges.forEach(be=>{const{id:Te,source:Re,target:He,...Je}=be;try{le.addEdge(Re,He,Je)}catch(yt){console.log("Error importing edge:",yt)}}),a(null),u(""),d(""),console.log("Graph imported successfully")}catch(de){console.error("Error importing graph:",de),alert("Error importing graph. Please check the file format.")}},oe.readAsText(H),F.target.value=""},Pe=async()=>{const F=t.current;if(!F)return;const H=new By,oe={nodes:[],edges:[]};alert("Preparing zip export. This may take a moment for large graphs...");const ve=F.nodes(),de=F.edges(),le=10;for(let He=0;He<ve.length;He+=le){const Je=ve.slice(He,He+le);for(const yt of Je){const at={...F.getNodeAttributes(yt),id:yt};if(at.attachedFile){const $t=`files/${yt}_${at.attachedFile.name}`;if(at.attachedFile.isBlob)try{const Xn=await(await fetch(at.attachedFile.data)).blob(),ss=new FileReader,as=await new Promise(os=>{ss.onload=Fi=>os(Fi.target.result.split(",")[1]),ss.readAsDataURL(Xn)});H.file($t,as,{base64:!0}),at.attachedFile={...at.attachedFile,data:$t,isBlob:!1}}catch(Ht){console.error("Error processing blob URL:",Ht),at.attachedFile=null}else H.file($t,at.attachedFile.data.split(",")[1],{base64:!0}),at.attachedFile={...at.attachedFile,data:$t}}oe.nodes.push(at)}await new Promise(yt=>setTimeout(yt,0))}for(const He of de){const Je=F.getEdgeAttributes(He),yt=F.source(He),Ve=F.target(He);oe.edges.push({id:He,source:yt,target:Ve,...Je})}H.file("graph.json",JSON.stringify(oe,null,2));const be=await H.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),Te=URL.createObjectURL(be),Re=document.createElement("a");Re.href=Te,Re.download=`graph-export-${new Date().toISOString().slice(0,10)}.zip`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re),URL.revokeObjectURL(Te)},Ie=async F=>{const H=F.target.files[0];if(!H)return;const oe=new By,ve=t.current;if(ve){try{const de=await oe.loadAsync(H),le=await de.file("graph.json").async("string"),be=JSON.parse(le);ve.clear();for(const Te of be.nodes){const{id:Re,attachedFile:He,...Je}=Te;let yt=null;if(He&&He.data)try{const Ve=He.data;if(de.file(Ve)){const at=await de.file(Ve).async("base64");yt={...He,data:`data:${He.type};base64,${at}`}}}catch(Ve){console.error("Error processing file:",Ve)}ve.addNode(Re,{...Je,attachedFile:yt})}be.edges.forEach(Te=>{const{id:Re,source:He,target:Je,...yt}=Te;try{ve.addEdge(He,Je,yt)}catch(Ve){console.log("Error importing edge:",Ve)}}),a(null),u(""),d(""),alert("Graph imported from zip successfully!")}catch(de){console.error("Error importing zip:",de),alert("Error importing zip: "+de)}F.target.value=""}},Be=()=>{console.log("toggleEdgeMode called, current isCreatingEdge:",E);const F=!E;console.log("Setting isCreatingEdge to:",F),C(F),k(null),console.log("Reset firstNodeForEdge to null")},dt=()=>{const F=t.current;if(!F||!i)return;F.edges(i).forEach(oe=>F.dropEdge(oe))},b=()=>{const F=t.current;F&&lf.assign(F,{iterations:100})},Q=F=>{const H=t.current;H&&(H.forEachNode((oe,ve)=>{H.setNodeAttribute(oe,"x",ve.x*F),H.setNodeAttribute(oe,"y",ve.y*F),H.setNodeAttribute(oe,"size",Math.max(5,ve.size*F))}),H.forEachEdge((oe,ve)=>{H.setEdgeAttribute(oe,"size",Math.max(1,(ve.size||2)*F))}))},B=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"],z=()=>{alert("This would navigate back to the list of graphs.")},M=F=>{F.addNode("node1",{x:Math.random()*2-1,y:Math.random()*2-1,size:15,label:"Main Idea",description:"This is the main concept of the project",color:"#3b82f6",shape:"circle",attachedFile:null}),F.addNode("node2",{x:Math.random()*2-1,y:Math.random()*2-1,size:15,label:"Concept A",description:"First supporting concept",color:"#10b981",shape:"circle",attachedFile:null}),F.addNode("node3",{x:Math.random()*2-1,y:Math.random()*2-1,size:15,label:"Concept B",description:"Second supporting concept",color:"#f59e0b",shape:"circle",attachedFile:null}),F.addEdge("node1","node2",{size:2,color:"#64748b"})},K=async()=>{if(console.log("Save Graph button clicked!"),!t.current){console.error("Graph reference is not available");return}L("saving");const F=t.current,H={title:V,nodes:[],edges:[]};F.forEachNode((oe,ve)=>{const{attachedFile:de,...le}=ve;H.nodes.push({id:oe,...le})}),F.forEachEdge((oe,ve,de,le)=>{H.edges.push({id:oe,source:de,target:le,...ve})});try{await Rf.saveGraph(x,H),L("saved"),alert("Graph saved successfully!")}catch(oe){console.error("Error saving graph:",oe),L("error"),alert("Error saving graph. Please try again.")}finally{setTimeout(()=>{L("")},3e3)}},ge=async()=>{if(t.current){L("loading");try{const F=await Rf.getGraph(x);if(F){const H=t.current;J(F.title||"Untitled Graph"),H.clear(),F.nodes&&Array.isArray(F.nodes)&&F.nodes.forEach(oe=>{const{id:ve,...de}=oe;H.addNode(ve,de)}),F.edges&&Array.isArray(F.edges)&&F.edges.forEach(oe=>{const{source:ve,target:de,...le}=oe;if(H.hasNode(ve)&&H.hasNode(de))try{H.addEdge(ve,de,le)}catch(be){console.log("Error importing edge:",be)}}),lf.assign(H,{iterations:100}),a(null),u(""),d(""),alert("Graph loaded successfully!"),L("")}else throw new Error("No graph data found")}catch(F){console.error("Error loading graph:",F),L("error"),alert("Error loading graph. Please try again."),setTimeout(()=>{L("")},3e3)}}};return Se.jsxs("div",{className:"app-container",children:[Se.jsxs("div",{className:"graph-topbar",children:[Se.jsx("button",{onClick:z,className:"btn btn-small",children:"← Back to Graphs"}),Se.jsx("div",{className:"graph-title-container",children:Se.jsx("input",{type:"text",value:V,onChange:F=>J(F.target.value),placeholder:"Untitled Graph",className:"graph-title-input"})}),Se.jsx("button",{onClick:K,className:"btn btn-primary",disabled:ye==="saving"||ye==="loading",title:"Click to save your changes to Firebase",style:{fontWeight:"bold",fontSize:"14px",padding:"10px 15px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",border:"2px solid #2563eb"},children:ye==="saving"?"Saving...":ye==="saved"?"Saved!":ye==="error"?"Error! Try again":"💾 Save Graph"}),Se.jsx("button",{onClick:ge,className:"btn btn-secondary",disabled:ye==="saving"||ye==="loading",children:ye==="loading"?"Loading...":"Get Saved"})]}),Se.jsxs("div",{className:`controls-panel ${O?"visible":"hidden"}`,children:[Se.jsxs("div",{className:"controls-header",children:[Se.jsx("h3",{children:"Graph Controls"}),Se.jsx("button",{className:"toggle-btn",onClick:()=>N(!O),children:O?"←":"→"})]}),Se.jsxs("div",{className:"controls-content",children:[Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Nodes"}),Se.jsx("button",{onClick:I,className:"btn btn-primary",children:"Add Node"}),Se.jsx("button",{onClick:he,disabled:!i,className:"btn btn-danger",children:"Delete Selected"})]}),Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Edges"}),Se.jsx("button",{onClick:Be,className:`btn ${E?"btn-warning":"btn-primary"}`,children:E?"Cancel":"Create Edge"}),Se.jsx("button",{onClick:dt,disabled:!i,className:"btn btn-danger",children:"Delete Edges"})]}),i&&!E&&Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Edit Selected Node"}),Se.jsx("input",{type:"text",value:l,onChange:F=>u(F.target.value),placeholder:"Node label",className:"input"}),Se.jsx("button",{onClick:re,className:"btn btn-primary",children:"Update Label"}),Se.jsx("textarea",{value:h,onChange:F=>d(F.target.value),placeholder:"Node description",className:"textarea",rows:"3"}),Se.jsx("button",{onClick:U,className:"btn btn-primary",children:"Update Description"}),Se.jsxs("div",{className:"file-section",children:[Se.jsx("h5",{children:"Attached File"}),(()=>{var H;const F=(H=t.current)==null?void 0:H.getNodeAttribute(i,"attachedFile");return F?Se.jsxs("div",{className:"file-info",children:[Se.jsxs("p",{className:"file-name",children:["📄 ",F.name," ",Se.jsxs("span",{className:"file-size",children:["(",(F.size/1024).toFixed(1),"KB)"]})]}),Se.jsxs("div",{className:"file-actions",children:[Se.jsx("button",{onClick:()=>q(),className:"btn btn-small btn-primary",children:"Download"}),Se.jsx("button",{onClick:()=>Z(),className:"btn btn-small btn-danger",children:"Remove"})]})]}):Se.jsx("p",{className:"no-files",children:"No file attached"})})(),Se.jsxs("div",{className:"file-upload",children:[Se.jsx("input",{type:"file",id:"file-upload",onChange:G,className:"file-input"}),Se.jsx("label",{htmlFor:"file-upload",className:"btn btn-primary file-label",children:"+ Add File"}),Se.jsx("p",{className:"file-note",children:"📱 Note: Only one file per node. Files stored locally in browser."})]})]}),Se.jsxs("div",{className:"color-picker",children:[Se.jsx("p",{children:"Colors:"}),Se.jsx("div",{className:"color-grid",children:B.map(F=>Se.jsx("button",{className:`color-btn ${p===F?"selected":""}`,style:{backgroundColor:F},onClick:()=>ce(F)},F))})]}),Se.jsxs("div",{className:"node-size-picker",children:[Se.jsx("p",{children:"Size:"}),Se.jsx("input",{type:"range",min:"8",max:"40",value:v,onChange:F=>ue(parseInt(F.target.value)),className:"size-slider"}),Se.jsxs("span",{className:"size-value",children:[v,"px"]})]}),Se.jsxs("div",{className:"node-shape-picker",children:[Se.jsx("p",{children:"Shape:"}),Se.jsx("div",{className:"shape-grid",children:["circle","square","triangle"].map(F=>Se.jsxs("button",{className:`shape-btn ${y===F?"selected":""}`,onClick:()=>Ae(F),children:[F==="circle"&&"●",F==="square"&&"■",F==="triangle"&&"▲"]},F))})]})]}),Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Background"}),Se.jsxs("div",{className:"color-picker",children:[Se.jsx("p",{children:"Graph Background:"}),Se.jsx("div",{className:"color-grid",children:["#ffffff","#f8f9fa","#e9ecef","#dee2e6","#343a40","#212529","#000000"].map(F=>Se.jsx("button",{className:`color-btn ${D===F?"selected":""}`,style:{backgroundColor:F,border:F==="#ffffff"?"2px solid #ccc":"none"},onClick:()=>qe(F)},F))}),Se.jsx("input",{type:"color",value:D,onChange:F=>qe(F.target.value),className:"color-input",title:"Custom background color"})]})]}),Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Layout"}),Se.jsx("button",{onClick:b,className:"btn btn-primary",children:"Apply Force Layout"})]}),Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Import/Export"}),Se.jsx("button",{onClick:De,className:"btn btn-primary",children:"Export Graph"}),Se.jsx("input",{type:"file",id:"graph-import",onChange:Fe,accept:".json",className:"file-input"}),Se.jsx("label",{htmlFor:"graph-import",className:"btn btn-primary file-label",children:"Import Graph"})]}),Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Import/Export as Zip"}),Se.jsx("button",{onClick:Pe,className:"btn btn-primary",children:"Export as Zip"}),Se.jsx("input",{type:"file",id:"graph-import-zip",onChange:Ie,accept:".zip",className:"file-input"}),Se.jsx("label",{htmlFor:"graph-import-zip",className:"btn btn-primary file-label",children:"Import Zip"})]}),Se.jsxs("div",{className:"control-group",children:[Se.jsx("h4",{children:"Scale Graph"}),Se.jsx("button",{className:"btn btn-primary",onClick:()=>Q(1.2),children:"Scale Up"}),Se.jsx("button",{className:"btn btn-primary",onClick:()=>Q(.8),children:"Scale Down"})]}),E&&Se.jsx("div",{className:"status-message",children:A?"Now click the second node":"Click the first node"})]})]}),Se.jsx("div",{ref:r,className:"graph-container",style:{width:O?"calc(100vw - 320px)":"100vw",height:"100vh"}})]})}function _3(){return Se.jsx(m3,{children:Se.jsx(v3,{})})}KT.createRoot(document.getElementById("root")).render(Se.jsx(pt.StrictMode,{children:Se.jsx(_3,{})}));
